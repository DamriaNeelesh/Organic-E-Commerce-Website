"use strict";(self.webpackChunkOrganic_Shop=self.webpackChunkOrganic_Shop||[]).push([[179],{2011:(ct,Ne,F)=>{F.d(Ne,{Dh:()=>fe,GT:()=>pe,cc:()=>Oe,hO:()=>Be,on:()=>G,pX:()=>se,xv:()=>me});var d=F(4650),te=F(7554),k=F(4387);ct=F.hmd(ct);const le=["ngOnDestroy"],se=(_e,Je,at,Me={})=>new Proxy(_e,{get:(be,Ie)=>at.runOutsideAngular(()=>{var Ue;if(_e[Ie])return!(null===(Ue=Me?.spy)||void 0===Ue)&&Ue.get&&Me.spy.get(Ie,_e[Ie]),_e[Ie];if(le.indexOf(Ie)>-1)return()=>{};const je=Je.toPromise().then(W=>{const we=W&&W[Ie];return"function"==typeof we?we.bind(W):we&&we.then?we.then(Q=>at.run(()=>Q)):at.run(()=>we)});return new Proxy(()=>{},{get:(W,we)=>je[we],apply:(W,we,Q)=>je.then(ie=>{var re;const ye=ie&&ie(...Q);return!(null===(re=Me?.spy)||void 0===re)&&re.apply&&Me.spy.apply(Ie,Q,ye),ye})})})}),pe=(_e,Je)=>{Je.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(Me=>{Object.defineProperty(_e.prototype,Me,Object.getOwnPropertyDescriptor(at.prototype||at,Me))})})};class de{constructor(Je){return Je}}const fe=new d.OlP("angularfire2.app.options"),me=new d.OlP("angularfire2.app.name");function G(_e,Je,at){const be="object"==typeof at&&at||{};be.name=be.name||"string"==typeof at&&at||"[DEFAULT]";const Ue=te.Z.apps.filter(je=>je&&je.name===be.name)[0]||Je.runOutsideAngular(()=>te.Z.initializeApp(_e,be));try{JSON.stringify(_e)!==JSON.stringify(Ue.options)&&$("error",`${Ue.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(Ue)}const $=(_e,...Je)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Je)},J={provide:de,useFactory:G,deps:[fe,d.R0b,[new d.FiY,me]]};let Be=(()=>{class _e{constructor(at){te.Z.registerVersion("angularfire",k.q4.full,"core"),te.Z.registerVersion("angularfire",k.q4.full,"app-compat"),te.Z.registerVersion("angular",d.q4F.full,at.toString())}static initializeApp(at,Me){return{ngModule:_e,providers:[{provide:fe,useValue:at},{provide:me,useValue:Me}]}}}return _e.\u0275fac=function(at){return new(at||_e)(d.LFG(d.Lbi))},_e.\u0275mod=d.oAB({type:_e}),_e.\u0275inj=d.cJS({providers:[J]}),_e})();function Oe(_e,Je,at,Me,be){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===_e)||[];if(Ie)return function De(_e,Je){try{return _e.toString()===Je.toString()}catch{return _e===Je}}(be,Ue)||(ve("error",`${Je} was already initialized on the ${at} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:be,was:Ue})),Ie;{const je=Me();return globalThis.\u0275AngularfireInstanceCache.push([_e,je,be]),je}}const it=!!ct.hot,ve=(_e,...Je)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4387:(ct,Ne,F)=>{F.d(Ne,{q4:()=>hi,iC:()=>As,HU:()=>Vd,vb:()=>Ld,JM:()=>Ho});var d=F(4650),te=F(5694),k=F(5861),le=F(9681),se=F(2090),pe=F(4859),de=F(1877),fe=F(8766);const me="@firebase/installations",G="0.5.12",J=`w:${G}`,Be="FIS_v2",Je=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function Me({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function be(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function Ie(I,S){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(I,S){const B=(yield S.json()).error;return Je.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function je({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function W(I,{refreshToken:S}){const M=je(I);return M.append("Authorization",function re(I){return`${Be} ${I}`}(S)),M}function we(I){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function ye(I,S){return ce.apply(this,arguments)}function ce(){return(ce=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:M}){const B=Me(I),X=je(I),oe=S.getImmediate({optional:!0});if(oe){const Ct=yield oe.getHeartbeatsHeader();Ct&&X.append("x-firebase-client",Ct)}const He={method:"POST",headers:X,body:JSON.stringify({fid:M,authVersion:Be,appId:I.appId,sdkVersion:J})},dt=yield we(()=>fetch(B,He));if(dt.ok){const Ct=yield dt.json();return{fid:Ct.fid||M,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:be(Ct.authToken)}}throw yield Ie("Create Installation",dt)})).apply(this,arguments)}function ke(I){return new Promise(S=>{setTimeout(S,I)})}const $t=/^[cdef][\w-]{21}$/;function qe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function on(I){return function gt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return $t.test(M)?M:""}catch{return""}}function kn(I){return`${I.appName}!${I.appId}`}const un=new Map;function Xt(I,S){const M=kn(I);Ut(M,S),function rs(I,S){const M=function Or(){return!ri&&"BroadcastChannel"in self&&(ri=new BroadcastChannel("[Firebase] FID Change"),ri.onmessage=I=>{Ut(I.data.key,I.data.fid)}),ri}();M&&M.postMessage({key:I,fid:S}),function Kr(){0===un.size&&ri&&(ri.close(),ri=null)}()}(M,S)}function Ut(I,S){const M=un.get(I);if(M)for(const B of M)B(S)}let ri=null;const Zr="firebase-installations-store";let Ai=null;function _t(){return Ai||(Ai=(0,fe.X3)("firebase-installations-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Zr)}})),Ai}function Yr(I,S){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(I,S){const M=kn(I),X=(yield _t()).transaction(Zr,"readwrite"),oe=X.objectStore(Zr),Se=yield oe.get(M);return yield oe.put(S,M),yield X.done,(!Se||Se.fid!==S.fid)&&Xt(I,S.fid),S})).apply(this,arguments)}function wn(I){return ss.apply(this,arguments)}function ss(){return(ss=(0,k.Z)(function*(I){const S=kn(I),B=(yield _t()).transaction(Zr,"readwrite");yield B.objectStore(Zr).delete(S),yield B.done})).apply(this,arguments)}function os(I,S){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(I,S){const M=kn(I),X=(yield _t()).transaction(Zr,"readwrite"),oe=X.objectStore(Zr),Se=yield oe.get(M),He=S(Se);return void 0===He?yield oe.delete(M):yield oe.put(He,M),yield X.done,He&&(!Se||Se.fid!==He.fid)&&Xt(I,He.fid),He})).apply(this,arguments)}function qn(I){return ii.apply(this,arguments)}function ii(){return(ii=(0,k.Z)(function*(I){let S;const M=yield os(I.appConfig,B=>{const X=bo(B),oe=Wt(I,X);return S=oe.registrationPromise,oe.installationEntry});return""===M.fid?{installationEntry:yield S}:{installationEntry:M,registrationPromise:S}})).apply(this,arguments)}function bo(I){return si(I||{fid:qe(),registrationStatus:0})}function Wt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Je.create("app-offline"))};const M={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function $e(I,S){return Dt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Br(I)}:{installationEntry:S}}function Dt(){return(Dt=(0,k.Z)(function*(I,S){try{const M=yield ye(I,S);return Yr(I.appConfig,M)}catch(M){throw at(M)&&409===M.customData.serverCode?yield wn(I.appConfig):yield Yr(I.appConfig,{fid:S.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Br(I){return tr.apply(this,arguments)}function tr(){return(tr=(0,k.Z)(function*(I){let S=yield It(I.appConfig);for(;1===S.registrationStatus;)yield ke(100),S=yield It(I.appConfig);if(0===S.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield qn(I);return B||M}return S})).apply(this,arguments)}function It(I){return os(I,S=>{if(!S)throw Je.create("installation-not-found");return si(S)})}function si(I){return function nr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Oi(I,S){return nn.apply(this,arguments)}function nn(){return(nn=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:S},M){const B=Qr(I,M),X=W(I,M),oe=S.getImmediate({optional:!0});if(oe){const Ct=yield oe.getHeartbeatsHeader();Ct&&X.append("x-firebase-client",Ct)}const He={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:I.appId}})},dt=yield we(()=>fetch(B,He));if(dt.ok)return be(yield dt.json());throw yield Ie("Generate Auth Token",dt)})).apply(this,arguments)}function Qr(I,{fid:S}){return`${Me(I)}/${S}/authTokens:generate`}function j(I){return z.apply(this,arguments)}function z(){return(z=(0,k.Z)(function*(I,S=!1){let M;const B=yield os(I.appConfig,oe=>{if(!ft(oe))throw Je.create("not-registered");const Se=oe.authToken;if(!S&&fn(Se))return oe;if(1===Se.requestStatus)return M=U(I,S),oe;{if(!navigator.onLine)throw Je.create("app-offline");const He=fr(oe);return M=Ae(I,He),He}});return M?yield M:B.authToken})).apply(this,arguments)}function U(I,S){return q.apply(this,arguments)}function q(){return(q=(0,k.Z)(function*(I,S){let M=yield K(I.appConfig);for(;1===M.authToken.requestStatus;)yield ke(100),M=yield K(I.appConfig);const B=M.authToken;return 0===B.requestStatus?j(I,S):B})).apply(this,arguments)}function K(I){return os(I,S=>{if(!ft(S))throw Je.create("not-registered");return function Lt(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ae(I,S){return We.apply(this,arguments)}function We(){return(We=(0,k.Z)(function*(I,S){try{const M=yield Oi(I,S),B=Object.assign(Object.assign({},S),{authToken:M});return yield Yr(I.appConfig,B),M}catch(M){if(!at(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Yr(I.appConfig,B)}else yield wn(I.appConfig);throw M}})).apply(this,arguments)}function ft(I){return void 0!==I&&2===I.registrationStatus}function fn(I){return 2===I.requestStatus&&!function Yt(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+36e5}(I)}function fr(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}function yn(){return(yn=(0,k.Z)(function*(I){const S=I,{installationEntry:M,registrationPromise:B}=yield qn(S);return B?B.catch(console.error):j(S).catch(console.error),M.fid})).apply(this,arguments)}function wr(){return(wr=(0,k.Z)(function*(I,S=!1){const M=I;return yield Ur(M),(yield j(M,S)).token})).apply(this,arguments)}function Ur(I){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(I){const{registrationPromise:S}=yield qn(I);S&&(yield S)})).apply(this,arguments)}function Mi(I){return Je.create("missing-app-config-values",{valueName:I})}const Ot="installations",bn=I=>{const S=I.getProvider("app").getImmediate(),M=function ul(I){if(!I||!I.options)throw Mi("App Configuration");if(!I.name)throw Mi("App Name");const S=["projectId","apiKey","appId"];for(const M of S)if(!I.options[M])throw Mi(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:M,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},ca=I=>{const S=I.getProvider("app").getImmediate(),M=(0,le._getProvider)(S,Ot).getImmediate();return{getId:()=>function xt(I){return yn.apply(this,arguments)}(M),getToken:X=>function Kn(I){return wr.apply(this,arguments)}(M,X)}};(function wo(){(0,le._registerComponent)(new pe.wA(Ot,bn,"PUBLIC")),(0,le._registerComponent)(new pe.wA("installations-internal",ca,"PRIVATE"))})(),(0,le.registerVersion)(me,G),(0,le.registerVersion)(me,G,"esm2017");const Zn="@firebase/remote-config",Er=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lf{constructor(S,M,B,X){this.client=S,this.storage=M,this.storageCache=B,this.logger=X}isCachedDataFresh(S,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,X=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var M=this;return(0,k.Z)(function*(){const[B,X]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(X&&M.isCachedDataFresh(S.cacheMaxAgeMillis,B))return X;S.eTag=X&&X.eTag;const oe=yield M.client.fetch(S),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Se),oe})()}}function yd(I=navigator){return I.languages&&I.languages[0]||I.language}class Ws{constructor(S,M,B,X,oe,Se){this.firebaseInstallations=S,this.sdkVersion=M,this.namespace=B,this.projectId=X,this.apiKey=oe,this.appId=Se}fetch(S){var M=this;return(0,k.Z)(function*(){var B,X,oe;const[Se,He]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ct=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},pt={sdk_version:M.sdkVersion,app_instance_id:Se,app_instance_id_token:He,app_id:M.appId,language_code:yd()},Mn={method:"POST",headers:Nt,body:JSON.stringify(pt)},mr=fetch(Ct,Mn),Sl=new Promise((Bi,La)=>{S.signal.addEventListener(()=>{const $o=new Error("The operation was aborted.");$o.name="AbortError",La($o)})});let Fa;try{yield Promise.race([mr,Sl]),Fa=yield mr}catch(Bi){let La="fetch-client-network";throw"AbortError"===(null===(B=Bi)||void 0===B?void 0:B.name)&&(La="fetch-timeout"),Er.create(La,{originalErrorMessage:null===(X=Bi)||void 0===X?void 0:X.message})}let pi=Fa.status;const Nl=Fa.headers.get("ETag")||void 0;let Iu,io;if(200===Fa.status){let Bi;try{Bi=yield Fa.json()}catch(La){throw Er.create("fetch-client-parse",{originalErrorMessage:null===(oe=La)||void 0===oe?void 0:oe.message})}Iu=Bi.entries,io=Bi.state}if("INSTANCE_STATE_UNSPECIFIED"===io?pi=500:"NO_CHANGE"===io?pi=304:("NO_TEMPLATE"===io||"EMPTY_CONFIG"===io)&&(Iu={}),304!==pi&&200!==pi)throw Er.create("fetch-status",{httpStatus:pi});return{status:pi,eTag:Nl,config:Iu}})()}}class ug{constructor(S,M){this.client=S,this.storage=M}fetch(S){var M=this;return(0,k.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:M,backoffCount:B}){var X=this;return(0,k.Z)(function*(){yield function Do(I,S){return new Promise((M,B)=>{const X=Math.max(S-Date.now(),0),oe=setTimeout(M,X);I.addEventListener(()=>{clearTimeout(oe),B(Er.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,M);try{const oe=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function ai(I){if(!(I instanceof se.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(oe))throw oe;const Se={throttleEndTimeMillis:Date.now()+(0,se.$s)(B),backoffCount:B+1};return yield X.storage.setThrottleMetadata(Se),X.attemptFetch(S,Se)}})()}}class vd{constructor(S,M,B,X,oe){this.app=S,this._client=M,this._storageCache=B,this._storage=X,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ac(I,S){var M;const B=I.target.error||void 0;return Er.create(S,{originalErrorMessage:B&&(null===(M=B)||void 0===M?void 0:M.message)})}const zs="app_namespace_store";class fg{constructor(S,M,B,X=function hg(){return new Promise((I,S)=>{var M;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=X=>{S(ac(X,"storage-open"))},B.onsuccess=X=>{I(X.target.result)},B.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(zs,{keyPath:"compositeKey"})}}catch(B){S(Er.create("storage-open",{originalErrorMessage:null===(M=B)||void 0===M?void 0:M.message}))}})}()){this.appId=S,this.appName=M,this.namespace=B,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var M=this;return(0,k.Z)(function*(){const B=yield M.openDbPromise;return new Promise((X,oe)=>{var Se;const dt=B.transaction([zs],"readonly").objectStore(zs),Ct=M.createCompositeKey(S);try{const Nt=dt.get(Ct);Nt.onerror=pt=>{oe(ac(pt,"storage-get"))},Nt.onsuccess=pt=>{const Mn=pt.target.result;X(Mn?Mn.value:void 0)}}catch(Nt){oe(Er.create("storage-get",{originalErrorMessage:null===(Se=Nt)||void 0===Se?void 0:Se.message}))}})})()}set(S,M){var B=this;return(0,k.Z)(function*(){const X=yield B.openDbPromise;return new Promise((oe,Se)=>{var He;const Ct=X.transaction([zs],"readwrite").objectStore(zs),Nt=B.createCompositeKey(S);try{const pt=Ct.put({compositeKey:Nt,value:M});pt.onerror=Mn=>{Se(ac(Mn,"storage-set"))},pt.onsuccess=()=>{oe()}}catch(pt){Se(Er.create("storage-set",{originalErrorMessage:null===(He=pt)||void 0===He?void 0:He.message}))}})})()}delete(S){var M=this;return(0,k.Z)(function*(){const B=yield M.openDbPromise;return new Promise((X,oe)=>{var Se;const dt=B.transaction([zs],"readwrite").objectStore(zs),Ct=M.createCompositeKey(S);try{const Nt=dt.delete(Ct);Nt.onerror=pt=>{oe(ac(pt,"storage-delete"))},Nt.onsuccess=()=>{X()}}catch(Nt){oe(Er.create("storage-delete",{originalErrorMessage:null===(Se=Nt)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class nu{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,k.Z)(function*(){const M=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),oe=yield M;oe&&(S.lastFetchStatus=oe);const Se=yield B;Se&&(S.lastSuccessfulFetchTimestampMillis=Se);const He=yield X;He&&(S.activeConfig=He)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function ru(){return qs.apply(this,arguments)}function qs(){return(qs=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function bs(){(0,le._registerComponent)(new pe.wA("remote-config",function I(S,{instanceIdentifier:M}){const B=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Er.create("registration-window");if(!(0,se.hl)())throw Er.create("indexed-db-unavailable");const{projectId:oe,apiKey:Se,appId:He}=B.options;if(!oe)throw Er.create("registration-project-id");if(!Se)throw Er.create("registration-api-key");if(!He)throw Er.create("registration-app-id");const dt=new fg(He,B.name,M=M||"firebase"),Ct=new nu(dt),Nt=new de.Yd(Zn);Nt.logLevel=de.in.ERROR;const pt=new Ws(X,le.SDK_VERSION,M,oe,Se,He),Mn=new ug(pt,dt),mr=new lf(Mn,dt,Ct,Nt),Sl=new vd(B,mr,Ct,dt,Nt);return function af(I){const S=(0,se.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Sl),Sl},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Zn,"0.3.11"),(0,le.registerVersion)(Zn,"0.3.11","esm2017")}();const lc="/firebase-messaging-sw.js",li="/firebase-cloud-messaging-push-scope",Ks="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uc="google.c.a.c_id",pl="google.c.a.c_l",gl="google.c.a.ts",uf="google.c.a.e";var rr=(()=>{return(I=rr||(rr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",rr;var I})();function mn(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function iu(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),X=new Uint8Array(B.length);for(let oe=0;oe<B.length;++oe)X[oe]=B.charCodeAt(oe);return X}const su="fcm_token_details_db",Xr="fcm_token_object_Store";function Ed(I){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(su))return null;let S=null;return(yield(0,fe.X3)(su,5,{upgrade:(B=(0,k.Z)(function*(X,oe,Se,He){var dt;if(oe<2||!X.objectStoreNames.contains(Xr))return;const Ct=He.objectStore(Xr),Nt=yield Ct.index("fcmSenderId").get(I);if(yield Ct.clear(),Nt)if(2===oe){const pt=Nt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;S={token:pt.fcmToken,createTime:null!==(dt=pt.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:mn(pt.vapidKey)}}}else if(3===oe){const pt=Nt;S={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:mn(pt.auth),p256dh:mn(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:mn(pt.vapidKey)}}}else if(4===oe){const pt=Nt;S={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:mn(pt.auth),p256dh:mn(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:mn(pt.vapidKey)}}}}),function(oe,Se,He,dt){return B.apply(this,arguments)})})).close(),yield(0,fe.Lj)(su),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Dd(S)?S:null;var B}),Nn.apply(this,arguments)}function Dd(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Yn="firebase-messaging-store";let ou=null;function Co(){return ou||(ou=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Yn)}})),ou}function Zs(I){return pr.apply(this,arguments)}function pr(){return(pr=(0,k.Z)(function*(I){const S=Ys(I),B=yield(yield Co()).transaction(Yn).objectStore(Yn).get(S);if(B)return B;{const X=yield Ed(I.appConfig.senderId);if(X)return yield Io(I,X),X}})).apply(this,arguments)}function Io(I,S){return ws.apply(this,arguments)}function ws(){return(ws=(0,k.Z)(function*(I,S){const M=Ys(I),X=(yield Co()).transaction(Yn,"readwrite");return yield X.objectStore(Yn).put(S,M),yield X.done,S})).apply(this,arguments)}function ma(I){return ui.apply(this,arguments)}function ui(){return(ui=(0,k.Z)(function*(I){const S=Ys(I),B=(yield Co()).transaction(Yn,"readwrite");yield B.objectStore(Yn).delete(S),yield B.done})).apply(this,arguments)}function Ys({appConfig:I}){return I.appId}const nt=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function au(I,S){return cc.apply(this,arguments)}function cc(){return(cc=(0,k.Z)(function*(I,S){var M;const B=yield uu(I),X=Pt(S),oe={method:"POST",headers:B,body:JSON.stringify(X)};let Se;try{Se=yield(yield fetch(_a(I.appConfig),oe)).json()}catch(He){throw nt.create("token-subscribe-failed",{errorInfo:null===(M=He)||void 0===M?void 0:M.toString()})}if(Se.error)throw nt.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw nt.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function dc(I,S){return lu.apply(this,arguments)}function lu(){return(lu=(0,k.Z)(function*(I,S){var M;const B=yield uu(I),X=Pt(S.subscriptionOptions),oe={method:"PATCH",headers:B,body:JSON.stringify(X)};let Se;try{Se=yield(yield fetch(`${_a(I.appConfig)}/${S.token}`,oe)).json()}catch(He){throw nt.create("token-update-failed",{errorInfo:null===(M=He)||void 0===M?void 0:M.toString()})}if(Se.error)throw nt.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw nt.create("token-update-no-token");return Se.token})).apply(this,arguments)}function To(I,S){return So.apply(this,arguments)}function So(){return(So=(0,k.Z)(function*(I,S){var M;const X={method:"DELETE",headers:yield uu(I)};try{const Se=yield(yield fetch(`${_a(I.appConfig)}/${S}`,X)).json();if(Se.error)throw nt.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(oe){throw nt.create("token-unsubscribe-failed",{errorInfo:null===(M=oe)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function _a({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function uu(I){return Te.apply(this,arguments)}function Te(){return(Te=(0,k.Z)(function*({appConfig:I,installations:S}){const M=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Pt({p256dh:I,auth:S,endpoint:M,vapidKey:B}){const X={web:{endpoint:M,auth:S,p256dh:I}};return B!==Ks&&(X.web.applicationPubKey=B),X}const ya=6048e5;function No(I){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,k.Z)(function*(I){const S=yield cu(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:mn(S.getKey("auth")),p256dh:mn(S.getKey("p256dh"))},B=yield Zs(I.firebaseDependencies);if(B){if(Qs(B.subscriptionOptions,M))return Date.now()>=B.createTime+ya?ci(I,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield To(I.firebaseDependencies,B.token)}catch(X){console.warn(X)}return ba(I.firebaseDependencies,M)}return ba(I.firebaseDependencies,M)})).apply(this,arguments)}function va(I){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(I){const S=yield Zs(I.firebaseDependencies);S&&(yield To(I.firebaseDependencies,S.token),yield ma(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function ci(I,S){return vl.apply(this,arguments)}function vl(){return(vl=(0,k.Z)(function*(I,S){try{const M=yield dc(I.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:M,createTime:Date.now()});return yield Io(I.firebaseDependencies,B),M}catch(M){throw yield va(I),M}})).apply(this,arguments)}function ba(I,S){return wa.apply(this,arguments)}function wa(){return(wa=(0,k.Z)(function*(I,S){const B={token:yield au(I,S),createTime:Date.now(),subscriptionOptions:S};return yield Io(I,B),B.token})).apply(this,arguments)}function cu(I,S){return cf.apply(this,arguments)}function cf(){return(cf=(0,k.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:iu(S)})})).apply(this,arguments)}function Qs(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}function ir(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function xi(I,S){if(!S.notification)return;I.notification={};const M=S.notification.title;M&&(I.notification.title=M);const B=S.notification.body;B&&(I.notification.body=B);const X=S.notification.image;X&&(I.notification.image=X)}(S,I),function hc(I,S){!S.data||(I.data=S.data)}(S,I),function Oo(I,S){var M,B,X,oe,Se;if(!(S.fcmOptions||null!==(M=S.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const He=null!==(X=null===(B=S.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==X?X:null===(oe=S.notification)||void 0===oe?void 0:oe.click_action;He&&(I.fcmOptions.link=He);const dt=null===(Se=S.fcmOptions)||void 0===Se?void 0:Se.analytics_label;dt&&(I.fcmOptions.analyticsLabel=dt)}(S,I),S}function Ri(I){return"object"==typeof I&&!!I&&uc in I}function Id(I,S){const M=[];for(let B=0;B<I.length;B++)M.push(I.charAt(B)),B<S.length&&M.push(S.charAt(B));return M.join("")}function Ea(I){return nt.create("missing-app-config-values",{valueName:I})}Id("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Id("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class df{constructor(S,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Td(I){if(!I||!I.options)throw Ea("App Configuration Object");if(!I.name)throw Ea("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const B of S)if(!M[B])throw Ea(B);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Da(I){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,k.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(lc,{scope:li}),I.swRegistration.update().catch(()=>{})}catch(M){throw nt.create("failed-service-worker-registration",{browserErrorMessage:null===(S=M)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function du(I,S){return bl.apply(this,arguments)}function bl(){return(bl=(0,k.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield Da(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw nt.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function fc(I,S){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,k.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=Ks)})).apply(this,arguments)}function pc(){return(pc=(0,k.Z)(function*(I,S){if(!navigator)throw nt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nt.create("permission-blocked");return yield fc(I,S?.vapidKey),yield du(I,S?.serviceWorkerRegistration),No(I)})).apply(this,arguments)}function hu(I,S,M){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(I,S,M){const B=pu(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[uc],message_name:M[pl],message_time:M[gl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pu(I){switch(I){case rr.NOTIFICATION_CLICKED:return"notification_open";case rr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function gc(){return(gc=(0,k.Z)(function*(I,S){const M=S.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===rr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ir(M)):I.onMessageHandler.next(ir(M)));const B=M.data;Ri(B)&&"1"===B[uf]&&(yield hu(I,M.messageType,B))})).apply(this,arguments)}const mu="@firebase/messaging",Es=I=>{const S=new df(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function gu(I,S){return gc.apply(this,arguments)}(S,M)),S},dn=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:B=>function wl(I,S){return pc.apply(this,arguments)}(S,B)}};function Sd(){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hf(){(0,le._registerComponent)(new pe.wA("messaging",Es,"PUBLIC")),(0,le._registerComponent)(new pe.wA("messaging-internal",dn,"PRIVATE")),(0,le.registerVersion)(mu,"0.9.16"),(0,le.registerVersion)(mu,"0.9.16","esm2017")}();const mc="analytics",xo="firebase_id",Sa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ro="https://www.googletagmanager.com/gtag/js",sr=new de.Yd("@firebase/analytics");function Md(I){return Promise.all(I.map(S=>S.catch(M=>M)))}function pg(I,S){const M=document.createElement("script");M.src=`${Ro}?l=${I}&id=${S}`,M.async=!0,document.head.appendChild(M)}function mf(I,S,M,B,X,oe){return Po.apply(this,arguments)}function Po(){return(Po=(0,k.Z)(function*(I,S,M,B,X,oe){const Se=B[X];try{if(Se)yield S[Se];else{const dt=(yield Md(M)).find(Ct=>Ct.measurementId===X);dt&&(yield S[dt.appId])}}catch(He){sr.error(He)}I("config",X,oe)})).apply(this,arguments)}function _f(I,S,M,B,X){return ko.apply(this,arguments)}function ko(){return(ko=(0,k.Z)(function*(I,S,M,B,X){try{let oe=[];if(X&&X.send_to){let Se=X.send_to;Array.isArray(Se)||(Se=[Se]);const He=yield Md(M);for(const dt of Se){const Ct=He.find(pt=>pt.measurementId===dt),Nt=Ct&&S[Ct.appId];if(!Nt){oe=[];break}oe.push(Nt)}}0===oe.length&&(oe=Object.values(S)),yield Promise.all(oe),I("event",B,X||{})}catch(oe){sr.error(oe)}})).apply(this,arguments)}function vf(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(Ro))return S;return null}const Pi=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wf=new class ls{constructor(S={},M=1e3){this.throttleMetadata=S,this.intervalMillis=M}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,M){this.throttleMetadata[S]=M}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Ef(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Fo(I){return hn.apply(this,arguments)}function hn(){return(hn=(0,k.Z)(function*(I){var S;const{appId:M,apiKey:B}=I,X={method:"GET",headers:Ef(B)},oe=Sa.replace("{app-id}",M),Se=yield fetch(oe,X);if(200!==Se.status&&304!==Se.status){let He="";try{const dt=yield Se.json();null!==(S=dt.error)&&void 0!==S&&S.message&&(He=dt.error.message)}catch{}throw Pi.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:He})}return Se.json()})).apply(this,arguments)}function Ht(I){return st.apply(this,arguments)}function st(){return(st=(0,k.Z)(function*(I,S=wf,M){const{appId:B,apiKey:X,measurementId:oe}=I.options;if(!B)throw Pi.create("no-app-id");if(!X){if(oe)return{measurementId:oe,appId:B};throw Pi.create("no-api-key")}const Se=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Eu;return setTimeout((0,k.Z)(function*(){He.abort()}),void 0!==M?M:6e4),rn({appId:B,apiKey:X,measurementId:oe},Se,He,S)})).apply(this,arguments)}function rn(I,S,M){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,k.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:M},B,X=wf){var oe,Se;const{appId:He,measurementId:dt}=I;try{yield Bn(B,S)}catch(Ct){if(dt)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(oe=Ct)||void 0===oe?void 0:oe.message}]`),{appId:He,measurementId:dt};throw Ct}try{const Ct=yield Fo(I);return X.deleteThrottleMetadata(He),Ct}catch(Ct){const Nt=Ct;if(!wu(Nt)){if(X.deleteThrottleMetadata(He),dt)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${Nt?.message}]`),{appId:He,measurementId:dt};throw Ct}const pt=503===Number(null===(Se=Nt?.customData)||void 0===Se?void 0:Se.httpStatus)?(0,se.$s)(M,X.intervalMillis,30):(0,se.$s)(M,X.intervalMillis),Mn={throttleEndTimeMillis:Date.now()+pt,backoffCount:M+1};return X.setThrottleMetadata(He,Mn),sr.debug(`Calling attemptFetch again in ${pt} millis`),rn(I,Mn,B,X)}})).apply(this,arguments)}function Bn(I,S){return new Promise((M,B)=>{const X=Math.max(S-Date.now(),0),oe=setTimeout(M,X);I.addEventListener(()=>{clearTimeout(oe),B(Pi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function wu(I){if(!(I instanceof se.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Eu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Du,us;function Xs(){return(Xs=(0,k.Z)(function*(I,S,M,B,X){if(X&&X.global)I("event",M,B);else{const oe=yield S;I("event",M,Object.assign(Object.assign({},B),{send_to:oe}))}})).apply(this,arguments)}function Oa(I){us=I}function yc(I){Du=I}function Cu(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(){var I;if(!(0,se.hl)())return sr.warn(Pi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(S){return sr.warn(Pi.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Ds(){return(Ds=(0,k.Z)(function*(I,S,M,B,X,oe,Se){var He;const dt=Ht(I);dt.then(mr=>{M[mr.measurementId]=mr.appId,I.options.measurementId&&mr.measurementId!==I.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>sr.error(mr)),S.push(dt);const Ct=Cu().then(mr=>{if(mr)return B.getId()}),[Nt,pt]=yield Promise.all([dt,Ct]);vf()||pg(oe,Nt.measurementId),us&&(X("consent","default",us),Oa(void 0)),X("js",new Date);const Mn=null!==(He=Se?.config)&&void 0!==He?He:{};return Mn.origin="firebase",Mn.update=!0,null!=pt&&(Mn[xo]=pt),X("config",Nt.measurementId,Mn),Du&&(X("set",Du),yc(void 0)),Nt.measurementId})).apply(this,arguments)}class Mr{constructor(S){this.app=S}_delete(){return delete xr[this.app.options.appId],Promise.resolve()}}let xr={},Cs=[];const di={};let xa,gr,ki="dataLayer",zt=!1;function Df(I,S,M){!function Rd(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((B,X)=>`(${X+1}) ${B}`).join(" "),M=Pi.create("invalid-analytics-context",{errorInfo:S});sr.warn(M.message)}}();const B=I.options.appId;if(!B)throw Pi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Pi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xr[B])throw Pi.create("already-exists",{id:B});if(!zt){!function gg(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(ki);const{wrappedGtag:oe,gtagCore:Se}=function yf(I,S,M,B,X){let oe=function(...Se){window[B].push(arguments)};return window[X]&&"function"==typeof window[X]&&(oe=window[X]),window[X]=function bu(I,S,M,B){function oe(){return(oe=(0,k.Z)(function*(Se,He,dt){try{"event"===Se?yield _f(I,S,M,He,dt):"config"===Se?yield mf(I,S,M,B,He,dt):"consent"===Se?I("consent","update",dt):I("set",He)}catch(Ct){sr.error(Ct)}})).apply(this,arguments)}return function X(Se,He,dt){return oe.apply(this,arguments)}}(oe,I,S,M),{gtagCore:oe,wrappedGtag:window[X]}}(xr,Cs,di,ki,"gtag");gr=oe,xa=Se,zt=!0}return xr[B]=function Vo(I,S,M,B,X,oe,Se){return Ds.apply(this,arguments)}(I,Cs,di,S,xa,ki,M),new Mr(I)}function Ra(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Is="@firebase/analytics";!function Rr(){(0,le._registerComponent)(new pe.wA(mc,(S,{options:M})=>Df(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,le._registerComponent)(new pe.wA("analytics-internal",function I(S){try{const M=S.getProvider(mc).getImmediate();return{logEvent:(B,X,oe)=>function Fi(I,S,M,B){I=(0,se.m9)(I),function xd(I,S,M,B,X){return Xs.apply(this,arguments)}(gr,xr[I.app.options.appId],S,M,B).catch(X=>sr.error(X))}(M,B,X,oe)}}catch(M){throw Pi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,le.registerVersion)(Is,"0.8.0"),(0,le.registerVersion)(Is,"0.8.0","esm2017")}();var Pa=F(4408),Bo=F(7565);const Il=new class ka extends Bo.v{}(class Cl extends Pa.o{constructor(S,M){super(S,M),this.scheduler=S,this.work=M}schedule(S,M=0){return M>0?super.schedule(S,M):(this.delay=M,this.state=S,this.scheduler.flush(this),this)}execute(S,M){return M>0||this.closed?super.execute(S,M):this._execute(S,M)}requestAsyncId(S,M,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(S,M,B):S.flush(this)}});var kd=F(4986),Ts=F(8505),to=F(9468),Pr=F(5363);const hi=new d.GfV("7.4.1"),Ss="__angularfire_symbol__analyticsIsSupportedValue",vc="__angularfire_symbol__analyticsIsSupported",Uo="__angularfire_symbol__remoteConfigIsSupportedValue",bc="__angularfire_symbol__remoteConfigIsSupported",Xn="__angularfire_symbol__messagingIsSupportedValue",Li="__angularfire_symbol__messagingIsSupported";function Ho(I,S,M){if(S){if(1===S.length)return S[0];const oe=S.filter(Se=>Se.app===M);if(1===oe.length)return oe[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[vc]||(globalThis[vc]=Ra().then(I=>globalThis[Ss]=I).catch(()=>globalThis[Ss]=!1)),globalThis[Li]||(globalThis[Li]=Sd().then(I=>globalThis[Xn]=I).catch(()=>globalThis[Xn]=!1)),globalThis[bc]||(globalThis[bc]=ru().then(I=>globalThis[Uo]=I).catch(()=>globalThis[Uo]=!1));const Ld=(I,S)=>{const M=S?[S]:(0,te.C6)(),B=[];return M.forEach(X=>{X.container.getProvider(I).instances.forEach(Se=>{B.includes(Se)||B.push(Se)})}),B};function Vi(){}class no{constructor(S,M=Il){this.zone=S,this.delegate=M}now(){return this.delegate.now()}schedule(S,M,B){const X=this.zone;return this.delegate.schedule(function(Se){X.runGuarded(()=>{S.apply(this,[Se])})},M,B)}}class Tl{constructor(S){this.zone=S,this.task=null}call(S,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vi,{},Vi,Vi)),M.pipe((0,Ts.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vd=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new no(Zone.current)),this.insideAngular=M.run(()=>new no(Zone.current,kd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function fi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function As(I){return fi(),function On(I){return function(M){return(M=M.lift(new Tl(I.ngZone))).pipe((0,to.R)(I.outsideAngular),(0,Pr.Q)(I.insideAngular))}}(fi())(I)}},5694:(ct,Ne,F)=>{F.d(Ne,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=F(9681)},7554:(ct,Ne,F)=>{F.d(Ne,{Z:()=>d.Z});var d=F(3942)},6682:(ct,Ne,F)=>{F.r(Ne);var d=F(5861),te=F(3942),k=F(2090),le=F(9681),se=F(655),pe=F(1877),de=F(4859);const De=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},it=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new pe.Yd("@firebase/auth");function at(v,...p){Je.logLevel<=pe.in.ERROR&&Je.error(`Auth (${le.SDK_VERSION}): ${v}`,...p)}function Me(v,...p){throw je(v,...p)}function be(v,...p){return je(v,...p)}function Ie(v,p,_){const w=Object.assign(Object.assign({},it()),{[p]:_});return new k.LL("auth","Firebase",w).create(p,{appName:v.name})}function Ue(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Me(v,"argument-error"),Ie(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(v,...p){if("string"!=typeof v){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return ve.create(v,...p)}function W(v,p,..._){if(!v)throw je(p,..._)}function we(v){const p="INTERNAL ASSERTION FAILED: "+v;throw at(p),new Error(p)}function Q(v,p){v||we(p)}const ie=new Map;function re(v){Q(v instanceof Function,"Expected a class definition");let p=ie.get(v);return p?(Q(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ie.set(v,p),p)}function ke(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function gt(){return"http:"===$t()||"https:"===$t()}function $t(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class on{constructor(p,_){this.shortDelay=p,this.longDelay=_,Q(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kn(v,p){Q(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class un{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vr=new on(3e4,6e4);function Zt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Ut(v,p,_,w){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(v,p,_,w,A={}){return ri(v,A,(0,d.Z)(function*(){let R={},Y={};w&&("GET"===p?Y=w:R={body:JSON.stringify(w)});const ae=(0,k.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Le=yield v._getAdditionalHeaders();return Le["Content-Type"]="application/json",v.languageCode&&(Le["X-Firebase-Locale"]=v.languageCode),un.fetch()(Hs(v,v.config.apiHost,_,ae),Object.assign({method:p,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ri(v,p,_){return Or.apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(v,p,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Xt),p);try{const A=new Zr(v),R=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const Y=yield R.json();if("needConfirmation"in Y)throw Ai(v,"account-exists-with-different-credential",Y);if(R.ok&&!("errorMessage"in Y))return Y;{const ae=R.ok?Y.errorMessage:Y.error.message,[Le,Xe]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ai(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Le)throw Ai(v,"email-already-in-use",Y);if("USER_DISABLED"===Le)throw Ai(v,"user-disabled",Y);const vt=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Ie(v,vt,Xe);Me(v,vt)}}catch(A){if(A instanceof k.ZR)throw A;Me(v,"network-request-failed")}})).apply(this,arguments)}function Kr(v,p,_,w){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(v,p,_,w,A={}){const R=yield Ut(v,p,_,w,A);return"mfaPendingCredential"in R&&Me(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Hs(v,p,_,w){const A=`${p}${_}?${w}`;return v.config.emulator?kn(v.config,A):`${v.config.apiScheme}://${A}`}class Zr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(be(this.auth,"network-request-failed")),Vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ai(v,p,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const A=be(v,p,w);return A.customData._tokenResponse=_,A}function Yr(){return(Yr=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Fn(v,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ss(v,p){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Tn(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function bo(){return(bo=(0,d.Z)(function*(v,p=!1){const _=(0,k.m9)(v),w=yield _.getIdToken(p),A=$e(w);W(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,Y=R?.sign_in_provider;return{claims:A,token:w,authTime:Tn(Wt(A.auth_time)),issuedAtTime:Tn(Wt(A.iat)),expirationTime:Tn(Wt(A.exp)),signInProvider:Y||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function Wt(v){return 1e3*Number(v)}function $e(v){var p;const[_,w,A]=v.split(".");if(void 0===_||void 0===w||void 0===A)return at("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,k.tV)(w);return R?JSON.parse(R):(at("Failed to decode base64 JWT payload"),null)}catch(R){return at("Caught error parsing JWT payload as JSON",null===(p=R)||void 0===p?void 0:p.toString()),null}}function Br(v,p){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof k.ZR&&It(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function It({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class si{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(_=w)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class nr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tn(this.lastLoginAt),this.creationTime=Tn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Oi(v){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(v){var p;const _=v.auth,w=yield v.getIdToken(),A=yield Br(v,ss(_,{idToken:w}));W(A?.users.length,_,"internal-error");const R=A.users[0];v._notifyReloadListener(R);const Y=null!==(p=R.providerUserInfo)&&void 0!==p&&p.length?U(R.providerUserInfo):[],ae=z(v.providerData,Y),vt=!!v.isAnonymous&&!(v.email&&R.passwordHash||ae?.length),mt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new nr(R.createdAt,R.lastLoginAt),isAnonymous:vt};Object.assign(v,mt)})).apply(this,arguments)}function j(){return(j=(0,d.Z)(function*(v){const p=(0,k.m9)(v);yield Oi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(v,p){return[...v.filter(w=>!p.some(A=>A.providerId===w.providerId)),...p]}function U(v){return v.map(p=>{var{providerId:_}=p,w=(0,se._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function K(){return(K=(0,d.Z)(function*(v,p){const _=yield ri(v,{},(0,d.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:R}=v.config,Y=Hs(v,A,"/v1/token",`key=${R}`),ae=yield v._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(Y,{method:"POST",headers:ae,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){W(p.idToken,"internal-error"),W(typeof p.idToken<"u","internal-error"),W(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Dt(v){const p=$e(v);return W(p,"internal-error"),W(typeof p.exp<"u","internal-error"),W(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,d.Z)(function*(){return W(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:Y}=yield function q(v,p){return K.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(A,R,Number(Y))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:A,expirationTime:R}=_,Y=new Ae;return w&&(W("string"==typeof w,"internal-error",{appName:p}),Y.refreshToken=w),A&&(W("string"==typeof A,"internal-error",{appName:p}),Y.accessToken=A),R&&(W("number"==typeof R,"internal-error",{appName:p}),Y.expirationTime=R),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ae,this.toJSON())}_performRefresh(){return we("not implemented")}}function We(v,p){W("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class ft{constructor(p){var{uid:_,auth:w,stsTokenManager:A}=p,R=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new si(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new nr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const w=yield Br(_,_.stsTokenManager.getToken(_.auth,p));return W(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function ii(v){return bo.apply(this,arguments)}(this,p)}reload(){return function Qr(v){return j.apply(this,arguments)}(this)}_assign(p){this!==p&&(W(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ft(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,d.Z)(function*(){let A=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),A=!0),_&&(yield Oi(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield Br(p,function _t(v,p){return Yr.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,A,R,Y,ae,Le,Xe,vt;const mt=null!==(w=_.displayName)&&void 0!==w?w:void 0,Hn=null!==(A=_.email)&&void 0!==A?A:void 0,ds=null!==(R=_.phoneNumber)&&void 0!==R?R:void 0,Rc=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,Lu=null!==(ae=_.tenantId)&&void 0!==ae?ae:void 0,Fl=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,Pc=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,Vu=null!==(vt=_.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:eh,emailVerified:th,isAnonymous:sy,providerData:Ag,stsTokenManager:nh}=_;W(eh&&nh,p,"internal-error");const cw=Ae.fromJSON(this.name,nh);W("string"==typeof eh,p,"internal-error"),We(mt,p.name),We(Hn,p.name),W("boolean"==typeof th,p,"internal-error"),W("boolean"==typeof sy,p,"internal-error"),We(ds,p.name),We(Rc,p.name),We(Lu,p.name),We(Fl,p.name),We(Pc,p.name),We(Vu,p.name);const kc=new ft({uid:eh,auth:p,email:Hn,emailVerified:th,displayName:mt,isAnonymous:sy,photoURL:Rc,phoneNumber:ds,tenantId:Lu,stsTokenManager:cw,createdAt:Pc,lastLoginAt:Vu});return Ag&&Array.isArray(Ag)&&(kc.providerData=Ag.map(dw=>Object.assign({},dw))),Fl&&(kc._redirectEventId=Fl),kc}static _fromIdTokenResponse(p,_,w=!1){return(0,d.Z)(function*(){const A=new Ae;A.updateFromServerResponse(_);const R=new ft({uid:_.localId,auth:p,stsTokenManager:A,isAnonymous:w});return yield Oi(R),R})()}}const Yt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,w){var A=this;return(0,d.Z)(function*(){A.storage[_]=w})()}_get(_){var w=this;return(0,d.Z)(function*(){const A=w.storage[_];return void 0===A?null:A})()}_remove(_){var w=this;return(0,d.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function fr(v,p,_){return`firebase:${v}:${p}:${_}`}class Lt{constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:A,name:R}=this.auth;this.fullUserKey=fr(this.userKey,A.apiKey,R),this.fullPersistenceKey=fr("persistence",A.apiKey,R),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?ft._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,d.Z)(function*(){if(!_.length)return new Lt(re(Yt),p,w);const A=(yield Promise.all(_.map(function(){var Xe=(0,d.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let R=A[0]||re(Yt);const Y=fr(w,p.config.apiKey,p.name);let ae=null;for(const Xe of _)try{const vt=yield Xe._get(Y);if(vt){const mt=ft._fromJSON(p,vt);Xe!==R&&(ae=mt),R=Xe;break}}catch{}const Le=A.filter(Xe=>Xe._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],ae&&(yield R._set(Y,ae.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,d.Z)(function*(vt){if(vt!==R)try{yield vt._remove(Y)}catch{}});return function(vt){return Xe.apply(this,arguments)}}())),new Lt(R,p,w)):new Lt(R,p,w)})()}}function xt(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ur(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(yn(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Tt(p))return"Blackberry";if(en(p))return"Webos";if(Kn(p))return"Safari";if((p.includes("chrome/")||wr(p))&&!p.includes("edge/"))return"Chrome";if(ze(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function yn(v=(0,k.z$)()){return/firefox\//i.test(v)}function Kn(v=(0,k.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function wr(v=(0,k.z$)()){return/crios\//i.test(v)}function Ur(v=(0,k.z$)()){return/iemobile/i.test(v)}function ze(v=(0,k.z$)()){return/android/i.test(v)}function Tt(v=(0,k.z$)()){return/blackberry/i.test(v)}function en(v=(0,k.z$)()){return/webos/i.test(v)}function En(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function vn(v=(0,k.z$)()){return En(v)||ze(v)||en(v)||Tt(v)||/windows phone/i.test(v)||Ur(v)}function Mi(v,p=[]){let _;switch(v){case"Browser":_=xt((0,k.z$)());break;case"Worker":_=`${xt((0,k.z$)())}-${v}`;break;default:_=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${w}`}class Ot{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=R=>new Promise((Y,ae)=>{try{Y(p(R))}catch(Le){ae(Le)}});w.onAbort=_,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){var w;if(_.auth.currentUser===p)return;const A=[];try{for(const R of _.queue)yield R(p),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const Y of A)try{Y()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=R)||void 0===w?void 0:w.message})}})()}}class eu{constructor(p,_,w){this.app=p,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ca(this),this.idTokenSubscription=new ca(this),this.beforeStateQueue=new Ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=re(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,R;if(!w._deleted&&(w.persistenceManager=yield Lt.create(w,p),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var w;const A=yield _.assertedPersistence.getCurrentUser();let R=A,Y=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ae=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=R?._redirectEventId,Xe=yield _.tryRedirectSignIn(p);(!ae||ae===Le)&&Xe?.user&&(R=Xe.user,Y=!0)}if(!R)return _.directlySetCurrentUser(null);if(!R._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(R)}catch(ae){R=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ae))}return R?_.reloadAndSetCurrentUserOrClear(R):_.directlySetCurrentUser(null)}return W(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===R._redirectEventId?_.directlySetCurrentUser(R):_.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){var w;try{yield Oi(p)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const w=p?(0,k.m9)(p):null;return w&&W(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return p&&W(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(re(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new k.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,d.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(_);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&re(p)||_._popupRedirectResolver;W(w,_,"argument-error"),_.redirectPersistenceManager=yield Lt.create(_,[re(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var w,A;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,A){if(this._deleted)return()=>{};const R="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return W(Y,this,"internal-error"),Y.then(()=>R(this.currentUser)),"function"==typeof _?p.addObserver(_,w,A):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Mi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function bn(v){return(0,k.m9)(v)}class ca{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,k.ne)(_=>this.observer=_)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zn(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function ys(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class oi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(p){return we("not implemented")}_linkToIdToken(p,_){return we("not implemented")}_getReauthenticationResolver(p){return we("not implemented")}}function Er(v,p){return cn.apply(this,arguments)}function cn(){return(cn=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:resetPassword",Zt(v,p))})).apply(this,arguments)}function _d(v,p){return oc.apply(this,arguments)}function oc(){return(oc=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function cl(v,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:update",Zt(v,p))})).apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithPassword",Zt(v,p))})).apply(this,arguments)}function Hr(v,p){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:sendOobCode",Zt(v,p))})).apply(this,arguments)}function af(v,p){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(v,p){return Hr(v,p)})).apply(this,arguments)}function Jr(v,p){return hl.apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(v,p){return Hr(v,p)})).apply(this,arguments)}function fl(v,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(v,p){return Hr(v,p)})).apply(this,arguments)}function as(v,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(v,p){return Hr(v,p)})).apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithEmailLink",Zt(v,p))})).apply(this,arguments)}function yd(){return(yd=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithEmailLink",Zt(v,p))})).apply(this,arguments)}class Ws extends oi{constructor(p,_,w,A=null){super("password",w),this._email=p,this._password=_,this._tenantId=A}static _fromEmailAndPassword(p,_){return new Ws(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new Ws(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function $s(v,p){return dl.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ew(v,p){return tu.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Me(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return _d(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function lf(v,p){return yd.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:Me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Do(v,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithIdp",Zt(v,p))})).apply(this,arguments)}class vs extends oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new vs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:A}=_,R=(0,se._T)(_,["providerId","signInMethod"]);if(!w||!A)return null;const Y=new vs(w,A);return Y.idToken=R.idToken||void 0,Y.accessToken=R.accessToken||void 0,Y.secret=R.secret,Y.nonce=R.nonce,Y.pendingToken=R.pendingToken||null,Y}_getIdTokenResponse(p){return Do(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,Do(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Do(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,k.xO)(_)}return p}}function cg(v,p){return vd.apply(this,arguments)}function vd(){return(vd=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:sendVerificationCode",Zt(v,p))})).apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithPhoneNumber",Zt(v,p))})).apply(this,arguments)}function bd(){return(bd=(0,d.Z)(function*(v,p){const _=yield Kr(v,"POST","/v1/accounts:signInWithPhoneNumber",Zt(v,p));if(_.temporaryProof)throw Ai(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const hg={USER_NOT_FOUND:"user-not-found"};function nu(){return(nu=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithPhoneNumber",Zt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),hg)})).apply(this,arguments)}class bs extends oi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new bs({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new bs({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function ac(v,p){return zs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function dg(v,p){return bd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function fg(v,p){return nu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:A}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:R}=p;return w||_||A||R?new bs({verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:R}):null}}class ru{constructor(p){var _,w,A,R,Y,ae;const Le=(0,k.zd)((0,k.pd)(p)),Xe=null!==(_=Le.apiKey)&&void 0!==_?_:null,vt=null!==(w=Le.oobCode)&&void 0!==w?w:null,mt=function B_(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);W(Xe&&vt&&mt,"argument-error"),this.apiKey=Xe,this.operation=mt,this.code=vt,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Y=Le.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ae=Le.tenantId)&&void 0!==ae?ae:null}static parseLink(p){const _=function wd(v){const p=(0,k.zd)((0,k.pd)(v)).link,_=p?(0,k.zd)((0,k.pd)(p)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||_||p||v}(p);try{return new ru(_)}catch{return null}}}let lc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return Ws._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const A=ru.parseLink(w);return W(A,"argument-error"),Ws._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class li{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ks extends li{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class pa extends Ks{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return W("providerId"in _&&"signInMethod"in _,"argument-error"),vs._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return W(p.idToken||p.accessToken,"argument-error"),vs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return pa.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return pa.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:R,nonce:Y,providerId:ae}=p;if(!w&&!A&&!_&&!R||!ae)return null;try{return new pa(ae)._credential({idToken:_,accessToken:w,nonce:Y,pendingToken:R})}catch{return null}}}let uc=(()=>{class v extends Ks{constructor(){super("facebook.com")}static credential(_){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),pl=(()=>{class v extends Ks{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:A}=_;if(!w&&!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),gl=(()=>{class v extends Ks{constructor(){super("github.com")}static credential(_){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ga extends oi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Do(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,Do(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Do(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:A,pendingToken:R}=_;return w&&A&&R&&w===A?new ga(w,R):null}static _create(p,_){return new ga(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mn extends li{constructor(p){W(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return mn.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return mn.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=ga.fromJSON(p);return W(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return ga._create(w,_)}catch{return null}}}let iu=(()=>{class v extends Ks{constructor(){super("twitter.com")}static credential(_,w){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=_;if(!w||!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function su(v,p){return ml.apply(this,arguments)}function ml(){return(ml=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signUp",Zt(v,p))})).apply(this,arguments)}class Xr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,A=!1){return(0,d.Z)(function*(){const R=yield ft._fromIdTokenResponse(p,w,A),Y=Ed(w);return new Xr({user:R,providerId:Y,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const A=Ed(w);return new Xr({user:p,providerId:A,_tokenResponse:w,operationType:_})})()}}function Ed(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Dd(){return(Dd=(0,d.Z)(function*(v){var p;const _=bn(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Xr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield su(_,{returnSecureToken:!0}),A=yield Xr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Cd extends k.ZR{constructor(p,_,w,A){var R;super(_.code,_.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,A){return new Cd(p,_,w,A)}}function _l(v,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Cd._fromErrorAndOperation(v,R,p,w):R})}function Yn(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Co(){return(Co=(0,d.Z)(function*(v,p){const _=(0,k.m9)(v);yield Io(!0,_,p);const{providerUserInfo:w}=yield Fn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),A=Yn(w||[]);return _.providerData=_.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Zs(v,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(v,p,_=!1){const w=yield Br(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Xr._forOperation(v,"link",w)})).apply(this,arguments)}function Io(v,p,_){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(v,p,_){yield Oi(p);const A=!1===v?"provider-already-linked":"no-such-provider";W(Yn(p.providerData).has(_)===v,p.auth,A)})).apply(this,arguments)}function ma(v,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(v,p,_=!1){var w;const{auth:A}=v,R="reauthenticate";try{const Y=yield Br(v,_l(A,R,p,v),_);W(Y.idToken,A,"internal-error");const ae=$e(Y.idToken);W(ae,A,"internal-error");const{sub:Le}=ae;return W(v.uid===Le,A,"user-mismatch"),Xr._forOperation(v,R,Y)}catch(Y){throw"auth/user-not-found"===(null===(w=Y)||void 0===w?void 0:w.code)&&Me(A,"user-mismatch"),Y}})).apply(this,arguments)}function Ys(v,p){return yl.apply(this,arguments)}function yl(){return(yl=(0,d.Z)(function*(v,p,_=!1){const w="signIn",A=yield _l(v,w,p),R=yield Xr._fromIdTokenResponse(v,w,A);return _||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function nt(v,p){return au.apply(this,arguments)}function au(){return(au=(0,d.Z)(function*(v,p){return Ys(bn(v),p)})).apply(this,arguments)}function cc(v,p){return dc.apply(this,arguments)}function dc(){return(dc=(0,d.Z)(function*(v,p){const _=(0,k.m9)(v);return yield Io(!1,_,p.providerId),Zs(_,p)})).apply(this,arguments)}function lu(v,p){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(v,p){return ma((0,k.m9)(v),p)})).apply(this,arguments)}function So(v,p){return _a.apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(v,p){return Kr(v,"POST","/v1/accounts:signInWithCustomToken",Zt(v,p))})).apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(v,p){const _=bn(v),w=yield So(_,{token:p,returnSecureToken:!0}),A=yield Xr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Pt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?ya._fromServerResponse(p,_):Me(p,"internal-error")}}class ya extends Pt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new ya(_)}}function No(v,p,_){var w;W((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),W(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(W(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(W(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function va(){return(va=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v),A={requestType:"PASSWORD_RESET",email:p};_&&No(w,A,_),yield Jr(w,A)})).apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(v,p,_){yield Er((0,k.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(v,p){yield cl((0,k.m9)(v),{oobCode:p})})).apply(this,arguments)}function wa(v,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,d.Z)(function*(v,p){const _=(0,k.m9)(v),w=yield Er(_,{oobCode:p}),A=w.requestType;switch(W(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(w.mfaInfo,_,"internal-error");default:W(w.email,_,"internal-error")}let R=null;return w.mfaInfo&&(R=Pt._fromServerResponse(bn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(v,p){const{data:_}=yield wa((0,k.m9)(v),p);return _.email})).apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(v,p,_){const w=bn(v),A=yield su(w,{returnSecureToken:!0,email:p,password:_}),R=yield Xr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ri(){return(Ri=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v),A={requestType:"EMAIL_SIGNIN",email:p};W(_.handleCodeInApp,w,"argument-error"),_&&No(w,A,_),yield fl(w,A)})).apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v),A=lc.credentialWithLink(p,_||ke());return W(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),nt(w,A)})).apply(this,arguments)}function df(v,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:createAuthUri",Zt(v,p))})).apply(this,arguments)}function du(){return(du=(0,d.Z)(function*(v,p){const w={identifier:p,continueUri:gt()?ke():"http://localhost"},{signinMethods:A}=yield df((0,k.m9)(v),w);return A||[]})).apply(this,arguments)}function fc(){return(fc=(0,d.Z)(function*(v,p){const _=(0,k.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&No(_.auth,A,p);const{email:R}=yield af(_.auth,A);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function wl(){return(wl=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&No(w.auth,R,_);const{email:Y}=yield as(w.auth,R);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function pc(v,p){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(v,p){return Ut(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,k.m9)(v),R={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Y=yield Br(w,pc(w.auth,R));w.displayName=Y.displayName||null,w.photoURL=Y.photoUrl||null;const ae=w.providerData.find(({providerId:Le})=>"password"===Le);ae&&(ae.displayName=w.displayName,ae.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Y)})).apply(this,arguments)}function mu(v,p,_){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(v,p,_){const{auth:w}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(R.email=p),_&&(R.password=_);const Y=yield Br(v,_d(w,R));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class dn{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class hf extends dn{constructor(p,_,w,A){super(p,_,w),this.username=A}}class Sd extends dn{constructor(p,_){super(p,"facebook.com",_)}}class Nd extends hf{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class ff extends dn{constructor(p,_){super(p,"google.com",_)}}class _u extends hf{constructor(p,_,w){super(p,"twitter.com",_,w)}}function pf(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Es(v){var p,_;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Y=null===(_=null===(p=$e(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new dn(R,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!w)return null;switch(w){case"facebook.com":return new Sd(R,A);case"github.com":return new Nd(R,A);case"google.com":return new ff(R,A);case"twitter.com":return new _u(R,A,v.screenName||null);case"custom":case"anonymous":return new dn(R,null);default:return new dn(R,w,A)}}(_)}class Sa{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Sa("enroll",p)}static _fromMfaPendingCredential(p){return new Sa("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Sa._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Sa._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ro{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=bn(p),A=_.customData._serverResponse,R=(A.mfaInfo||[]).map(ae=>Pt._fromServerResponse(w,ae));W(A.mfaPendingCredential,w,"internal-error");const Y=Sa._fromMfaPendingCredential(A.mfaPendingCredential);return new Ro(Y,R,function(){var ae=(0,d.Z)(function*(Le){const Xe=yield Le._process(w,Y);delete A.mfaInfo,delete A.mfaPendingCredential;const vt=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const mt=yield Xr._fromIdTokenResponse(w,_.operationType,vt);return yield w._updateCurrentUser(mt.user),mt;case"reauthenticate":return W(_.user,w,"internal-error"),Xr._forOperation(_.user,_.operationType,vt);default:Me(w,"internal-error")}});return function(Le){return ae.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}function Md(v,p){return Ut(v,"POST","/v2/accounts/mfaEnrollment:start",Zt(v,p))}class mf{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Pt._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new mf(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Sa._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var w=this;return(0,d.Z)(function*(){const A=p,R=yield w.getSession(),Y=yield Br(w.user,A._process(w.user.auth,R,_));return yield w.user._updateTokensIfNecessary(Y),w.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){var w;const A="string"==typeof p?p:p.uid,R=yield _.user.getIdToken(),Y=yield Br(_.user,function gg(v,p){return Ut(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(v,p))}(_.user.auth,{idToken:R,mfaEnrollmentId:A}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ae})=>ae!==A),yield _.user._updateTokensIfNecessary(Y);try{yield _.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(w=ae)||void 0===w?void 0:w.code))throw ae}})()}}const Po=new WeakMap,ko="__sak";class bu{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ko,"1"),this.storage.removeItem(ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Js=(()=>{class v extends bu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yf(){const v=(0,k.z$)();return Kn(v)||En(v)}()&&function ul(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),R=this.localCache[w];A!==R&&_(w,R,A)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ae,Le,Xe)=>{this.notifyListeners(ae,Xe)});const A=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(A);if(_.newValue!==ae)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!w)return}const R=()=>{const ae=this.storage.getItem(A);!w&&this.localCache[A]===ae||this.notifyListeners(A,ae)},Y=this.storage.getItem(A);!function Gs(){return(0,k.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?R():setTimeout(R,10)}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const R of Array.from(A))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var A=()=>super._set,R=this;return(0,d.Z)(function*(){yield A().call(R,_,w),R.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,A=this;return(0,d.Z)(function*(){const R=yield w().call(A,_);return A.localCache[_]=JSON.stringify(R),R})()}_remove(_){var w=()=>super._remove,A=this;return(0,d.Z)(function*(){yield w().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),ls=(()=>{class v extends bu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Ef=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(R=>R.isListeningto(_));if(w)return w;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,d.Z)(function*(){const A=_,{eventId:R,eventType:Y,data:ae}=A.data,Le=w.handlersMap[Y];if(!Le?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:Y});const Xe=Array.from(Le).map(function(){var mt=(0,d.Z)(function*(Hn){return Hn(A.origin,ae)});return function(Hn){return mt.apply(this,arguments)}}()),vt=yield function wf(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:R,eventType:Y,response:vt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Fo(v="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return v+_}class hn{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var A=this;return(0,d.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Y,ae;return new Promise((Le,Xe)=>{const vt=Fo("",20);R.port1.start();const mt=setTimeout(()=>{Xe(new Error("unsupported_event"))},w);ae={messageChannel:R,onMessage(Hn){const ds=Hn;if(ds.data.eventId===vt)switch(ds.data.status){case"ack":clearTimeout(mt),Y=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Le(ds.data.response);break;default:clearTimeout(mt),clearTimeout(Y),Xe(new Error("invalid_response"))}}},A.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),A.target.postMessage({eventType:p,eventId:vt,data:_},[R.port2])}).finally(()=>{ae&&A.removeMessageHandler(ae)})})()}}function Ht(){return window}function rn(){return typeof Ht().WorkerGlobalScope<"u"&&"function"==typeof Ht().importScripts}function Bn(){return(Bn=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Du="firebaseLocalStorageDb",Xs="firebaseLocalStorage",_c="fbase_key";class ei{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ot(v,p){return v.transaction([Xs],p?"readwrite":"readonly").objectStore(Xs)}function Lo(){const v=indexedDB.open(Du,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Xs,{keyPath:_c})}catch(A){_(A)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Xs)?p(w):(w.close(),yield function Na(){const v=indexedDB.deleteDatabase(Du);return new ei(v).toPromise()}(),p(yield Lo()))}))})}function Aa(v,p,_){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(v,p,_){const w=ot(v,!0).put({[_c]:p,value:_});return new ei(w).toPromise()})).apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(v,p){const _=ot(v,!1).get(p),w=yield new ei(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Oa(v,p){const _=ot(v,!0).delete(p);return new ei(_).toPromise()}const Vo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Lo()),_.db})()}_withRetries(_){var w=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const R=yield w._openDb();return yield _(R)}catch(R){if(A++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return rn()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Ef._getInstance(function Eu(){return rn()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(A,R){return{keyProcessed:(yield _._poll()).includes(R.key)}});return function(A,R){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var w,A;if(_.activeServiceWorker=yield function Cn(){return Bn.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new hn(_.activeServiceWorker);const R=yield _.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Lo();return yield Aa(_,ko,"1"),yield Oa(_,ko),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(R=>Aa(R,_,w)),A.localCache[_]=w,A.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,d.Z)(function*(){const A=yield w._withRetries(R=>function pn(v,p){return us.apply(this,arguments)}(R,_));return w.localCache[_]=A,A})()}_remove(_){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(A=>Oa(A,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const w=yield _._withRetries(Y=>{const ae=ot(Y,!1).getAll();return new ei(ae).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:Y,value:ae}of w)R.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(ae)&&(_.notifyListeners(Y,ae),A.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!R.has(Y)&&(_.notifyListeners(Y,null),A.push(Y));return A})()}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const R of Array.from(A))R(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ds(v,p){return Ut(v,"POST","/v2/accounts/mfaSignIn:start",Zt(v,p))}function Cs(){return(Cs=(0,d.Z)(function*(v){return(yield Ut(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ki(v){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=A=>{const R=be("internal-error");R.customData=A,_(R)},w.type="text/javascript",w.charset="UTF-8",function di(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function eo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const zt=1e12;class or{constructor(p){this.auth=p,this.counter=zt,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new Rd(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||zt;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||zt))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var w;return null===(w=_._widgets.get(p||zt))||void 0===w||w.execute(),""})()}}class Rd{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;W(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Df(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const An=eo("rcb"),Dr=new on(3e4,6e4);class Jn{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Ht().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return W(function Un(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Ht().grecaptcha):new Promise((w,A)=>{const R=Ht().setTimeout(()=>{A(be(p,"network-request-failed"))},Dr.get());Ht()[An]=()=>{Ht().clearTimeout(R),delete Ht()[An];const ae=Ht().grecaptcha;if(!ae)return void A(be(p,"internal-error"));const Le=ae.render;ae.render=(Xe,vt)=>{const mt=Le(Xe,vt);return this.counter++,mt},this.hostLanguage=_,w(ae)},ki(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:An,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(R),A(be(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Ht().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pd{load(p){return(0,d.Z)(function*(){return new or(p)})()}clearedOneInstance(){}}const Cf="recaptcha",ar={theme:"light",type:"image"};class cs{constructor(p,_=Object.assign({},ar),w){this.parameters=_,this.type=Cf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(w),this.isInvisible="invisible"===this.parameters.size,W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;W(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pd:new Jn,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(R=>{const Y=ae=>{!ae||(p.tokenChangeListeners.delete(Y),R(ae))};p.tokenChangeListeners.add(Y),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=Ht()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){W(gt()&&!rn(),p.auth,"internal-error"),yield function Fi(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function xr(v){return Cs.apply(this,arguments)}(p.auth);W(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class lr{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=bs._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Cr(){return(Cr=(0,d.Z)(function*(v,p,_){const w=bn(v),A=yield ka(w,p,(0,k.m9)(_));return new lr(A,R=>nt(w,R))})).apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v);yield Io(!1,w,"phone");const A=yield ka(w.auth,p,(0,k.m9)(_));return new lr(A,R=>cc(w,R))})).apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v),A=yield ka(w.auth,p,(0,k.m9)(_));return new lr(A,R=>lu(w,R))})).apply(this,arguments)}function ka(v,p,_){return Il.apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(v,p,_){var w;const A=yield _.verify();try{let R;if(W("string"==typeof A,v,"argument-error"),W(_.type===Cf,v,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const Y=R.session;if("phoneNumber"in R)return W("enroll"===Y.type,v,"internal-error"),(yield Md(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{W("signin"===Y.type,v,"internal-error");const ae=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return W(ae,v,"missing-multi-factor-info"),(yield Ds(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield cg(v,{phoneNumber:R.phoneNumber,recaptchaToken:A});return Y}}finally{_._reset()}})).apply(this,arguments)}function kd(){return(kd=(0,d.Z)(function*(v,p){yield Zs((0,k.m9)(v),p)})).apply(this,arguments)}let Ts=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=bn(_)}verifyPhoneNumber(_,w){return ka(this.auth,_,(0,k.m9)(w))}static credential(_,w){return bs._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:A}=_;return w&&A?bs._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function to(v,p){return p?re(p):(W(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Pr extends oi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Do(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Do(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Do(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function hi(v){return Ys(v.auth,new Pr(v),v.bypassAuthState)}function Ss(v){const{auth:p,user:_}=v;return W(_,p,"internal-error"),ma(_,new Pr(v),v.bypassAuthState)}function vc(v){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(v){const{auth:p,user:_}=v;return W(_,p,"internal-error"),Zs(_,new Pr(v),v.bypassAuthState)})).apply(this,arguments)}class bc{constructor(p,_,w,A,R=!1){this.auth=p,this.resolver=w,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(w,A){p.pendingPromise={resolve:w,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(w,A){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:R,tenantId:Y,error:ae,type:Le}=p;if(ae)return void _.reject(ae);const Xe={auth:_.auth,requestUri:w,sessionId:A,tenantId:Y||void 0,postBody:R||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(Xe))}catch(vt){_.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return hi;case"linkViaPopup":case"linkViaRedirect":return vc;case"reauthViaPopup":case"reauthViaRedirect":return Ss;default:Me(this.auth,"internal-error")}}resolve(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xn=new on(2e3,1e4);function jo(){return(jo=(0,d.Z)(function*(v,p,_){const w=bn(v);Ue(v,p,li);const A=to(w,_);return new Ld(w,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Fd(){return(Fd=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v);Ue(w.auth,p,li);const A=to(w.auth,_);return new Ld(w.auth,"reauthViaPopup",p,A,w).executeNotNull()})).apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v);Ue(w.auth,p,li);const A=to(w.auth,_);return new Ld(w.auth,"linkViaPopup",p,A,w).executeNotNull()})).apply(this,arguments)}let Ld=(()=>{class v extends bc{constructor(_,w,A,R,Y){super(_,w,R,Y),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const w=yield _.execute();return W(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,d.Z)(function*(){Q(1===_.filter.length,"Popup operations only handle one event");const w=Fo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Xn.get())};_()}}return v.currentPopupAction=null,v})();const no=new Map;class Tl extends bc{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let w=no.get(_.auth._key());if(!w){try{const R=(yield function Vd(v,p){return fi.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(R)}catch(A){w=()=>Promise.reject(A)}no.set(_.auth._key(),w)}return _.bypassAuthState||no.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const A=yield w.auth._redirectUserForId(p.eventId);if(A)return w.user=A,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function fi(){return(fi=(0,d.Z)(function*(v,p){const _=On(p),w=As(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(_));return yield w._remove(_),A})).apply(this,arguments)}function Ns(v,p){return wt.apply(this,arguments)}function wt(){return(wt=(0,d.Z)(function*(v,p){return As(v)._set(On(p),"true")})).apply(this,arguments)}function Go(v,p){no.set(v._key(),p)}function As(v){return re(v._redirectPersistence)}function On(v){return fr("pendingRedirect",v.config.apiKey,v.name)}function I(){return(I=(0,d.Z)(function*(v,p,_){const w=bn(v);Ue(v,p,li);const A=to(w,_);return yield Ns(A,w),A._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v);Ue(w.auth,p,li);const A=to(w.auth,_);yield Ns(A,w.auth);const R=yield pt(w);return A._openRedirect(w.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(v,p,_){const w=(0,k.m9)(v);Ue(w.auth,p,li);const A=to(w.auth,_);yield Io(!1,w,p.providerId),yield Ns(A,w.auth);const R=yield pt(w);return A._openRedirect(w.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function dt(){return(dt=(0,d.Z)(function*(v,p){return yield bn(v)._initializationPromise,Ct(v,p,!1)})).apply(this,arguments)}function Ct(v,p){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(v,p,_=!1){const w=bn(v),A=to(w,p),Y=yield new Tl(w,A,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield w._persistUserIfCurrent(Y.user),yield w._setRedirectUser(null,p)),Y})).apply(this,arguments)}function pt(v){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(v){const p=Fo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Sl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Nl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pi(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!pi(p)){const A=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(be(this.auth,A))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fa(p))}saveEventToCache(p){this.cachedEventUids.add(Fa(p)),this.lastProcessedEventTime=Date.now()}}function Fa(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function pi({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Iu(v){return io.apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(v,p={}){return Ut(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Bi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,La=/^https?/;function Dc(){return(Dc=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Iu(v);for(const _ of p)try{if(tw(_))return}catch{}Me(v,"unauthorized-domain")})).apply(this,arguments)}function tw(v){const p=ke(),{protocol:_,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===w}if(!La.test(_))return!1;if(Bi.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const U_=new on(3e4,6e4);function Cc(){const v=Ht().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Va=null;function Tu(v){return Va=Va||function _g(v){return new Promise((p,_)=>{var w,A,R;function Y(){Cc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Cc(),_(be(v,"network-request-failed"))},timeout:U_.get()})}if(null!==(A=null===(w=Ht().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(R=Ht().gapi)||void 0===R||!R.load){const ae=eo("iframefcb");return Ht()[ae]=()=>{gapi.load?Y():_(be(v,"network-request-failed"))},ki(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Le=>_(Le))}Y()}}).catch(p=>{throw Va=null,p})}(v),Va}const Ic=new on(5e3,15e3),Ud={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Su=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yg(v){const p=v.config;W(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?kn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:le.SDK_VERSION},A=Su.get(v.config.apiHost);A&&(w.eid=A);const R=v._getFrameworks();return R.length&&(w.fw=R.join(",")),`${_}?${(0,k.xO)(w).slice(1)}`}function Nu(){return Nu=(0,d.Z)(function*(v){const p=yield Tu(v),_=Ht().gapi;return W(_,v,"internal-error"),p.open({where:document.body,url:yg(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ud,dontclear:!0},w=>new Promise(function(){var A=(0,d.Z)(function*(R,Y){yield w.restyle({setHideOnLeave:!1});const ae=be(v,"network-request-failed"),Le=Ht().setTimeout(()=>{Y(ae)},Ic.get());function Xe(){Ht().clearTimeout(Le),R(w)}w.ping(Xe).then(Xe,()=>{Y(ae)})});return function(R,Y){return A.apply(this,arguments)}}()))}),Nu.apply(this,arguments)}const Au={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wo(v,p,_,w,A,R){W(v.config.authDomain,v,"auth-domain-config-required"),W(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:le.SDK_VERSION,eventId:A};if(p instanceof li){p.setDefaultLanguage(v.languageCode),Y.providerId=p.providerId||"",(0,k.xb)(p.getCustomParameters())||(Y.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Le,Xe]of Object.entries(R||{}))Y[Le]=Xe}if(p instanceof Ks){const Le=p.getScopes().filter(Xe=>""!==Xe);Le.length>0&&(Y.scopes=Le.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ae=Y;for(const Le of Object.keys(ae))void 0===ae[Le]&&delete ae[Le];return`${function $d({config:v}){return v.emulator?kn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,k.xO)(ae).slice(1)}`}const Wd="webStorageSupport";class Al extends class Ba{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Al(p)}_finalizeEnroll(p,_,w){return function pg(v,p){return Ut(v,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(v,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Mr(v,p){return Ut(v,"POST","/v2/accounts/mfaSignIn:finalize",Zt(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let G_=(()=>{class v{constructor(){}static assertion(_){return Al._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var $_="@firebase/auth";class rw{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{var A;p((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ua(){return window}function Sc(){return(Sc=(0,d.Z)(function*(v,p,_){var w;const{BuildInfo:A}=Ua();Q(p.sessionId,"AuthEvent did not contain a session ID");const R=yield Ol(p.sessionId),Y={};return En()?Y.ibi=A.packageName:ze()?Y.apn=A.packageName:Me(v,"operation-not-supported-in-this-environment"),A.displayName&&(Y.appDisplayName=A.displayName),Y.sessionId=R,Wo(v,_,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,Y)})).apply(this,arguments)}function Os(){return(Os=(0,d.Z)(function*(v){const{BuildInfo:p}=Ua(),_={};En()?_.iosBundleId=p.packageName:ze()?_.androidPackageName=p.packageName:Me(v,"operation-not-supported-in-this-environment"),yield Iu(v,_)})).apply(this,arguments)}function Ui(){return(Ui=(0,d.Z)(function*(v,p,_){const{cordova:w}=Ua();let A=()=>{};try{yield new Promise((R,Y)=>{let ae=null;function Le(){var mt;R();const Hn=null===(mt=w.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof Hn&&Hn(),"function"==typeof _?.close&&_.close()}function Xe(){ae||(ae=window.setTimeout(()=>{Y(be(v,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Xe()}p.addPassiveListener(Le),document.addEventListener("resume",Xe,!1),ze()&&document.addEventListener("visibilitychange",vt,!1),A=()=>{p.removePassiveListener(Le),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",vt,!1),ae&&window.clearTimeout(ae)}})}finally{A()}})).apply(this,arguments)}function Ol(v){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,d.Z)(function*(v){const p=Eg(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Eg(v){if(Q(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function sw(v){(0,le._registerComponent)(new de.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:R,authDomain:Y}=w.options;return((ae,Le)=>{W(R&&!R.includes(":"),"invalid-api-key",{appName:ae.name}),W(!Y?.includes(":"),"argument-error",{appName:ae.name});const Xe={apiKey:R,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mi(v)},vt=new eu(ae,Le,Xe);return function ce(v,p){const _=p?.persistence||[],w=(Array.isArray(_)?_:[_]).map(re);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(vt,_),vt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new de.wA("auth-internal",p=>{const _=bn(p.getProvider("auth").getImmediate());return new rw(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)($_,"0.20.5",function iw(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)($_,"0.20.5","esm2017")}("Browser");class K_ extends Sl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Mu(v){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(v){const p=yield Kd()._get(Mf(v));return p&&(yield Kd()._remove(Mf(v))),p})).apply(this,arguments)}function qd(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function Kd(){return re(Js)}function Mf(v){return fr("authEvent",v.config.apiKey,v.name)}function Oc(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,k.zd)(_.join("?"))}function ja(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function Ha(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function J_(v=(0,k.z$)()){return!("file:"!==Ha()&&"ionic:"!==Ha()&&"capacitor:"!==Ha()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function X_(){try{const v=self.localStorage,p=Fo();if(v)return v.setItem(p,"1"),v.removeItem(p),!function kf(v=(0,k.z$)()){return function lw(){return(0,k.w1)()&&11===document?.documentMode}()||function uw(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return Ig()&&(0,k.hl)()}return!1}function Ig(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xl(){return(function Pf(){return"http:"===Ha()||"https:"===Ha()}()||(0,k.ru)()||J_())&&!function aw(){return(0,k.b$)()||(0,k.UG)()}()&&X_()&&!Ig()}function xu(){return J_()&&typeof document<"u"}function xc(){return(xc=(0,d.Z)(function*(){return!!xu()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Hi={LOCAL:"local",NONE:"none",SESSION:"session"},Ru=W,Yd="persistence";function Tg(v){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,d.Z)(function*(v){yield v._initializationPromise;const p=Rl(),_=fr(Yd,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function Rl(){var v;try{return(null===(v=function Ff(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Sg=W;class gi{constructor(){this.browserResolver=re(class H_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ls,this._completeRedirectFn=Ct,this._overrideRedirectResult=Go}_openPopup(p,_,w,A){var R=this;return(0,d.Z)(function*(){var Y;Q(null===(Y=R.eventManagers[p._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ae=Wo(p,_,w,ke(),A);return function Sf(v,p,_,w=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),Y=Math.max((window.screen.availWidth-w)/2,0).toString();let ae="";const Le=Object.assign(Object.assign({},Au),{width:w.toString(),height:A.toString(),top:R,left:Y}),Xe=(0,k.z$)().toLowerCase();_&&(ae=wr(Xe)?"_blank":_),yn(Xe)&&(p=p||"http://localhost",Le.scrollbars="yes");const vt=Object.entries(Le).reduce((Hn,[ds,Rc])=>`${Hn}${ds}=${Rc},`,"");if(function Ln(v=(0,k.z$)()){var p;return En(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Xe)&&"_self"!==ae)return function Nf(v,p){const _=document.createElement("a");_.href=v,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",ae),new Hd(null);const mt=window.open(p||"",ae,vt);W(mt,v,"popup-blocked");try{mt.focus()}catch{}return new Hd(mt)}(p,ae,Fo())})()}_openRedirect(p,_,w,A){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(p),function st(v){Ht().location.href=v}(Wo(p,_,w,ke(),A)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:A,promise:R}=this.eventManagers[_];return A?Promise.resolve(A):(Q(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const w=yield function jd(v){return Nu.apply(this,arguments)}(p),A=new Sl(p);return w.register("authEvent",R=>(W(R?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:A},_.iframes[p._key()]=w,A})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Wd,{type:Wd},A=>{var R;const Y=null===(R=A?.[0])||void 0===R?void 0:R[Wd];void 0!==Y&&_(!!Y),Me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function $o(v){return Dc.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return vn()||Kn()||En()}}),this.cordovaResolver=re(class Mc{constructor(){this._redirectPersistence=ls,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ct,this._overrideRedirectResult=Go}_initialize(p){var _=this;return(0,d.Z)(function*(){const w=p._key();let A=_.eventManagers.get(w);return A||(A=new K_(p),_.eventManagers.set(w,A),_.attachCallbackListeners(p,A)),A})()}_openPopup(p){Me(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,w,A){var R=this;return(0,d.Z)(function*(){!function Nc(v){var p,_,w,A,R,Y,ae,Le,Xe,vt;const mt=Ua();W("function"==typeof(null===(p=mt?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(typeof(null===(_=mt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W("function"==typeof(null===(R=null===(A=null===(w=mt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(Le=null===(ae=null===(Y=mt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Le?void 0:Le.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(vt=null===(Xe=mt?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===vt?void 0:vt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Y=yield R._initialize(p);yield Y.initialized(),Y.resetRedirect(),function ro(){no.clear()}(),yield R._originValidation(p);const ae=function Dg(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:qd(),postBody:null,tenantId:v.tenantId,error:be(v,"no-auth-event")}}(p,w,A);yield function zd(v,p){return Kd()._set(Mf(v),p)}(p,ae);const Le=yield function bg(v,p,_){return Sc.apply(this,arguments)}(p,ae,_),Xe=yield function zo(v){const{cordova:p}=Ua();return new Promise(_=>{p.plugins.browsertab.isAvailable(w=>{let A=null;w?p.plugins.browsertab.openUrl(v):A=p.InAppBrowser.open(v,function ua(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(Le);return function Af(v,p,_){return Ui.apply(this,arguments)}(p,Y,Xe)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function wg(v){return Os.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:w,handleOpenURL:A,BuildInfo:R}=Ua(),Y=setTimeout((0,d.Z)(function*(){yield Mu(p),_.onEvent(ja())}),500),ae=function(){var vt=(0,d.Z)(function*(mt){clearTimeout(Y);const Hn=yield Mu(p);let ds=null;Hn&&mt?.url&&(ds=function ow(v,p){var _,w;const A=function Cg(v){const p=Oc(v),_=p.link?decodeURIComponent(p.link):void 0,w=Oc(_).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Oc(A).link||A||w||_||v}(p);if(A.includes("/__/auth/callback")){const R=Oc(A),Y=R.firebaseError?function xf(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(w=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Le=ae?be(ae):null;return Le?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Hn,mt.url)),_.onEvent(ds||ja())});return function(Hn){return vt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ae);const Le=A,Xe=`${R.packageName.toLowerCase()}://`;Ua().handleOpenURL=function(){var vt=(0,d.Z)(function*(mt){if(mt.toLowerCase().startsWith(Xe)&&ae({url:mt}),"function"==typeof Le)try{Le(mt)}catch(Hn){console.error(Hn)}});return function(mt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ls,this._completeRedirectFn=Ct,this._overrideRedirectResult=Go}_initialize(p){var _=this;return(0,d.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,w,A){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(p,_,w,A)})()}_openRedirect(p,_,w,A){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(p,_,w,A)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return xu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const _=yield function ji(){return xc.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Fu(v){return v.unwrap()}function Qd(v){return Jd(v)}function Jd(v){const{_tokenResponse:p}=v instanceof k.ZR?v.customData:v;if(!p)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Ts.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=pl;break;case"facebook.com":w=uc;break;case"github.com":w=gl;break;case"twitter.com":w=iu;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:Y,pendingToken:ae,nonce:Le}=p;return R||Y||A||ae?ae?_.startsWith("saml.")?ga._create(_,ae):vs._fromParams({providerId:_,signInMethod:_,pendingToken:ae,idToken:A,accessToken:R}):new pa(_).credential({idToken:A,accessToken:R,rawNonce:Le}):null}return v instanceof k.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function kr(v,p){return p.catch(_=>{throw _ instanceof k.ZR&&function ey(v,p){var _,w;const A=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=p)||void 0===w?void 0:w.code))p.resolver=new Ng(v,function sr(v,p){var _;const w=(0,k.m9)(v),A=p;return W(p.customData.operationType,w,"argument-error"),W(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Ro._fromError(w,A)}(v,p));else if(A){const R=Jd(p),Y=p;R&&(Y.credential=R,Y.tenantId=A.tenantId||void 0,Y.email=A.email||void 0,Y.phoneNumber=A.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Qd(_),additionalUserInfo:pf(_),user:Ko.getOrCreate(A)}})}function qo(v,p){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,d.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:w=>kr(v,_.confirm(w))}})).apply(this,arguments)}class Ng{constructor(p,_){this.resolver=_,this.auth=function Pl(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return kr(Fu(this.auth),this.resolver.resolveSignIn(p))}}class Ko{constructor(p){this._delegate=p,this.multiFactor=function _f(v){const p=(0,k.m9)(v);return Po.has(p)||Po.set(p,mf._fromUser(p)),Po.get(p)}(p)}static getOrCreate(p){return Ko.USER_MAP.has(p)||Ko.USER_MAP.set(p,new Ko(p)),Ko.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,d.Z)(function*(){return kr(_.auth,cc(_._delegate,p))})()}linkWithPhoneNumber(p,_){var w=this;return(0,d.Z)(function*(){return qo(w.auth,function Rr(v,p,_){return Pa.apply(this,arguments)}(w._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,d.Z)(function*(){return kr(_.auth,function wc(v,p,_){return Ho.apply(this,arguments)}(_._delegate,p,gi))})()}linkWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Tg(bn(_.auth)),function X(v,p,_){return function oe(v,p,_){return Se.apply(this,arguments)}(v,p,_)}(_._delegate,p,gi)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,d.Z)(function*(){return kr(_.auth,lu(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return qo(this.auth,function Cl(v,p,_){return Bo.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return kr(this.auth,function mg(v,p,_){return Fd.apply(this,arguments)}(this._delegate,p,gi))}reauthenticateWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Tg(bn(_.auth)),function S(v,p,_){return function M(v,p,_){return B.apply(this,arguments)}(v,p,_)}(_._delegate,p,gi)})()}sendEmailVerification(p){return function bl(v,p){return fc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,d.Z)(function*(){return yield function ou(v,p){return Co.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function gu(v,p){return mu((0,k.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function gc(v,p){return mu((0,k.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Ft(v,p){return kd.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function fu(v,p){return pu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Ia(v,p,_){return wl.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ko.USER_MAP=new WeakMap;const Ga=W;let $a=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;Ga(A,"invalid-api-key",{appName:_.name}),Ga(A,"invalid-api-key",{appName:_.name});const R=typeof window<"u"?gi:void 0;this._delegate=w.initialize({options:{persistence:ty(A,_.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function wo(v,p,_){const w=bn(v);W(w._canInitEmulator,w,"emulator-config-failed"),W(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const A=!!_?.disableWarnings,R=Zn(p),{host:Y,port:ae}=function da(v){const p=Zn(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const R=A[1];return{host:R,port:ys(w.substr(R.length+1))}}{const[R,Y]=w.split(":");return{host:R,port:ys(Y)}}}(p);w.config.emulator={url:`${R}//${Y}${null===ae?"":`:${ae}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Y,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function jr(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function vl(v,p){return ba.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return wa(this._delegate,_)}confirmPasswordReset(_,w){return function Ao(v,p,_){return ci.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var A=this;return(0,d.Z)(function*(){return kr(A._delegate,function ir(v,p,_){return xi.apply(this,arguments)}(A._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Ca(v,p){return du.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Id(v,p){return"EMAIL_SIGNIN"===ru.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,d.Z)(function*(){Ga(xl(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function He(v,p){return dt.apply(this,arguments)}(_._delegate,gi);return w?kr(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Zd(v,p){bn(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,w,A){const{next:R,error:Y,complete:ae}=kl(_,w,A);return this._delegate.onAuthStateChanged(R,Y,ae)}onIdTokenChanged(_,w,A){const{next:R,error:Y,complete:ae}=kl(_,w,A);return this._delegate.onIdTokenChanged(R,Y,ae)}sendSignInLinkToEmail(_,w){return function Oo(v,p,_){return Ri.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Dn(v,p,_){return va.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,d.Z)(function*(){let A;switch(function Pu(v,p){Ru(Object.values(Hi).includes(p),v,"invalid-persistence-type"),(0,k.b$)()?Ru(p!==Hi.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?Ru(p===Hi.NONE,v,"unsupported-persistence-type"):Ig()?Ru(p===Hi.NONE||p===Hi.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):Ru(p===Hi.NONE||X_(),v,"unsupported-persistence-type")}(w._delegate,_),_){case Hi.SESSION:A=ls;break;case Hi.LOCAL:A=(yield re(Vo)._isAvailable())?Vo:Js;break;case Hi.NONE:A=Yt;break;default:return Me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return kr(this._delegate,function Nn(v){return Dd.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return kr(this._delegate,nt(this._delegate,_))}signInWithCustomToken(_){return kr(this._delegate,function uu(v,p){return Te.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return kr(this._delegate,function hc(v,p,_){return nt((0,k.m9)(v),lc.credential(p,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return kr(this._delegate,function Td(v,p,_){return Ea.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return qo(this._delegate,function Is(v,p,_){return Cr.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,d.Z)(function*(){return Ga(xl(),w._delegate,"operation-not-supported-in-this-environment"),kr(w._delegate,function Li(v,p,_){return jo.apply(this,arguments)}(w._delegate,_,gi))})()}signInWithRedirect(_){var w=this;return(0,d.Z)(function*(){return Ga(xl(),w._delegate,"operation-not-supported-in-this-environment"),yield Tg(w._delegate),function Ec(v,p,_){return function Bd(v,p,_){return I.apply(this,arguments)}(v,p,_)}(w._delegate,_,gi)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function cf(v,p){return Qs.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Hi,v})();function kl(v,p,_){let w=v;"function"!=typeof v&&({next:w,error:p,complete:_}=v);const A=w;return{next:Y=>A(Y&&Ko.getOrCreate(Y)),error:p,complete:_}}function ty(v,p){const _=function ku(v,p){const _=Rl();if(!_)return[];const w=fr(Yd,v,p);switch(_.getItem(w)){case Hi.NONE:return[Yt];case Hi.LOCAL:return[Vo,ls];case Hi.SESSION:return[ls];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes(Vo)&&_.push(Vo),typeof window<"u")for(const w of[Js,ls])_.includes(w)||_.push(w);return _.includes(Yt)||_.push(Yt),_}class Vf{constructor(){this.providerId="phone",this._delegate=new Ts(Fu(te.Z.auth()))}static credential(p,_){return Ts.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Vf.PHONE_SIGN_IN_METHOD=Ts.PHONE_SIGN_IN_METHOD,Vf.PROVIDER_ID=Ts.PROVIDER_ID;const ny=W;class ry{constructor(p,_,w=te.Z.app()){var A;ny(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new cs(p,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function iy(v){v.INTERNAL.registerComponent(new de.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new $a(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lc,FacebookAuthProvider:uc,GithubAuthProvider:gl,GoogleAuthProvider:pl,OAuthProvider:pa,SAMLAuthProvider:mn,PhoneAuthProvider:Vf,PhoneMultiFactorGenerator:G_,RecaptchaVerifier:ry,TwitterAuthProvider:iu,Auth:$a,AuthCredential:oi,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},2090:(ct,Ne,F)=>{F.d(Ne,{$s:()=>nr,BH:()=>Be,DV:()=>Zt,Dv:()=>os,G6:()=>je,GJ:()=>Xt,L:()=>fe,LL:()=>ce,Mn:()=>Ie,Pz:()=>Bt,Sg:()=>Oe,UG:()=>ve,UI:()=>rs,US:()=>pe,Wj:()=>ii,Yr:()=>Ue,ZB:()=>$,ZR:()=>ye,b$:()=>at,cI:()=>$t,d:()=>Me,dS:()=>Wt,eu:()=>we,g5:()=>k,gK:()=>Tn,gQ:()=>Ai,h$:()=>de,hl:()=>W,hu:()=>te,jU:()=>_e,lb:()=>bo,m9:()=>Qr,ne:()=>_t,p$:()=>G,pd:()=>Zr,r3:()=>Vr,ru:()=>Je,tV:()=>me,uI:()=>it,ug:()=>$e,vZ:()=>ri,w1:()=>be,w9:()=>un,xO:()=>is,xb:()=>Ut,z$:()=>De,zI:()=>Q,zd:()=>Hs});const te=function(j,z){if(!j)throw k(z)},k=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},le=function(j){const z=[];let U=0;for(let q=0;q<j.length;q++){let K=j.charCodeAt(q);K<128?z[U++]=K:K<2048?(z[U++]=K>>6|192,z[U++]=63&K|128):55296==(64512&K)&&q+1<j.length&&56320==(64512&j.charCodeAt(q+1))?(K=65536+((1023&K)<<10)+(1023&j.charCodeAt(++q)),z[U++]=K>>18|240,z[U++]=K>>12&63|128,z[U++]=K>>6&63|128,z[U++]=63&K|128):(z[U++]=K>>12|224,z[U++]=K>>6&63|128,z[U++]=63&K|128)}return z},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,z){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let K=0;K<j.length;K+=3){const Ae=j[K],We=K+1<j.length,ft=We?j[K+1]:0,fn=K+2<j.length,Yt=fn?j[K+2]:0;let xt=(15&ft)<<2|Yt>>6,yn=63&Yt;fn||(yn=64,We||(xt=64)),q.push(U[Ae>>2],U[(3&Ae)<<4|ft>>4],U[xt],U[yn])}return q.join("")},encodeString(j,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(j):this.encodeByteArray(le(j),z)},decodeString(j,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(j):function(j){const z=[];let U=0,q=0;for(;U<j.length;){const K=j[U++];if(K<128)z[q++]=String.fromCharCode(K);else if(K>191&&K<224){const Ae=j[U++];z[q++]=String.fromCharCode((31&K)<<6|63&Ae)}else if(K>239&&K<365){const fn=((7&K)<<18|(63&j[U++])<<12|(63&j[U++])<<6|63&j[U++])-65536;z[q++]=String.fromCharCode(55296+(fn>>10)),z[q++]=String.fromCharCode(56320+(1023&fn))}else{const Ae=j[U++],We=j[U++];z[q++]=String.fromCharCode((15&K)<<12|(63&Ae)<<6|63&We)}}return z.join("")}(this.decodeStringToByteArray(j,z))},decodeStringToByteArray(j,z){this.init_();const U=z?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let K=0;K<j.length;){const Ae=U[j.charAt(K++)],ft=K<j.length?U[j.charAt(K)]:0;++K;const Yt=K<j.length?U[j.charAt(K)]:64;++K;const Lt=K<j.length?U[j.charAt(K)]:64;if(++K,null==Ae||null==ft||null==Yt||null==Lt)throw Error();q.push(Ae<<2|ft>>4),64!==Yt&&(q.push(ft<<4&240|Yt>>2),64!==Lt&&q.push(Yt<<6&192|Lt))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){const z=le(j);return pe.encodeByteArray(z,!0)},fe=function(j){return de(j).replace(/\./g,"")},me=function(j){try{return pe.decodeString(j,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function G(j){return $(void 0,j)}function $(j,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return z}for(const U in z)!z.hasOwnProperty(U)||!J(U)||(j[U]=$(j[U],z[U]));return j}function J(j){return"__proto__"!==j}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,U)=>{this.resolve=z,this.reject=U})}wrapCallback(z){return(U,q)=>{U?this.reject(U):this.resolve(q),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(U):z(U,q))}}}function Oe(j,z){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=z||"demo-project",K=j.iat||0,Ae=j.sub||j.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:K,exp:K+3600,auth_time:K,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},j);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(We)),""].join(".")}function De(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function Je(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function at(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return De().indexOf("Electron/")>=0}function be(){const j=De();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return De().indexOf("MSAppHost/")>=0}function Ue(){return!1}function je(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function we(){return new Promise((j,z)=>{try{let U=!0;const q="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(q);K.onsuccess=()=>{K.result.close(),U||self.indexedDB.deleteDatabase(q),j(!0)},K.onupgradeneeded=()=>{U=!1},K.onerror=()=>{var Ae;z((null===(Ae=K.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(U){z(U)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ye extends Error{constructor(z,U,q){super(U),this.code=z,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(z,U,q){this.service=z,this.serviceName=U,this.errors=q}create(z,...U){const q=U[0]||{},K=`${this.service}/${z}`,Ae=this.errors[z],We=Ae?function ke(j,z){return j.replace(gt,(U,q)=>{const K=z[q];return null!=K?String(K):`<${q}?>`})}(Ae,q):"Error";return new ye(K,`${this.serviceName}: ${We} (${K}).`,q)}}const gt=/\{\$([^}]+)}/g;function $t(j){return JSON.parse(j)}function Bt(j){return JSON.stringify(j)}const qe=function(j){let z={},U={},q={},K="";try{const Ae=j.split(".");z=$t(me(Ae[0])||""),U=$t(me(Ae[1])||""),K=Ae[2],q=U.d||{},delete U.d}catch{}return{header:z,claims:U,data:q,signature:K}},un=function(j){const U=qe(j).claims;return!!U&&"object"==typeof U&&U.hasOwnProperty("iat")},Xt=function(j){const z=qe(j).claims;return"object"==typeof z&&!0===z.admin};function Vr(j,z){return Object.prototype.hasOwnProperty.call(j,z)}function Zt(j,z){if(Object.prototype.hasOwnProperty.call(j,z))return j[z]}function Ut(j){for(const z in j)if(Object.prototype.hasOwnProperty.call(j,z))return!1;return!0}function rs(j,z,U){const q={};for(const K in j)Object.prototype.hasOwnProperty.call(j,K)&&(q[K]=z.call(U,j[K],K,j));return q}function ri(j,z){if(j===z)return!0;const U=Object.keys(j),q=Object.keys(z);for(const K of U){if(!q.includes(K))return!1;const Ae=j[K],We=z[K];if(Or(Ae)&&Or(We)){if(!ri(Ae,We))return!1}else if(Ae!==We)return!1}for(const K of q)if(!U.includes(K))return!1;return!0}function Or(j){return null!==j&&"object"==typeof j}function is(j){const z=[];for(const[U,q]of Object.entries(j))Array.isArray(q)?q.forEach(K=>{z.push(encodeURIComponent(U)+"="+encodeURIComponent(K))}):z.push(encodeURIComponent(U)+"="+encodeURIComponent(q));return z.length?"&"+z.join("&"):""}function Hs(j){const z={};return j.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[K,Ae]=q.split("=");z[decodeURIComponent(K)]=decodeURIComponent(Ae)}}),z}function Zr(j){const z=j.indexOf("?");if(!z)return"";const U=j.indexOf("#",z);return j.substring(z,U>0?U:void 0)}class Ai{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,U){U||(U=0);const q=this.W_;if("string"==typeof z)for(let Lt=0;Lt<16;Lt++)q[Lt]=z.charCodeAt(U)<<24|z.charCodeAt(U+1)<<16|z.charCodeAt(U+2)<<8|z.charCodeAt(U+3),U+=4;else for(let Lt=0;Lt<16;Lt++)q[Lt]=z[U]<<24|z[U+1]<<16|z[U+2]<<8|z[U+3],U+=4;for(let Lt=16;Lt<80;Lt++){const xt=q[Lt-3]^q[Lt-8]^q[Lt-14]^q[Lt-16];q[Lt]=4294967295&(xt<<1|xt>>>31)}let Yt,fr,K=this.chain_[0],Ae=this.chain_[1],We=this.chain_[2],ft=this.chain_[3],fn=this.chain_[4];for(let Lt=0;Lt<80;Lt++){Lt<40?Lt<20?(Yt=ft^Ae&(We^ft),fr=1518500249):(Yt=Ae^We^ft,fr=1859775393):Lt<60?(Yt=Ae&We|ft&(Ae|We),fr=2400959708):(Yt=Ae^We^ft,fr=3395469782);const xt=(K<<5|K>>>27)+Yt+fn+fr+q[Lt]&4294967295;fn=ft,ft=We,We=4294967295&(Ae<<30|Ae>>>2),Ae=K,K=xt}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Ae&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+ft&4294967295,this.chain_[4]=this.chain_[4]+fn&4294967295}update(z,U){if(null==z)return;void 0===U&&(U=z.length);const q=U-this.blockSize;let K=0;const Ae=this.buf_;let We=this.inbuf_;for(;K<U;){if(0===We)for(;K<=q;)this.compress_(z,K),K+=this.blockSize;if("string"==typeof z){for(;K<U;)if(Ae[We]=z.charCodeAt(K),++We,++K,We===this.blockSize){this.compress_(Ae),We=0;break}}else for(;K<U;)if(Ae[We]=z[K],++We,++K,We===this.blockSize){this.compress_(Ae),We=0;break}}this.inbuf_=We,this.total_+=U}digest(){const z=[];let U=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&U,U/=256;this.compress_(this.buf_);let q=0;for(let K=0;K<5;K++)for(let Ae=24;Ae>=0;Ae-=8)z[q]=this.chain_[K]>>Ae&255,++q;return z}}function _t(j,z){const U=new Yr(j,z);return U.subscribe.bind(U)}class Yr{constructor(z,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{z(this)}).catch(q=>{this.error(q)})}next(z){this.forEachObserver(U=>{U.next(z)})}error(z){this.forEachObserver(U=>{U.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,U,q){let K;if(void 0===z&&void 0===U&&void 0===q)throw new Error("Missing Observer.");K=function wn(j,z){if("object"!=typeof j||null===j)return!1;for(const U of z)if(U in j&&"function"==typeof j[U])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:U,complete:q},void 0===K.next&&(K.next=ss),void 0===K.error&&(K.error=ss),void 0===K.complete&&(K.complete=ss);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ae}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,z)}sendOne(z,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{U(this.observers[z])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ss(){}const os=function(j,z,U,q){let K;if(q<z?K="at least "+z:q>U&&(K=0===U?"none":"no more than "+U),K)throw new Error(j+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+K+".")};function Tn(j,z){return`${j} failed: ${z} argument `}function ii(j,z,U,q){if((!q||U)&&"function"!=typeof U)throw new Error(Tn(j,z)+"must be a valid function.")}function bo(j,z,U,q){if((!q||U)&&("object"!=typeof U||null===U))throw new Error(Tn(j,z)+"must be a valid context object.")}const Wt=function(j){const z=[];let U=0;for(let q=0;q<j.length;q++){let K=j.charCodeAt(q);if(K>=55296&&K<=56319){const Ae=K-55296;q++,te(q<j.length,"Surrogate pair missing trail surrogate."),K=65536+(Ae<<10)+(j.charCodeAt(q)-56320)}K<128?z[U++]=K:K<2048?(z[U++]=K>>6|192,z[U++]=63&K|128):K<65536?(z[U++]=K>>12|224,z[U++]=K>>6&63|128,z[U++]=63&K|128):(z[U++]=K>>18|240,z[U++]=K>>12&63|128,z[U++]=K>>6&63|128,z[U++]=63&K|128)}return z},$e=function(j){let z=0;for(let U=0;U<j.length;U++){const q=j.charCodeAt(U);q<128?z++:q<2048?z+=2:q>=55296&&q<=56319?(z+=4,U++):z+=3}return z};function nr(j,z=1e3,U=2){const q=z*Math.pow(U,j),K=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+K)}function Qr(j){return j&&j._delegate?j._delegate:j}},2608:(ct,Ne,F)=>{var d=F(4650);let te=null;function k(){return te}const de=new d.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function me(){return(0,d.LFG)($)}()},providedIn:"platform"}),n})();const G=new d.OlP("Location Initialized");let $=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Be(){return new $((0,d.LFG)(de))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function _e(){const n=(0,d.LFG)(de).location;return new at((0,d.LFG)(fe),n&&n.origin||"")}()},providedIn:"root"}),n})();const Je=new d.OlP("appBaseHref");let at=(()=>{class n extends ve{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+it(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+it(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(Je,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+it(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+it(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(Je,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=Oe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ie(){return new be((0,d.LFG)(ve))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let rr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Ed(n){return"server"===n}let _l=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Yn((0,d.LFG)(de),window)}),n})();class Yn{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Co(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ou(this.window.history)||ou(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ou(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ws extends class Io extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){te||(te=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ui(){return ma=ma||document.querySelector("base"),ma?ma.getAttribute("href"):null}();return null==t?null:function yl(n){Ys=Ys||document.createElement("a"),Ys.setAttribute("href",n);const e=Ys.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ma=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _d(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ys,ma=null;const nt=new d.OlP("TRANSITION_ID"),cc=[{provide:d.ip1,useFactory:function au(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[nt,de,d.zs3],multi:!0}];let lu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const To=new d.OlP("EventManagerPlugins");let So=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(To),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class _a{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let uu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends uu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Pt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Pt))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Pt(n){k().remove(n)}const ya={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},No=/%COMP%/g;function wa(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wa(n,i,t):(i=i.replace(No,n),t.push(i))}return t}function cu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qs=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ir(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ri(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Id(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=wa(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(So),d.LFG(Te),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ir{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ya[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Oo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Oo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ya[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ya[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,cu(r)):this.eventManager.addEventListener(e,t,cu(r))}}function Oo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ri extends ir{constructor(e,t,r,i){super(e),this.component=r;const a=wa(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function vl(n){return"_ngcontent-%COMP%".replace(No,n)}(i+"-"+r.id),this.hostAttr=function ba(n){return"_nghost-%COMP%".replace(No,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Id extends ir{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=wa(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const h=document.createElement("style");h.textContent=a[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Td=(()=>{class n extends _a{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ea=["alt","control","meta","shift"],Da={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ca={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},du={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bl=(()=>{class n extends _a{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(Ea.forEach(m=>{const y=r.indexOf(m);y>-1&&(r.splice(y,1),u+=m+".")}),u+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function fc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ca.hasOwnProperty(e)&&(e=Ca[e]))}return Da[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ea.forEach(a=>{a!=i&&(0,du[a])(t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function hu(){ws.makeCurrent()},multi:!0},{provide:de,useFactory:function pu(){return(0,d.RDi)(document),document},deps:[]}]),mu=new d.OlP(""),Qn=[{provide:d.rWj,useClass:class dc{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const h=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Es=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function fu(){return new d.qLn},deps:[]},{provide:To,useClass:Td,multi:!0,deps:[de,d.R0b,d.Lbi]},{provide:To,useClass:bl,multi:!0,deps:[de]},{provide:Qs,useClass:Qs,deps:[So,Te,d.AFp]},{provide:d.FYo,useExisting:Qs},{provide:uu,useExisting:Te},{provide:Te,useClass:Te,deps:[de]},{provide:So,useClass:So,deps:[To,d.R0b]},{provide:class pr{},useClass:lu,deps:[]},[]];let dn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:nt,useExisting:d.AFp},cc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mu,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Es,...Qn],imports:[rr,d.hGG]}),n})(),_u=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ff(){return new _u((0,d.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const Fo_firebase={apiKey:"AIzaSyBkwQ7XgewyCoAVqPlhMxg39ht_3EIHai0",authDomain:"organic-shop-27de3.firebaseapp.com",projectId:"organic-shop-27de3",storageBucket:"organic-shop-27de3.appspot.com",messagingSenderId:"904701316222",appId:"1:904701316222:web:9ced4b6bfabecf21625c2f",measurementId:"G-G53QD4VVRT"};var hn=F(8996),Ht=F(3269);function st(...n){const e=(0,Ht.yG)(n);return(0,hn.D)(n,e)}var rn=F(7579);class Cn extends rn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Bn=F(9751);const{isArray:wu}=Array,{getPrototypeOf:Eu,prototype:Du,keys:xd}=Object;var ei=F(4671),ot=F(4004);const{isArray:Na}=Array;function Aa(n){return(0,ot.U)(e=>function Lo(n,e){return Na(e)?n(...e):n(e)}(n,e))}var pn=F(5403),us=F(9672);function Oa(...n){const e=(0,Ht.yG)(n),t=(0,Ht.jO)(n),{args:r,keys:i}=function Xs(n){if(1===n.length){const e=n[0];if(wu(e))return{args:e,keys:null};if(function _c(n){return n&&"object"==typeof n&&Eu(n)===Du}(e)){const t=xd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,hn.D)([],e);const a=new Bn.y(function yc(n,e,t=ei.y){return r=>{Cu(e,()=>{const{length:i}=n,a=new Array(i);let u=i,h=i;for(let m=0;m<i;m++)Cu(e,()=>{const y=(0,hn.D)(n[m],e);let D=!1;y.subscribe((0,pn.x)(r,T=>{a[m]=T,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>function Dl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,u):ei.y));return t?a.pipe(Aa(t)):a}function Cu(n,e,t){n?(0,us.f)(t,n,e):e()}var Ma=F(8189);function Ds(...n){return function Vo(){return(0,Ma.J)(1)}()((0,hn.D)(n,(0,Ht.yG)(n)))}var Mr=F(8421);function xr(n){return new Bn.y(e=>{(0,Mr.Xf)(n()).subscribe(e)})}var Cs=F(9635),di=F(576);function ki(n,e){const t=(0,di.m)(n)?n:()=>n,r=i=>i.error(t());return new Bn.y(e?i=>e.schedule(r,0,i):r)}const xa=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var gr=F(515),zt=F(727),or=F(4482);function Rd(){return(0,or.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Df extends Bn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.w0.EMPTY)}return e}refCount(){return Rd()(this)}}function An(n,e){return(0,or.e)((t,r)=>{let i=null,a=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,pn.x)(r,m=>{i?.unsubscribe();let y=0;const D=a++;(0,Mr.Xf)(n(m,D)).subscribe(i=(0,pn.x)(r,T=>r.next(e?e(m,T,D,y++):T),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function Dr(n){return n<=0?()=>gr.E:(0,or.e)((e,t)=>{let r=0;e.subscribe((0,pn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ra(...n){const e=(0,Ht.yG)(n);return(0,or.e)((t,r)=>{(e?Ds(n,t,e):Ds(n,t)).subscribe(r)})}function Jn(n,e){return(0,or.e)((t,r)=>{let i=0;t.subscribe((0,pn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Un=F(5577);function Pd(n){return(0,or.e)((e,t)=>{let r=!1;e.subscribe((0,pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Cf(n=ar){return(0,or.e)((e,t)=>{let r=!1;e.subscribe((0,pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ar(){return new xa}function cs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Jn((i,a)=>n(i,a,r)):ei.y,Dr(1),t?Pd(e):Cf(()=>new xa))}function Fi(n,e){return(0,di.m)(e)?(0,Un.z)(n,e,1):(0,Un.z)(n,1)}var lr=F(8505);function Is(n){return(0,or.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,pn.x)(t,void 0,void 0,u=>{a=(0,Mr.Xf)(n(u,Is(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Cr(n,e,t,r,i){return(a,u)=>{let h=t,m=e,y=0;a.subscribe((0,pn.x)(u,D=>{const T=y++;m=h?n(m,D,T):(h=!0,D),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}function Rr(n,e){return(0,or.e)(Cr(n,e,arguments.length>=2,!0))}function Pa(n){return n<=0?()=>gr.E:(0,or.e)((e,t)=>{let r=[];e.subscribe((0,pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Cl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Jn((i,a)=>n(i,a,r)):ei.y,Pa(1),t?Pd(e):Cf(()=>new xa))}function ka(n){return(0,ot.U)(()=>n)}function Il(n){return(0,or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ft="primary";class kd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ts(n){return new kd(n)}function to(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],h=n[a];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ss(n[i],e[i]))return!1;return!0}function Ss(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function vc(n){return Array.prototype.concat.apply([],n)}function Uo(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Li(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,hn.D)(Promise.resolve(n)):st(n)}const Fd={exact:function Vi(n,e,t){if(!As(n.segments,e.segments)||!fi(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Vi(n.children[r],e.children[r],t))return!1;return!0},subset:Tl},wc={exact:function Ld(n,e){return hi(n,e)},subset:function no(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ss(n[t],e[t]))},ignored:()=>!0};function Ho(n,e,t){return Fd[t.paths](n.root,e.root,t.matrixParams)&&wc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Tl(n,e,t){return Vd(n,e,e.segments,t)}function Vd(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!As(i,t)||e.hasChildren()||!fi(i,t,r))}if(n.segments.length===t.length){if(!As(n.segments,t)||!fi(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Tl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(As(n.segments,i)&&fi(n.segments,i,r)&&n.children[Ft])&&Vd(n.children[Ft],e,a,r)}}function fi(n,e,t){return e.every((r,i)=>wc[t](n[i].parameters,r.parameters))}class Ns{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ts(this.queryParams)),this._queryParamMap}toString(){return I.serialize(this)}}class wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return S(this)}}class ro{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ts(this.parameters)),this._parameterMap}toString(){return Ct(this)}}function As(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ec{}class Bd{parse(e){const t=new Iu(e);return new Ns(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${M(e.root,!0)}`,r=function pt(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${X(t)}=${X(i)}`).join("&"):`${X(t)}=${X(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function oe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const I=new Bd;function S(n){return n.segments.map(e=>Ct(e)).join("/")}function M(n,e){if(!n.hasChildren())return S(n);if(e){const t=n.children[Ft]?M(n.children[Ft],!1):"",r=[];return Xn(n.children,(i,a)=>{a!==Ft&&r.push(`${a}:${M(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function On(n,e){let t=[];return Xn(n.children,(r,i)=>{i===Ft&&(t=t.concat(e(r,i)))}),Xn(n.children,(r,i)=>{i!==Ft&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ft?[M(n.children[Ft],!1)]:[`${i}:${M(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${S(n)}/${t[0]}`:`${S(n)}/(${t.join("//")})`}}function B(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function X(n){return B(n).replace(/%3B/gi,";")}function Se(n){return B(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function He(n){return decodeURIComponent(n)}function dt(n){return He(n.replace(/\+/g,"%20"))}function Ct(n){return`${Se(n.path)}${function Nt(n){return Object.keys(n).map(e=>`;${Se(e)}=${Se(n[e])}`).join("")}(n.parameters)}`}const Mn=/^[^\/()?;=#]+/;function mr(n){const e=n.match(Mn);return e?e[0]:""}const Sl=/^[^=?&#]+/,pi=/^[^&#]+/;class Iu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new wt(e,t)),r}parseSegment(){const e=mr(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new ro(He(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mr(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=mr(this.remaining);i&&(r=i,this.capture(r))}e[He(t)]=He(r)}parseQueryParam(e){const t=function Fa(n){const e=n.match(Sl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Nl(n){const e=n.match(pi);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=dt(t),a=dt(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mr(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ft);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Ft]:new wt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function io(n){return n.segments.length>0?new wt([],{[Ft]:n}):n}function Bi(n){const e={};for(const r of Object.keys(n.children)){const a=Bi(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function La(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new wt(n.segments.concat(e.segments),e.children)}return n}(new wt(n.segments,e))}function $o(n){return n instanceof Ns}function _g(n,e,t,r,i){if(0===t.length)return Ic(e.root,e.root,e.root,r,i);const a=function Ud(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new j_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Xn(a.outlets,(m,y)=>{h[y]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new j_(t,e,r)}(t);return a.toRoot()?Ic(e.root,e.root,new wt([],{}),r,i):function u(m){const y=function jd(n,e,t,r){if(n.isAbsolute)return new Su(e.root,!0,0);if(-1===r)return new Su(t,t===e.root,0);return function Nu(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Su(r,!1,i-a)}(t,r+(Va(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),D=y.processChildren?Tc(y.segmentGroup,y.index,a.commands):Tf(y.segmentGroup,y.index,a.commands);return Ic(e.root,y.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function Va(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Tu(n){return"object"==typeof n&&null!=n&&n.outlets}function Ic(n,e,t,r,i){let u,a={};r&&Xn(r,(m,y)=>{a[y]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),u=n===e?t:If(n,e,t);const h=io(Bi(u));return new Ns(h,a,i)}function If(n,e,t){const r={};return Xn(n.children,(i,a)=>{r[a]=i===e?t:If(i,e,t)}),new wt(n.segments,r)}class j_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Va(r[0]))throw new d.vHH(4003,!1);const i=r.find(Tu);if(i&&i!==Uo(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Su{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Tf(n,e,t){if(n||(n=new wt([],{})),0===n.segments.length&&n.hasChildren())return Tc(n,e,t);const r=function nw(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],h=t[r];if(Tu(h))break;const m=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!Nf(m,y,u))return a;r+=2}else{if(!Nf(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new wt(n.segments.slice(0,r.pathIndex),{});return a.children[Ft]=new wt(n.segments.slice(r.pathIndex),n.children),Tc(a,0,i)}return r.match&&0===i.length?new wt(n.segments,{}):r.match&&!n.hasChildren()?Ou(n,e,t):r.match?Tc(n,0,i):Ou(n,e,t)}function Tc(n,e,t){if(0===t.length)return new wt(n.segments,{});{const r=function Au(n){return Tu(n[0])?n[0].outlets:{[Ft]:n}}(t),i={};return Xn(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Tf(n.children[u],e,a))}),Xn(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new wt(n.segments,i)}}function Ou(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Tu(a)){const m=Hd(a.outlets);return new wt(r,m)}if(0===i&&Va(t[0])){r.push(new ro(n.segments[e].path,Sf(t[0]))),i++;continue}const u=Tu(a)?a.outlets[Ft]:`${a}`,h=i<t.length-1?t[i+1]:null;u&&h&&Va(h)?(r.push(new ro(u,Sf(h))),i+=2):(r.push(new ro(u,{})),i++)}return new wt(r,{})}function Hd(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ou(new wt([],{}),0,t))}),e}function Sf(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function Nf(n,e,t){return n==t.path&&hi(e,t.parameters)}class so{constructor(e,t){this.id=e,this.url=t}}class Gd extends so{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wo extends so{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $d extends so{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wd extends so{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class H_ extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vg extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ba extends so{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Al extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G_ extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $_{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class W_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iw{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ua{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wg(e,this._root).map(t=>t.value)}}function Sc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sc(n,t);if(r)return r}return null}function wg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wg(n,t);if(r.length)return r.unshift(e),r}return[]}class Os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Af extends bg{constructor(e,t){super(e),this.snapshot=t,Dg(this,e)}toString(){return this.snapshot.toString()}}function Ui(n,e){const t=function Nc(n,e){const u=new Of([],{},{},"",{},Ft,e,null,n.root,-1,{});return new K_("",new Os(u,[]))}(n,e),r=new Cn([new ro("",{})]),i=new Cn({}),a=new Cn({}),u=new Cn({}),h=new Cn(""),m=new Ol(r,i,u,h,a,Ft,e,t.root);return m.snapshot=t.root,new Af(new Os(m,[]),t)}class Ol{constructor(e,t,r,i,a,u,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>Ts(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>Ts(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ac(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Eg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Of{constructor(e,t,r,i,a,u,h,m,y,D,T,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=D,this._correctedLastPathIndex=O??D,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ts(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ts(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class K_ extends bg{constructor(e,t){super(t),this.url=e,Dg(this,t)}toString(){return zd(this._root)}}function Dg(n,e){e.value._routerState=n,e.children.forEach(t=>Dg(n,t))}function zd(n){const e=n.children.length>0?` { ${n.children.map(zd).join(", ")} } `:"";return`${n.value}${e}`}function Mu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),hi(e.params,t.params)||n.params.next(t.params),function Pr(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),hi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ml(n,e){const t=hi(n.params,e.params)&&function Go(n,e){return As(n,e)&&n.every((t,r)=>hi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ml(n.parent,e.parent))}function qd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Kd(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qd(n,r,i);return qd(n,r)})}(n,e,t);return new Os(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>qd(n,h)),u}}const r=function Mf(n){return new Ol(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>qd(n,a));return new Os(r,i)}}const xf="ngNavigationCancelingError";function Cg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=$o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Oc(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Oc(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Rf(n){return Mc(n)&&$o(n.url)}function Mc(n){return n&&n[xf]}class Z_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ja,this.attachRef=null}}class ja{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Z_,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const Zd=!1;let jn=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Zd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Zd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Zd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Zd);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new Y_(t,h,i.injector);if(r&&function Q_(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ja),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Y_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ol?this.route:e===ja?this.childContexts:this.parent.get(e,t)}}let Ha=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[jn],encapsulation:2}),n})();function Pf(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function xu(n){const e=n.children&&n.children.map(xu),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=Ha),t}function ji(n){return n.outlet||Ft}function xc(n,e){const t=n.filter(r=>ji(r)===e);return t.push(...n.filter(r=>ji(r)!==e)),t}function Ff(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ru{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Mu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zo(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Xn(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zo(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zo(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=zo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new z_(a.value.snapshot))}),e.children.length&&this.forwardEvent(new iw(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Mu(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Mu(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=Ff(i.snapshot),m=h?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Yd{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pu{constructor(e,t){this.component=e,this.route=t}}function Tg(n,e,t){const r=n._root;return Rl(r,e?e._root:null,t,[r.value])}function ku(n,e,t){return(Ff(e)??t).get(n)}function Rl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=zo(e);return n.children.forEach(u=>{(function Sg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function gi(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!As(n.url,e.url);case"pathParamsOrQueryParamsChange":return!As(n.url,e.url)||!hi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ml(n,e)||!hi(n.queryParams,e.queryParams);default:return!Ml(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Yd(r)):(a.data=u.data,a._resolvedData=u._resolvedData),Rl(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Pu(h.outlet.component,u))}else u&&Fu(e,h,i),i.canActivateChecks.push(new Yd(r)),Rl(n,null,a.component?h?h.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Xn(a,(u,h)=>Fu(u,t.getContext(h),i)),i}function Fu(n,e,t){const r=zo(n),i=n.value;Xn(r,(a,u)=>{Fu(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Pu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Pl(n){return"function"==typeof n}const Ga=Symbol("INITIAL_VALUE");function $a(){return An(n=>Oa(n.map(e=>e.pipe(Dr(1),Ra(Ga)))).pipe((0,ot.U)(e=>{for(const t of e)if(!0!==t){if(t===Ga)return Ga;if(!1===t||t instanceof Ns)return t}return!0}),Jn(e=>e!==Ga),Dr(1)))}function _(n){return(0,Cs.z)((0,lr.b)(e=>{if($o(e))throw Cg(0,e)}),(0,ot.U)(e=>!0===e))}const A={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R(n,e,t,r,i){const a=Y(n,e,t);return a.matched?function w(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(u=>{const h=n.get(u),m=function Xd(n){return n&&Pl(n.canMatch)}(h)?h.canMatch(e,t):h(e,t);return Li(m)})).pipe($a(),_()):st(!0)}(r=Pf(e,r),e,t).pipe((0,ot.U)(u=>!0===u?a:{...A})):st(a)}function Y(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...A}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||to)(t,n,e);if(!i)return{...A};const a={};Xn(i.posParams,(h,m)=>{a[m]=h.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function ae(n,e,t,r,i="corrected"){if(t.length>0&&function vt(n,e,t){return t.some(r=>Hn(n,e,r)&&ji(r)!==Ft)}(n,t,r)){const u=new wt(e,function Xe(n,e,t,r){const i={};i[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ji(a)!==Ft){const u=new wt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[ji(a)]=u}return i}(n,e,r,new wt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function mt(n,e,t){return t.some(r=>Hn(n,e,r))}(n,t,r)){const u=new wt(n.segments,function Le(n,e,t,r,i,a){const u={};for(const h of r)if(Hn(n,t,h)&&!i[ji(h)]){const m=new wt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[ji(h)]=m}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new wt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Hn(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ds(n,e,t,r){return!!(ji(n)===r||r!==Ft&&Hn(e,t,n))&&("**"===n.path||Y(e,n,t).matched)}function Rc(n,e,t){return 0===e.length&&!n.children[t]}const Lu=!1;class Fl{constructor(e){this.segmentGroup=e||null}}class Pc{constructor(e){this.urlTree=e}}function Vu(n){return ki(new Fl(n))}function eh(n){return ki(new Pc(n))}class nh{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=ae(this.urlTree.root,[],[],this.config).segmentGroup,t=new wt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ft).pipe((0,ot.U)(a=>this.createUrlTree(Bi(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Is(a=>{if(a instanceof Pc)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Fl?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ft).pipe((0,ot.U)(i=>this.createUrlTree(Bi(i),e.queryParams,e.fragment))).pipe(Is(i=>{throw i instanceof Fl?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Lu)}createUrlTree(e,t,r){const i=io(e);return new Ns(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ot.U)(a=>new wt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,hn.D)(i).pipe(Fi(a=>{const u=r.children[a],h=xc(t,a);return this.expandSegmentGroup(e,h,u,a).pipe((0,ot.U)(m=>({segment:m,outlet:a})))}),Rr((a,u)=>(a[u.outlet]=u.segment,a),{}),Cl())}expandSegment(e,t,r,i,a,u){return(0,hn.D)(r).pipe(Fi(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,u).pipe(Is(y=>{if(y instanceof Fl)return st(null);throw y}))),cs(h=>!!h),Is((h,m)=>{if(h instanceof xa||"EmptyError"===h.name)return Rc(t,i,a)?st(new wt([],{})):Vu(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,u,h){return ds(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):Vu(t):Vu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eh(a):this.lineralizeSegments(r,a).pipe((0,Un.z)(u=>{const h=new wt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:h,consumedSegments:m,remainingSegments:y,positionalParamSegments:D}=Y(t,i,a);if(!h)return Vu(t);const T=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?eh(T):this.lineralizeSegments(i,T).pipe((0,Un.z)(O=>this.expandSegment(e,t,r,O.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Pf(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ot.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new wt(i,{})))):st(new wt(i,{}))):R(t,r,i,e).pipe(An(({matched:u,consumedSegments:h,remainingSegments:m})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Un.z)(D=>{const T=D.injector??e,O=D.routes,{segmentGroup:L,slicedSegments:H}=ae(t,h,m,O),ee=new wt(L.segments,L.children);if(0===H.length&&ee.hasChildren())return this.expandChildren(T,O,ee).pipe((0,ot.U)(tt=>new wt(h,tt)));if(0===O.length&&0===H.length)return st(new wt(h,{}));const he=ji(r)===a;return this.expandSegment(T,ee,O,H,he?Ft:a,!0).pipe((0,ot.U)(Ve=>new wt(h.concat(Ve.segments),Ve.children)))})):Vu(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function p(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(u=>{const h=n.get(u),m=function ey(n){return n&&Pl(n.canLoad)}(h)?h.canLoad(e,t):h(e,t);return Li(m)})).pipe($a(),_())}(e,t,r).pipe((0,Un.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,lr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function sy(n){return ki(Oc(Lu,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Ft])return ki(new d.vHH(4e3,Lu));i=i.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ns(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Xn(t.children,(h,m)=>{u[m]=this.createSegmentGroup(e,h,r,i)}),new wt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Lu);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class dw{}class r1{constructor(e,t,r,i,a,u,h,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h,this.urlSerializer=m}recognize(){const e=ae(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ft).pipe((0,ot.U)(t=>{if(null===t)return null;const r=new Of([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Os(r,t),a=new K_(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Ac(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,hn.D)(Object.keys(r.children)).pipe(Fi(i=>{const a=r.children[i],u=xc(t,i);return this.processSegmentGroup(e,u,a,i)}),Rr((i,a)=>i&&a?(i.push(...a),i):null),function Bo(n,e=!1){return(0,or.e)((t,r)=>{let i=0;t.subscribe((0,pn.x)(r,a=>{const u=n(a,i++);(u||e)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),Pd(null),Cl(),(0,ot.U)(i=>{if(null===i)return null;const a=pw(i);return function hw(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,hn.D)(t).pipe(Fi(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),cs(u=>!!u),Is(u=>{if(u instanceof xa)return Rc(r,i,a)?st([]):st(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!ds(t,r,i,a))return st(null);let u;if("**"===t.path){const h=i.length>0?Uo(i).parameters:{},m=mw(r)+i.length;u=st({snapshot:new Of(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rh(t),ji(t),t.component??t._loadedComponent??null,t,Og(r),m,_w(t),m),consumedSegments:[],remainingSegments:[]})}else u=R(r,t,i,e).pipe((0,ot.U)(({matched:h,consumedSegments:m,remainingSegments:y,parameters:D})=>{if(!h)return null;const T=mw(r)+m.length;return{snapshot:new Of(m,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rh(t),ji(t),t.component??t._loadedComponent??null,t,Og(r),T,_w(t),T),consumedSegments:m,remainingSegments:y}}));return u.pipe(An(h=>{if(null===h)return st(null);const{snapshot:m,consumedSegments:y,remainingSegments:D}=h;e=t._injector??e;const T=t._loadedInjector??e,O=function oy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:L,slicedSegments:H}=ae(r,y,D,O.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution);if(0===H.length&&L.hasChildren())return this.processChildren(T,O,L).pipe((0,ot.U)(he=>null===he?null:[new Os(m,he)]));if(0===O.length&&0===H.length)return st([new Os(m,[])]);const ee=ji(t)===a;return this.processSegment(T,O,L,H,ee?Ft:a).pipe((0,ot.U)(he=>null===he?null:[new Os(m,he)]))}))}}function fw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pw(n){const e=[],t=new Set;for(const r of n){if(!fw(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=pw(r.children);e.push(new Os(r.value,i))}return e.filter(r=>!t.has(r))}function Og(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function mw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function rh(n){return n.data||{}}function _w(n){return n.resolve||{}}const ay=Symbol("RouteTitle");function xg(n){return"string"==typeof n.title||null===n.title}function ly(n){return An(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,ot.U)(()=>e)):st(e)})}class vw extends class c1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const uy=new d.OlP("ROUTES");let ti=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Li(t.loadComponent()).pipe((0,lr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Il(()=>{this.componentLoaders.delete(t)})),i=new Df(r,()=>new rn.x).pipe(Rd());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ot.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,y,D=!1;Array.isArray(h)?y=h:(m=h.create(t).injector,y=vc(m.get(uy,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(xu),injector:m}}),Il(()=>{this.childrenLoaders.delete(r)})),u=new Df(a,()=>new rn.x).pipe(Rd());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Li(t()).pipe((0,Un.z)(r=>r instanceof d.YKP||Array.isArray(r)?st(r):(0,hn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ww{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function mi(n){throw n}function Uf(n,e,t){return e.parse("/")}const dy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _i=(()=>{class n{constructor(t,r,i,a,u,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rn.x,this.errorHandler=mi,this.malformedUriErrorHandler=Uf,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>st(void 0),this.urlHandlingStrategy=new ww,this.routeReuseStrategy=new vw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(ti),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new W_(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new $_(O)),this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const T=u.get(d.R0b);this.isNgZoneEnabled=T instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function mg(){return new Ns(new wt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ui(this.currentUrlTree,this.rootComponentType),this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Jn(i=>0!==i.id),(0,ot.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),An(i=>{let a=!1,u=!1;return st(i).pipe((0,lr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),An(h=>{const m=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Dw(h.source)&&(this.browserUrlTree=h.extractedUrl),st(h).pipe(An(T=>{const O=this.transitions.getValue();return r.next(new Gd(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),O!==this.transitions.getValue()?gr.E:Promise.resolve(T)}),function cw(n,e,t,r){return An(i=>function Ag(n,e,t,r,i){return new nh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ot.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function i1(n,e,t,r,i,a){return(0,Un.z)(u=>function vP(n,e,t,r,i,a,u="emptyOnly",h="legacy"){return new r1(n,e,t,r,i,u,h,a).recognize().pipe(An(m=>null===m?function yP(n){return new Bn.y(e=>e.error(n))}(new dw):st(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,a).pipe((0,ot.U)(h=>({...u,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lr.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(L,T)}this.browserUrlTree=T.urlAfterRedirects}const O=new H_(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(O)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:L,source:H,restoredState:ee,extras:he}=h,Ge=new Gd(O,this.serializeUrl(L),H,ee);r.next(Ge);const Ve=Ui(L,this.rootComponentType).snapshot;return st(i={...h,targetSnapshot:Ve,urlAfterRedirects:L,extras:{...he,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),gr.E}),(0,lr.b)(h=>{const m=new vg(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,ot.U)(h=>i={...h,guards:Tg(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function kl(n,e){return(0,Un.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?st({...t,guardsResult:!0}):function ty(n,e,t,r){return(0,hn.D)(n).pipe((0,Un.z)(i=>function v(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?st(a.map(h=>{const m=ku(h,e,i);return Li(function qo(n){return n&&Pl(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,r):m(n,e,t,r)).pipe(cs())})).pipe($a()):st(!0)}(i.component,i.route,t,e,r)),cs(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Un.z)(h=>h&&function Qd(n){return"boolean"==typeof n}(h)?function Vf(n,e,t,r){return(0,hn.D)(e).pipe(Fi(i=>Ds(function ry(n,e){return null!==n&&e&&e(new rw(n)),st(!0)}(i.route.parent,r),function ny(n,e){return null!==n&&e&&e(new sw(n)),st(!0)}(i.route,r),function iy(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function Lf(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>xr(()=>st(u.guards.map(m=>{const y=ku(m,u.node,t);return Li(function kr(n){return n&&Pl(n.canActivateChild)}(y)?y.canActivateChild(r,n):y(r,n)).pipe(cs())})).pipe($a())));return st(a).pipe($a())}(n,i.path,t),function Bf(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(a=>xr(()=>{const u=ku(a,e,t);return Li(function Jd(n){return n&&Pl(n.canActivate)}(u)?u.canActivate(e,n):u(e,n)).pipe(cs())}));return st(i).pipe($a())}(n,i.route,t))),cs(i=>!0!==i,!0))}(r,a,n,e):st(h)),(0,ot.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,lr.b)(h=>{if(i.guardsResult=h.guardsResult,$o(h.guardsResult))throw Cg(0,h.guardsResult);const m=new Ba(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Jn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),ly(h=>{if(h.guards.canActivateChecks.length)return st(h).pipe((0,lr.b)(m=>{const y=new Al(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),An(m=>{let y=!1;return st(m).pipe(function yw(n,e){return(0,Un.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let a=0;return(0,hn.D)(i).pipe(Fi(u=>function s1(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!xg(i)&&(a[ay]=i.title),function o1(n,e,t,r){const i=function a1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const a={};return(0,hn.D)(i).pipe((0,Un.z)(u=>function l1(n,e,t,r){const i=ku(n,e,r);return Li(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe(cs(),(0,lr.b)(h=>{a[u]=h}))),Pa(1),ka(a),Is(u=>u instanceof xa?gr.E:ki(u)))}(a,n,e,r).pipe((0,ot.U)(u=>(n._resolvedData=u,n.data=Ac(n,t).resolve,i&&xg(i)&&(n.data[ay]=i.title),null)))}(u.route,r,n,e)),(0,lr.b)(()=>a++),Pa(1),(0,Un.z)(u=>a===i.length?st(t):gr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,lr.b)(m=>{const y=new G_(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}))}),ly(h=>{const m=y=>{const D=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,lr.b)(T=>{y.component=T}),(0,ot.U)(()=>{})));for(const T of y.children)D.push(...m(T));return D};return Oa(m(h.targetSnapshot.root)).pipe(Pd(),Dr(1))}),ly(()=>this.afterPreactivation()),(0,ot.U)(h=>{const m=function ow(n,e,t){const r=qd(n,e._root,t?t._root:void 0);return new Af(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:m}}),(0,lr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(r=>(new Ru(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,lr.b)({next(){a=!0},complete(){a=!0}}),Il(()=>{a||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Is(h=>{if(u=!0,Mc(h)){Rf(h)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new $d(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(m),Rf(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dw(i.source)};this.scheduleNavigation(y,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Wd(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return gr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(xu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:m}=r,y=i||this.routerState.root,D=m?this.currentUrlTree.fragment:u;let T=null;switch(h){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),_g(y,this.currentUrlTree,t,T,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=$o(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Ew(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...dy}:!1===r?{...d1}:r,$o(t))return Ho(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Ho(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Wo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let h,m,y;u?(h=u.resolve,m=u.reject,y=u.promise):y=new Promise((O,L)=>{h=O,m=L});const D=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:D,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new $d(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Dw(n){return"imperative"!==n}let Pg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new rn.x,this.subscription=t.events.subscribe(a=>{a instanceof Wo&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:(0,d.D6c)(this.skipLocationChange),replaceUrl:(0,d.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,d.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_i),d.Y36(Ol),d.Y36(ve))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),Iw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ft);return r}getResolvedTitleForRoute(t){return t.data[ay]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(f1)},providedIn:"root"}),n})(),f1=(()=>{class n extends Iw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_u))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tw{}let Fc=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Jn(t=>t instanceof Wo),Fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,h=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,hn.D)(i).pipe((0,Ma.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const a=i.pipe((0,Un.z)(u=>null===u?st(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,hn.D)([a,u]).pipe((0,Ma.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_i),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Tw),d.LFG(ti))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wa=new d.OlP("");let p1=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Wo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ua&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ua(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Sw=new d.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),hy=new d.OlP("ROUTER_FORROOT_GUARD"),g1=new d.OlP(""),za=[be,{provide:Ec,useClass:Bd},{provide:_i,useFactory:function Ow(n,e,t,r,i,a,u,h={},m,y){const D=new _i(null,n,e,t,r,i,vc(a));return m&&(D.urlHandlingStrategy=m),y&&(D.routeReuseStrategy=y),D.titleStrategy=u,function py(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,D),D},deps:[Ec,ja,be,d.zs3,d.Sil,uy,Iw,Sw,[class cy{},new d.FiY],[class u1{},new d.FiY]]},ja,{provide:Ol,useFactory:function gy(n){return n.routerState.root},deps:[_i]},ti];function fy(){return new d.PXZ("Router",_i)}let jf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[za,[],Aw(t),{provide:hy,useFactory:Hf,deps:[[_i,new d.FiY,new d.tp0]]},{provide:Sw,useValue:r||{}},r?.useHash?{provide:ve,useClass:Me}:{provide:ve,useClass:at},{provide:Wa,useFactory:()=>{const n=(0,d.f3M)(_i),e=(0,d.f3M)(_l),t=(0,d.f3M)(Sw);return t.scrollOffset&&e.setOffset(t.scrollOffset),new p1(n,e,t)}},r?.preloadingStrategy?E1(r.preloadingStrategy):[],{provide:d.PXZ,multi:!0,useFactory:fy},r?.initialNavigation?sh(r):[],[{provide:y1,useFactory:Mw},{provide:d.tb,multi:!0,useExisting:y1}]]}}static forChild(t){return{ngModule:n,providers:[Aw(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hy,8),d.LFG(_i,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Hf(n){return"guarded"}function Aw(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:uy,multi:!0,useValue:n}]}function Mw(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(_i),i=n.get(_y);null===n.get(Gf,null,d.XFs.Optional)&&r.initialNavigation(),n.get(g1,null,d.XFs.Optional)?.setUpPreloading(),n.get(Wa,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const y1=new d.OlP("");function sh(n){return["disabled"===n.initialNavigation?[{provide:d.ip1,multi:!0,useFactory:()=>{const n=(0,d.f3M)(_i);return()=>{n.setUpLocationChangeListener()}}},{provide:Gf,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:Gf,useValue:"enabledBlocking"},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:n=>{const e=n.get(G,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const a=n.get(_i),u=n.get(_y);(function r(i){n.get(_i).events.pipe(Jn(u=>u instanceof Wo||u instanceof $d||u instanceof Wd),(0,ot.U)(u=>u instanceof Wo||u instanceof $d&&(0===u.code||1===u.code)&&null),Jn(u=>null!==u),Dr(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),a.afterPreactivation=()=>(i(!0),t||u.closed?st(void 0):u),a.initialNavigation()}))}}]:[]]}const _y=new d.OlP("",{factory:()=>new rn.x}),Gf=new d.OlP("");function E1(n){return[Fc,{provide:g1,useExisting:Fc},{provide:Tw,useExisting:n}]}const D1=[];let C1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[jf.forRoot(D1),jf]}),n})();var xw=F(1144);const yy=["addListener","removeListener"],Rw=["addEventListener","removeEventListener"],vy=["on","off"];function Gi(n,e,t,r){if((0,di.m)(t)&&(r=t,t=void 0),r)return Gi(n,e,t).pipe(Aa(r));const[i,a]=function Lc(n){return(0,di.m)(n.addEventListener)&&(0,di.m)(n.removeEventListener)}(n)?Rw.map(u=>h=>n[u](e,h,t)):function kw(n){return(0,di.m)(n.addListener)&&(0,di.m)(n.removeListener)}(n)?yy.map(Pw(n,e)):function Fw(n){return(0,di.m)(n.on)&&(0,di.m)(n.off)}(n)?vy.map(Pw(n,e)):[];if(!i&&(0,xw.z)(n))return(0,Un.z)(u=>Gi(u,e,t))((0,Mr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Bn.y(u=>{const h=(...m)=>u.next(1<m.length?m:m[0]);return i(h),()=>a(h)})}function Pw(n,e){return t=>r=>n[t](e,r)}var $f=F(4986),Lw=F(3532);function Vw(n=0,e,t=$f.P){let r=-1;return null!=e&&((0,Lw.K)(e)?t=e:r=e),new Bn.y(i=>{let a=function I1(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}const{isArray:kg}=Array;function Bw(n){return 1===n.length&&kg(n[0])?n[0]:n}function by(...n){return 1===(n=Bw(n)).length?(0,Mr.Xf)(n[0]):new Bn.y(function Uw(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Mr.Xf)(n[r]).subscribe((0,pn.x)(e,i=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(i)})))}}(n))}var Wf=F(5032);function Vc(...n){const e=(0,Ht.jO)(n),t=Bw(n);return t.length?new Bn.y(r=>{let i=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{i=a=null});for(let u=0;!r.closed&&u<t.length;u++)(0,Mr.Xf)(t[u]).subscribe((0,pn.x)(r,h=>{if(i[u].push(h),i.every(m=>m.length)){const m=i.map(y=>y.shift());r.next(e?e(...m):m),i.some((y,D)=>!y.length&&a[D])&&r.complete()}},()=>{a[u]=!0,!i[u].length&&r.complete()}));return()=>{i=a=null}}):gr.E}function Ir(n){return(0,or.e)((e,t)=>{(0,Mr.Xf)(n).subscribe((0,pn.x)(t,()=>t.complete(),Wf.Z)),!t.closed&&e.subscribe(t)})}function Bc(n,e=ei.y){return n=n??jw,(0,or.e)((t,r)=>{let i,a=!0;t.subscribe((0,pn.x)(r,u=>{const h=e(u);(a||!n(i,h))&&(a=!1,i=h,r.next(u))}))})}function jw(n,e){return n===e}function oh(...n){const e=(0,Ht.jO)(n);return(0,or.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Mr.Xf)(n[m]).subscribe((0,pn.x)(r,y=>{a[m]=y,!h&&!u[m]&&(u[m]=!0,(h=u.every(ei.y))&&(u=null))},Wf.Z));t.subscribe((0,pn.x)(r,m=>{if(h){const y=[m,...a];r.next(e?e(...y):y)}}))})}function Hw(n,e){return e?t=>Ds(e.pipe(Dr(1),function zf(){return(0,or.e)((n,e)=>{n.subscribe((0,pn.x)(e,Wf.Z))})}()),t.pipe(Hw(n))):(0,Un.z)((t,r)=>n(t,r).pipe(Dr(1),ka(t)))}new Bn.y(Wf.Z);let hE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[hE]}),n})(),BP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[AE]}),n})();var Ul={left:"right",right:"left",bottom:"top",top:"bottom"};function $c(n){return n.replace(/left|right|bottom|top/g,function(e){return Ul[e]})}function xs(n){return n.split("-")[0]}var ep={start:"end",end:"start"};function ME(n){return n.replace(/start|end/g,function(e){return ep[e]})}var $i="top",ao="bottom",Jo="right",Rs="left",Wc="auto",tp=[$i,ao,Jo,Rs],np="start",rp="end",xE="viewport",ip="popper",RE=tp.reduce(function(n,e){return n.concat([e+"-"+np,e+"-"+rp])},[]),mS=[].concat(tp,[Wc]).reduce(function(n,e){return n.concat([e,e+"-"+np,e+"-"+rp])},[]),DS=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function hs(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function lo(n){return n instanceof hs(n).Element||n instanceof Element}function Xo(n){return n instanceof hs(n).HTMLElement||n instanceof HTMLElement}function zc(n){return!(typeof ShadowRoot>"u")&&(n instanceof hs(n).ShadowRoot||n instanceof ShadowRoot)}function Hu(n){return((lo(n)?n.ownerDocument:n.document)||window.document).documentElement}var qc=Math.max,hh=Math.min,fh=Math.round;function Wi(n,e){void 0===e&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Xo(n)&&e){var a=n.offsetHeight,u=n.offsetWidth;u>0&&(r=fh(t.width)/u||1),a>0&&(i=fh(t.height)/a||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function Kc(n){var e=hs(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Gr(n){return Wi(Hu(n)).left+Kc(n).scrollLeft}function uo(n){return hs(n).getComputedStyle(n)}function ho(n){return n?(n.nodeName||"").toLowerCase():null}function jl(n){return"html"===ho(n)?n:n.assignedSlot||n.parentNode||(zc(n)?n.host:null)||Hu(n)}function Gu(n){var e=uo(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function Yc(n){return["html","body","#document"].indexOf(ho(n))>=0?n.ownerDocument.body:Xo(n)&&Gu(n)?n:Yc(jl(n))}function Ka(n,e){var t;void 0===e&&(e=[]);var r=Yc(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),a=hs(r),u=i?[a].concat(a.visualViewport||[],Gu(r)?r:[]):r,h=e.concat(u);return i?h:h.concat(Ka(jl(u)))}function ph(n){return["table","td","th"].indexOf(ho(n))>=0}function Qc(n){return Xo(n)&&"fixed"!==uo(n).position?n.offsetParent:null}function Za(n){for(var e=hs(n),t=Qc(n);t&&ph(t)&&"static"===uo(t).position;)t=Qc(t);return t&&("html"===ho(t)||"body"===ho(t)&&"static"===uo(t).position)?e:t||function gh(n){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Xo(n)&&"fixed"===uo(n).position)return null;var i=jl(n);for(zc(i)&&(i=i.host);Xo(i)&&["html","body"].indexOf(ho(i))<0;){var a=uo(i);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||e&&"filter"===a.willChange||e&&a.filter&&"none"!==a.filter)return i;i=i.parentNode}return null}(n)||e}function Jc(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&zc(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function om(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function sv(n,e){return e===xE?om(function Zc(n){var e=hs(n),t=Hu(n),r=e.visualViewport,i=t.clientWidth,a=t.clientHeight,u=0,h=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(u=r.offsetLeft,h=r.offsetTop)),{width:i,height:a,x:u+Gr(n),y:h}}(n)):lo(e)?function kE(n){var e=Wi(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}(e):om(function co(n){var e,t=Hu(n),r=Kc(n),i=null==(e=n.ownerDocument)?void 0:e.body,a=qc(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=qc(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),h=-r.scrollLeft+Gr(n),m=-r.scrollTop;return"rtl"===uo(i||t).direction&&(h+=qc(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:u,x:h,y:m}}(Hu(n)))}function Xc(n){return n.split("-")[1]}function am(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ov(n){var m,e=n.reference,t=n.element,r=n.placement,i=r?xs(r):null,a=r?Xc(r):null,u=e.x+e.width/2-t.width/2,h=e.y+e.height/2-t.height/2;switch(i){case $i:m={x:u,y:e.y-t.height};break;case ao:m={x:u,y:e.y+e.height};break;case Jo:m={x:e.x+e.width,y:h};break;case Rs:m={x:e.x-t.width,y:h};break;default:m={x:e.x,y:e.y}}var y=i?am(i):null;if(null!=y){var D="y"===y?"height":"width";switch(a){case np:m[y]=m[y]-(e[D]/2-t[D]/2);break;case rp:m[y]=m[y]+(e[D]/2-t[D]/2)}}return m}function VE(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function BE(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function lv(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,a=e.boundary,u=void 0===a?"clippingParents":a,h=e.rootBoundary,m=void 0===h?xE:h,y=e.elementContext,D=void 0===y?ip:y,T=e.altBoundary,O=void 0!==T&&T,L=e.padding,H=void 0===L?0:L,ee=VE("number"!=typeof H?H:BE(H,tp)),Ge=n.rects.popper,Ve=n.elements[O?D===ip?"reference":ip:D],tt=function LE(n,e,t){var r="clippingParents"===e?function FE(n){var e=Ka(jl(n)),r=["absolute","fixed"].indexOf(uo(n).position)>=0&&Xo(n)?Za(n):n;return lo(r)?e.filter(function(i){return lo(i)&&Jc(i,r)&&"body"!==ho(i)}):[]}(n):[].concat(e),i=[].concat(r,[t]),u=i.reduce(function(h,m){var y=sv(n,m);return h.top=qc(y.top,h.top),h.right=hh(y.right,h.right),h.bottom=hh(y.bottom,h.bottom),h.left=qc(y.left,h.left),h},sv(n,i[0]));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}(lo(Ve)?Ve:Ve.contextElement||Hu(n.elements.popper),u,m),Ye=Wi(n.elements.reference),rt=ov({reference:Ye,element:Ge,strategy:"absolute",placement:i}),ht=om(Object.assign({},Ge,rt)),Rt=D===ip?ht:Ye,tn={top:tt.top-Rt.top+ee.top,bottom:Rt.bottom-tt.bottom+ee.bottom,left:tt.left-Rt.left+ee.left,right:Rt.right-tt.right+ee.right},ts=n.modifiersData.offset;if(D===ip&&ts){var ns=ts[i];Object.keys(tn).forEach(function(Ar){var Jl=[Jo,ao].indexOf(Ar)>=0?1:-1,aa=[$i,ao].indexOf(Ar)>=0?"y":"x";tn[Ar]+=ns[aa]*Jl})}return tn}const uv={name:"flip",enabled:!0,phase:"main",fn:function jE(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,a=void 0===i||i,u=t.altAxis,h=void 0===u||u,m=t.fallbackPlacements,y=t.padding,D=t.boundary,T=t.rootBoundary,O=t.altBoundary,L=t.flipVariations,H=void 0===L||L,ee=t.allowedAutoPlacements,he=e.options.placement,Ge=xs(he),tt=m||(Ge!==he&&H?function CS(n){if(xs(n)===Wc)return[];var e=$c(n);return[ME(n),e,ME(e)]}(he):[$c(he)]),Ye=[he].concat(tt).reduce(function(V_,sf){return V_.concat(xs(sf)===Wc?function UE(n,e){void 0===e&&(e={});var i=e.boundary,a=e.rootBoundary,u=e.padding,h=e.flipVariations,m=e.allowedAutoPlacements,y=void 0===m?mS:m,D=Xc(e.placement),T=D?h?RE:RE.filter(function(H){return Xc(H)===D}):tp,O=T.filter(function(H){return y.indexOf(H)>=0});0===O.length&&(O=T);var L=O.reduce(function(H,ee){return H[ee]=lv(n,{placement:ee,boundary:i,rootBoundary:a,padding:u})[xs(ee)],H},{});return Object.keys(L).sort(function(H,ee){return L[H]-L[ee]})}(e,{placement:sf,boundary:D,rootBoundary:T,padding:y,flipVariations:H,allowedAutoPlacements:ee}):sf)},[]),rt=e.rects.reference,ht=e.rects.popper,Rt=new Map,tn=!0,ts=Ye[0],ns=0;ns<Ye.length;ns++){var Ar=Ye[ns],Jl=xs(Ar),aa=Xc(Ar)===np,Yb=[$i,ao].indexOf(Jl)>=0,Qb=Yb?"width":"height",la=lv(e,{placement:Ar,boundary:D,rootBoundary:T,altBoundary:O,padding:y}),Xl=Yb?aa?Jo:Rs:aa?ao:$i;rt[Qb]>ht[Qb]&&(Xl=$c(Xl));var JT=$c(Xl),og=[];if(a&&og.push(la[Jl]<=0),h&&og.push(la[Xl]<=0,la[JT]<=0),og.every(function(V_){return V_})){ts=Ar,tn=!1;break}Rt.set(Ar,og)}if(tn)for(var pP=function(sf){var Xb=Ye.find(function(t1){var ag=Rt.get(t1);if(ag)return ag.slice(0,sf).every(function(gP){return gP})});if(Xb)return ts=Xb,"break"},Jb=H?3:1;Jb>0&&"break"!==pP(Jb);Jb--);e.placement!==ts&&(e.modifiersData[r]._skip=!0,e.placement=ts,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function sp(n,e,t){return qc(n,hh(e,t))}function mh(n){var e=Wi(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}const IS={name:"preventOverflow",enabled:!0,phase:"main",fn:function dv(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,a=void 0===i||i,u=t.altAxis,h=void 0!==u&&u,O=t.tether,L=void 0===O||O,H=t.tetherOffset,ee=void 0===H?0:H,he=lv(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),Ge=xs(e.placement),Ve=Xc(e.placement),tt=!Ve,Ye=am(Ge),rt=function cv(n){return"x"===n?"y":"x"}(Ye),ht=e.modifiersData.popperOffsets,Rt=e.rects.reference,tn=e.rects.popper,ts="function"==typeof ee?ee(Object.assign({},e.rects,{placement:e.placement})):ee,ns="number"==typeof ts?{mainAxis:ts,altAxis:ts}:Object.assign({mainAxis:0,altAxis:0},ts),Ar=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Jl={x:0,y:0};if(ht){if(a){var aa,Yb="y"===Ye?$i:Rs,Qb="y"===Ye?ao:Jo,la="y"===Ye?"height":"width",Xl=ht[Ye],JT=Xl+he[Yb],og=Xl-he[Qb],XT=L?-tn[la]/2:0,pP=Ve===np?Rt[la]:tn[la],Jb=Ve===np?-tn[la]:-Rt[la],e1=e.elements.arrow,V_=L&&e1?mh(e1):{width:0,height:0},sf=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Xb=sf[Yb],t1=sf[Qb],ag=sp(0,Rt[la],V_[la]),gP=tt?Rt[la]/2-XT-ag-Xb-ns.mainAxis:pP-ag-Xb-ns.mainAxis,hK=tt?-Rt[la]/2+XT+ag+t1+ns.mainAxis:Jb+ag+t1+ns.mainAxis,mP=e.elements.arrow&&Za(e.elements.arrow),FH=null!=(aa=Ar?.[Ye])?aa:0,gK=Xl+hK-FH,LH=sp(L?hh(JT,Xl+gP-FH-(mP?"y"===Ye?mP.clientTop||0:mP.clientLeft||0:0)):JT,Xl,L?qc(og,gK):og);ht[Ye]=LH,Jl[Ye]=LH-Xl}if(h){var VH,lg=ht[rt],n1="y"===rt?"height":"width",BH=lg+he["x"===Ye?$i:Rs],UH=lg-he["x"===Ye?ao:Jo],_P=-1!==[$i,Rs].indexOf(Ge),jH=null!=(VH=Ar?.[rt])?VH:0,HH=_P?BH:lg-Rt[n1]-tn[n1]-jH+ns.altAxis,GH=_P?lg+Rt[n1]+tn[n1]-jH-ns.altAxis:UH,$H=L&&_P?function lm(n,e,t){var r=sp(n,e,t);return r>t?t:r}(HH,lg,GH):sp(L?HH:BH,lg,L?GH:UH);ht[rt]=$H,Jl[rt]=$H-lg}e.modifiersData[r]=Jl}},requiresIfExists:["offset"]},GE={name:"arrow",enabled:!0,phase:"main",fn:function fv(n){var e,t=n.state,r=n.name,i=n.options,a=t.elements.arrow,u=t.modifiersData.popperOffsets,h=xs(t.placement),m=am(h),D=[Rs,Jo].indexOf(h)>=0?"height":"width";if(a&&u){var T=function(e,t){return VE("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:BE(e,tp))}(i.padding,t),O=mh(a),L="y"===m?$i:Rs,H="y"===m?ao:Jo,ee=t.rects.reference[D]+t.rects.reference[m]-u[m]-t.rects.popper[D],he=u[m]-t.rects.reference[m],Ge=Za(a),Ve=Ge?"y"===m?Ge.clientHeight||0:Ge.clientWidth||0:0,ht=Ve/2-O[D]/2+(ee/2-he/2),Rt=sp(T[L],ht,Ve-O[D]-T[H]);t.modifiersData[r]=((e={})[m]=Rt,e.centerOffset=Rt-ht,e)}},effect:function HE(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||!Jc(e.elements.popper,i)||(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gv(n,e,t){void 0===t&&(t=!1);var r=Xo(e),i=Xo(e)&&function WE(n){var e=n.getBoundingClientRect(),t=fh(e.width)/n.offsetWidth||1,r=fh(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),a=Hu(e),u=Wi(n,i),h={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(r||!r&&!t)&&(("body"!==ho(e)||Gu(a))&&(h=function $E(n){return n!==hs(n)&&Xo(n)?function pv(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):Kc(n)}(e)),Xo(e)?((m=Wi(e,!0)).x+=e.clientLeft,m.y+=e.clientTop):a&&(m.x=Gr(a))),{x:u.left+h.scrollLeft-m.x,y:u.top+h.scrollTop-m.y,width:u.width,height:u.height}}function zE(n){var e=new Map,t=new Set,r=[];function i(a){t.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(h){if(!t.has(h)){var m=e.get(h);m&&i(m)}}),r.push(a)}return n.forEach(function(a){e.set(a.name,a)}),n.forEach(function(a){t.has(a.name)||i(a)}),r}function qE(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var ZE={placement:"bottom",modifiers:[],strategy:"absolute"};function mv(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function YE(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,a=void 0===i?ZE:i;return function(h,m,y){void 0===y&&(y=a);var D={placement:"bottom",orderedModifiers:[],options:Object.assign({},ZE,a),modifiersData:{},elements:{reference:h,popper:m},attributes:{},styles:{}},T=[],O=!1,L={state:D,setOptions:function(Ge){var Ve="function"==typeof Ge?Ge(D.options):Ge;ee(),D.options=Object.assign({},a,D.options,Ve),D.scrollParents={reference:lo(h)?Ka(h):h.contextElement?Ka(h.contextElement):[],popper:Ka(m)};var tt=function TS(n){var e=zE(n);return DS.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function KE(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,D.options.modifiers)));return D.orderedModifiers=tt.filter(function(Ar){return Ar.enabled}),function H(){D.orderedModifiers.forEach(function(he){var Ve=he.options,Ye=he.effect;if("function"==typeof Ye){var rt=Ye({state:D,name:he.name,instance:L,options:void 0===Ve?{}:Ve});T.push(rt||function(){})}})}(),L.update()},forceUpdate:function(){if(!O){var Ge=D.elements,Ve=Ge.reference,tt=Ge.popper;if(mv(Ve,tt)){D.rects={reference:gv(Ve,Za(tt),"fixed"===D.options.strategy),popper:mh(tt)},D.reset=!1,D.placement=D.options.placement,D.orderedModifiers.forEach(function(Ar){return D.modifiersData[Ar.name]=Object.assign({},Ar.data)});for(var rt=0;rt<D.orderedModifiers.length;rt++)if(!0!==D.reset){var ht=D.orderedModifiers[rt],Rt=ht.fn,tn=ht.options;"function"==typeof Rt&&(D=Rt({state:D,options:void 0===tn?{}:tn,name:ht.name,instance:L})||D)}else D.reset=!1,rt=-1}}},update:qE(function(){return new Promise(function(he){L.forceUpdate(),he(D)})}),destroy:function(){ee(),O=!0}};if(!mv(h,m))return L;function ee(){T.forEach(function(he){return he()}),T=[]}return L.setOptions(y).then(function(he){!O&&y.onFirstUpdate&&y.onFirstUpdate(he)}),L}}var ed={passive:!0};const XE={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function JE(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,a=void 0===i||i,u=r.resize,h=void 0===u||u,m=hs(e.elements.popper),y=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&y.forEach(function(D){D.addEventListener("scroll",t.update,ed)}),h&&m.addEventListener("resize",t.update,ed),function(){a&&y.forEach(function(D){D.removeEventListener("scroll",t.update,ed)}),h&&m.removeEventListener("resize",t.update,ed)}},data:{}},tD={name:"popperOffsets",enabled:!0,phase:"read",fn:function eD(n){var e=n.state;e.modifiersData[n.name]=ov({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var nD={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _v(n){var e,t=n.popper,r=n.popperRect,i=n.placement,a=n.variation,u=n.offsets,h=n.position,m=n.gpuAcceleration,y=n.adaptive,D=n.roundOffsets,T=n.isFixed,O=u.x,L=void 0===O?0:O,H=u.y,ee=void 0===H?0:H,he="function"==typeof D?D({x:L,y:ee}):{x:L,y:ee};L=he.x,ee=he.y;var Ge=u.hasOwnProperty("x"),Ve=u.hasOwnProperty("y"),tt=Rs,Ye=$i,rt=window;if(y){var ht=Za(t),Rt="clientHeight",tn="clientWidth";ht===hs(t)&&"static"!==uo(ht=Hu(t)).position&&"absolute"===h&&(Rt="scrollHeight",tn="scrollWidth"),(i===$i||(i===Rs||i===Jo)&&a===rp)&&(Ye=ao,ee-=(T&&ht===rt&&rt.visualViewport?rt.visualViewport.height:ht[Rt])-r.height,ee*=m?1:-1),i!==Rs&&(i!==$i&&i!==ao||a!==rp)||(tt=Jo,L-=(T&&ht===rt&&rt.visualViewport?rt.visualViewport.width:ht[tn])-r.width,L*=m?1:-1)}var aa,Ar=Object.assign({position:h},y&&nD),Jl=!0===D?function rD(n){var t=n.y,i=window.devicePixelRatio||1;return{x:fh(n.x*i)/i||0,y:fh(t*i)/i||0}}({x:L,y:ee}):{x:L,y:ee};return L=Jl.x,ee=Jl.y,Object.assign({},Ar,m?((aa={})[Ye]=Ve?"0":"",aa[tt]=Ge?"0":"",aa.transform=(rt.devicePixelRatio||1)<=1?"translate("+L+"px, "+ee+"px)":"translate3d("+L+"px, "+ee+"px, 0)",aa):((e={})[Ye]=Ve?ee+"px":"",e[tt]=Ge?L+"px":"",e.transform="",e))}const HP={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function iD(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,a=t.adaptive,u=void 0===a||a,h=t.roundOffsets,m=void 0===h||h,D={placement:xs(e.placement),variation:Xc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,_v(Object.assign({},D,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:m})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,_v(Object.assign({},D,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var xS=[XE,tD,HP,{name:"applyStyles",enabled:!0,phase:"write",fn:function AS(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Xo(a)||!ho(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(u){var h=i[u];!1===h?a.removeAttribute(u):a.setAttribute(u,!0===h?"":h)}))})},effect:function OS(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},h=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(m,y){return m[y]="",m},{});!Xo(i)||!ho(i)||(Object.assign(i.style,h),Object.keys(a).forEach(function(m){i.removeAttribute(m)}))})}},requires:["computeStyles"]}],Fr=YE({defaultModifiers:xS});const PS={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function RS(n){var e=n.state,r=n.name,i=n.options.offset,a=void 0===i?[0,0]:i,u=mS.reduce(function(D,T){return D[T]=function sD(n,e,t){var r=xs(n),i=[Rs,$i].indexOf(r)>=0?-1:1,a="function"==typeof t?t(Object.assign({},e,{placement:n})):t,u=a[0],h=a[1];return u=u||0,h=(h||0)*i,[Rs,Jo].indexOf(r)>=0?{x:h,y:u}:{x:u,y:h}}(T,e.rects,a),D},{}),h=u[e.placement],y=h.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=h.x,e.modifiersData.popperOffsets.y+=y),e.modifiersData[r]=u}},BS=["*"],vD=["dialog"];function Dv(n){return"string"==typeof n}function $u(n){return null!=n}function vh(n){return(n||document.body).getBoundingClientRect()}const Iv={animation:!0,transitionTimerDelayMs:5},FD=()=>{},{transitionTimerDelayMs:IN}=Iv,bh=new Map,zi=(n,e,t,r)=>{let i=r.context||{};const a=bh.get(e);if(a)switch(r.runningTransition){case"continue":return gr.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),bh.delete(e)}const u=t(e,r.animation,i)||FD;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>u()),st(void 0).pipe(function CN(n){return e=>new Bn.y(t=>e.subscribe({next:u=>n.run(()=>t.next(u)),error:u=>n.run(()=>t.error(u)),complete:()=>n.run(()=>t.complete())}))}(n));const h=new rn.x,m=new rn.x,y=h.pipe(function Lg(...n){return e=>Ds(e,st(...n))}(!0));bh.set(e,{transition$:h,complete:()=>{m.next(),m.complete()},context:i});const D=function kD(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const T=Gi(e,"transitionend").pipe(Ir(y),Jn(({target:L})=>L===e));by(Vw(D+IN).pipe(Ir(y)),T,m).pipe(Ir(y)).subscribe(()=>{bh.delete(e),n.run(()=>{u(),h.next(),h.complete()})})}),h.asObservable()};let Tv=(()=>{class n{constructor(){this.animation=Iv.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),Sv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),zD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),bm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var Tr=(()=>{return(n=Tr||(Tr={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",Tr;var n})();const wm=(n,e)=>!!e&&e.some(t=>t.contains(n)),Em=(n,e)=>!e||null!=function lp(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}(n,e),XD=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function tC(n,e,t,r,i,a,u,h){t&&n.runOutsideAngular((n=>XD?()=>setTimeout(()=>n(),100):n)(()=>{const y=Gi(e,"keydown").pipe(Ir(i),Jn(O=>O.which===Tr.Escape),(0,lr.b)(O=>O.preventDefault())),D=Gi(e,"mousedown").pipe((0,ot.U)(O=>{const L=O.target;return 2!==O.button&&!wm(L,u)&&("inside"===t?wm(L,a)&&Em(L,h):"outside"===t?!wm(L,a):Em(L,h)||!wm(L,a))}),Ir(i)),T=Gi(e,"mouseup").pipe(oh(D),Jn(([O,L])=>L),function Gw(n,e=$f.z){const t=Vw(n,e);return Hw(()=>t)}(0),Ir(i));by([y.pipe((0,ot.U)(O=>0)),T.pipe((0,ot.U)(O=>1))]).subscribe(O=>n.run(()=>r(O)))}))}const Ov=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function nC(n){const e=Array.from(n.querySelectorAll(Ov)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const GN=/\s+/,$N=/  +/gi,rC=/^start/,Dk=/^end/,iC=/-(top|left)$/,WN=/-(bottom|right)$/,Ck=/^left/,Ik=/^right/,qN=/^start/,KN=/^end/;function Mv({placement:n,baseClass:e}){let t=Array.isArray(n)?n:n.split(GN),i=t.findIndex(m=>"auto"===m);i>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(m){null==t.find(y=>-1!==y.search("^"+m))&&t.splice(i++,1,m)});const a=t.map(m=>function zN(n){return n.replace(rC,"left").replace(Dk,"right").replace(iC,"-start").replace(WN,"-end")}(m));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:m}){const y=new RegExp(e+"(-[a-z]+)*","gi"),D=m.elements.popper,T=m.placement;let O=D.className;O=O.replace(y,""),O+=` ${function ZN(n,e){let[t,r]=e.split("-");const i=t.replace(Ck,"start").replace(Ik,"end");let a=[i];if(r){let u=r;("left"===t||"right"===t)&&(u=u.replace(qN,"top").replace(KN,"bottom")),a.push(`${i}-${u}`)}return n&&(a=a.map(u=>`${n}-${u}`)),a.join(" ")}(e,T)}`,O=O.trim().replace($N," "),D.className=O}},uv,IS,GE,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function xv(n){return n}function YN(n){return e=>(e.modifiers.push(PS,{name:"offset",options:{offset:()=>n}}),e)}new Date(1882,10,12),new Date(2174,10,25);let fA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr,BP]}),n})(),fC=(()=>{class n{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Om=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),Sh=(()=>{class n{constructor(t,r){this.elementRef=t,this._renderer=r,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(t,r){2&t&&(d.Ikx("tabIndex",r.disabled?-1:0),d.ekj("disabled",r.disabled))},inputs:{disabled:"disabled"}}),n})(),Fv=(()=>{class n{constructor(t,r){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>Ah)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Sh,4),2&t){let a;d.iGM(a=d.CRH())&&(r.menuItems=a)}},hostVars:4,hostBindings:function(t,r){1&t&&d.NdJ("keydown.ArrowUp",function(a){return r.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return r.dropdown.onKeyDown(a)})("keydown.Home",function(a){return r.dropdown.onKeyDown(a)})("keydown.End",function(a){return r.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return r.dropdown.onKeyDown(a)})("keydown.Space",function(a){return r.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return r.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return r.dropdown.onKeyDown(a)}),2&t&&d.ekj("dropdown-menu",!0)("show",r.dropdown.isOpen())}}),n})(),Nh=(()=>{class n{constructor(t,r){this.dropdown=t,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>Ah)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("aria-expanded",r.dropdown.isOpen())}}),n})(),pC=(()=>{class n extends Nh{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>Ah)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(a){return r.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return r.dropdown.onKeyDown(a)})("keydown.Home",function(a){return r.dropdown.onKeyDown(a)})("keydown.End",function(a){return r.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return r.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return r.dropdown.onKeyDown(a)}),2&t&&d.uIk("aria-expanded",r.dropdown.isOpen())},features:[d._Bn([{provide:Nh,useExisting:(0,d.Gpc)(()=>n)}]),d.qOj]}),n})(),Ah=(()=>{class n{constructor(t,r,i,a,u,h,m){this._changeDetector=t,this._document=i,this._ngZone=a,this._elementRef=u,this._renderer=h,this._destroyCloseHandlers$=new rn.x,this._bodyContainer=null,this._positioning=function sC(){let n=null;return{createPopper(e){if(!n){let r=(e.updatePopperOptions||xv)(Mv(e));n=Fr(e.hostElement,e.targetElement,r)}},update(){n&&n.update()},setOptions(e){if(n){let r=(e.updatePopperOptions||xv)(Mv(e));n.setOptions(r)}},destroy(){n&&(n.destroy(),n=null)}}}(),this._open=!1,this.openChange=new d.vpe,this.placement=r.placement,this.container=r.container,this.autoClose=r.autoClose,this.display=m?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(Dr(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),t.dropdownClass){const{currentValue:r,previousValue:i}=t.dropdownClass;this._applyCustomDropdownClass(r,i)}t.autoClose&&this._open&&(this.autoClose=t.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:YN([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),tC(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(t){const r=t.which,i=this._getMenuElements();let a=-1,u=null;const h=this._isEventFromToggle(t);if(!h&&i.length&&i.forEach((m,y)=>{m.contains(t.target)&&(u=m),m===this._document.activeElement&&(a=y)}),r!==Tr.Space&&r!==Tr.Enter){if(r!==Tr.Tab){if(h||u){if(this.open(),i.length){switch(r){case Tr.ArrowDown:a=Math.min(a+1,i.length-1);break;case Tr.ArrowUp:if(this._isDropup()&&-1===a){a=i.length-1;break}a=Math.max(a-1,0);break;case Tr.Home:a=0;break;case Tr.End:a=i.length-1}i[a].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const m=this._menu.nativeElement.querySelectorAll(Ov);t.shiftKey&&t.target===m[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):!t.shiftKey&&t.target===m[m.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Gi(t.target,"focusout").pipe(Dr(1)).subscribe(({relatedTarget:m})=>{this._elementRef.nativeElement.contains(m)||this.close()})}}else u&&(!0===this.autoClose||"inside"===this.autoClose)&&Gi(u,"click").pipe(Dr(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;this._menu&&t.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const r=this._renderer,i=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(a,"position","absolute"),r.setStyle(i,"position","static"),r.setStyle(a,"z-index","1055"),r.appendChild(a,i),r.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,r){const i="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;i&&(r&&this._renderer.removeClass(i,r),t&&this._renderer.addClass(i,t))}_applyPlacementClasses(t){const r=this._menu;if(r){t||(t=this._getFirstPlacement(this.placement));const i=this._renderer,a=this._elementRef.nativeElement;i.removeClass(a,"dropup"),i.removeClass(a,"dropdown");const{nativeElement:u}=r;"static"===this.display?(r.placement=null,i.setAttribute(u,"data-bs-popper","static")):(r.placement=t,i.removeAttribute(u,"data-bs-popper"));const h=-1!==t.search("^top")?"dropup":"dropdown";i.addClass(a,h);const m=this._bodyContainer;m&&(i.removeClass(m,"dropup"),i.removeClass(m,"dropdown"),i.addClass(m,h))}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO),d.Y36(fC),d.Y36(de),d.Y36(d.R0b),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Om,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,Fv,5),d.Suo(i,Nh,5)),2&t){let a;d.iGM(a=d.CRH())&&(r._menu=a.first),d.iGM(a=d.CRH())&&(r._anchor=a.first)}},hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("show",r.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[d.TTD]}),n})(),gC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class fo{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let Lv=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Dr(1)).subscribe(()=>{zi(this._zone,this._el.nativeElement,(t,r)=>{r&&vh(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return zi(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(d.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),d.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class Vv{close(e){}dismiss(e){}}class mC{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new rn.x,this._dismissed=new rn.x,this._hidden=new rn.x,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,u)=>{this._resolve=a,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ir(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ir(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function Cv(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():st(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Vc(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ku=(()=>{return(n=Ku||(Ku={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",Ku;var n})();let Bv=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new rn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new rn.x,this.hidden=new rn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Dv(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Dr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},u=Vc(zi(this._zone,t,()=>t.classList.remove("show"),r),zi(this._zone,this._dialogEl.nativeElement,()=>{},r));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const t={animation:this.animation,runningTransition:"continue"};Vc(zi(this._zone,this._elRef.nativeElement,(a,u)=>{u&&vh(a),a.classList.add("show")},t),zi(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Gi(t,"keydown").pipe(Ir(this._closed$),Jn(i=>i.which===Tr.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Ku.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Gi(this._dialogEl.nativeElement,"mousedown").pipe(Ir(this._closed$),(0,lr.b)(()=>r=!1),An(()=>Gi(t,"mouseup").pipe(Ir(this._closed$),Dr(1))),Jn(({target:i})=>t===i)).subscribe(()=>{r=!0}),Gi(t,"click").pipe(Ir(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(Ku.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=nC(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&zi(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(de),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&d.Gf(vD,7),2&t){let i;d.iGM(i=d.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),d.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:BS,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0,1)(2,"div",2),d.Hsn(3),d.qZA()()),2&t&&d.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),zk=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:a,paddingRight:u}=i;if(t>0){const h=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${h+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=u),i.overflow=a}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_C=(()=>{class n{constructor(t,r,i,a,u,h){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=u,this._ngZone=h,this._activeWindowCmptHasChanged=new rn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=Gi(e,"focusin").pipe(Ir(t),(0,ot.U)(a=>a.target));Gi(e,"keydown").pipe(Ir(t),Jn(a=>a.which===Tr.Tab),oh(i)).subscribe(([a,u])=>{const[h,m]=nC(e);(u===h||u===e)&&a.shiftKey&&(m.focus(),a.preventDefault()),u===m&&!a.shiftKey&&(h.focus(),a.preventDefault())}),r&&Gi(e,"click").pipe(Ir(t),oh(i),(0,ot.U)(a=>a[1])).subscribe(a=>a.focus())})})(0,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const a=i.container instanceof HTMLElement?i.container:$u(i.container)?this._document.querySelector(i.container):this._document.body,u=this._rendererFactory.createRenderer(null,null);if(!a)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new Vv,m=this._getContentRef(i.injector||t,r,h,i);let y=!1!==i.backdrop?this._attachBackdrop(a):void 0,D=this._attachWindowComponent(a,m.nodes),T=new mC(D,m,y,i.beforeDismiss);return this._registerModalRef(T),this._registerWindowCmpt(D),T.hidden.pipe(Dr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(u.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=O=>{T.close(O)},h.dismiss=O=>{T.dismiss(O)},this._applyWindowOptions(D.instance,i),1===this._modalRefs.length&&u.addClass(this._document.body,"modal-open"),y&&y.instance&&(this._applyBackdropOptions(y.instance,i),y.changeDetectorRef.detectChanges()),D.changeDetectorRef.detectChanges(),T}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,d.LMc)(Lv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,d.LMc)(Bv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{$u(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{$u(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a){return r?r instanceof d.Rgc?this._createFromTemplateRef(r,i):Dv(r)?this._createFromString(r):this._createFromComponent(t,r,i,a):new fo([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(u){r.close(u)},dismiss(u){r.dismiss(u)}});return this._applicationRef.attachView(a),new fo([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new fo([[r]])}_createFromComponent(t,r,i,a){const u=d.zs3.create({providers:[{provide:Vv,useValue:i}],parent:t}),h=(0,d.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:u}),m=h.location.nativeElement;return a.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(h.hostView),new fo([[m]],h.hostView,h)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(de),d.LFG(zk),d.LFG(d.FYo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pA=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Tv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yC=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(_C),d.LFG(pA))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[yC]}),n})(),Gv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),Kv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),EA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),Qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),xm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),SA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),TC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),SC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function Jv(){return 100}});let Xv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rr]}),n})(),e0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const t0=[HD,Sv,zD,bm,fA,gC,nd,Gv,e0,Kv,EA,Qv,xm,SA,TC,SC,Xv];let zl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[t0,HD,Sv,zD,bm,fA,gC,nd,Gv,e0,Kv,EA,Qv,xm,SA,TC,SC,Xv]}),n})(),PA=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bs-navbar"]],decls:30,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","fixed-top"],["routerLink","/",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["router-link","/",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],["router-link","/shopping-cart",1,"nav-link"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","id","dropdown01","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdown01",1,"dropdown-menu"],["routerLink","/my/orders",1,"dropdown-item"],["routerLink","/admin/orders",1,"dropdown-item"],["routerLink","/admin/products",1,"dropdown-item"],[1,"dropdown-item"],[1,"form-inline","my-2","my-lg-0"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","mr-sm-2"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2,"OrganicShop "),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"Home "),d._UZ(10,"span",8),d.qZA()(),d.TgZ(11,"li",9)(12,"a",10),d._uU(13,"Shopping Cart"),d.qZA()(),d.TgZ(14,"li",11)(15,"a",12),d._uU(16," Username "),d.qZA(),d.TgZ(17,"div",13)(18,"a",14),d._uU(19,"My Orders"),d.qZA(),d.TgZ(20,"a",15),d._uU(21,"Manage Orders"),d.qZA(),d.TgZ(22,"a",16),d._uU(23,"Manage Products"),d.qZA(),d.TgZ(24,"a",17),d._uU(25,"Log Out"),d.qZA()()()()(),d.TgZ(26,"form",18),d._UZ(27,"input",19),d.TgZ(28,"button",20),d._uU(29,"Search"),d.qZA()()())},dependencies:[Pg,Ah,pC,Fv,Om],styles:[".dropdown-toggle[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),pF=(()=>{class n{constructor(){this.title="Organic-Shop"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(d._UZ(0,"app-bs-navbar"),d.TgZ(1,"div",0),d._UZ(2,"router-outlet"),d.qZA())},dependencies:[jn,PA]}),n})();var qi=F(2011),n0=F(6451),Pm=F(5363),kA=F(6063);class MC extends rn.x{constructor(e=1/0,t=1/0,r=kA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}var FA=F(3099);function r0(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,FA.B)({connector:()=>new MC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function xC(n,e){return(0,di.m)(e)?An(()=>n,e):An(()=>n)}var km=F(9468),xn=F(4387);F(5694);var Ee=F(5861),ta=F(9681),Zu=F(4859),P=F(2090),tl=F(1877);const jA=new Map,vF={activated:!1,tokenObservers:[]},HA={initialized:!1,enabled:!1};function yr(n){return jA.get(n)||vF}function na(n,e){jA.set(n,e)}function Vm(){return HA}class l0{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function u0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $A(n){if(!yr(n).activated)throw ps.create("use-before-activation",{appName:n.name})}function d0(n,e){return h0.apply(this,arguments)}function h0(){return(h0=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const L=yield u.getHeartbeatsHeader();L&&(a["X-Firebase-Client"]=L)}const h={method:"POST",body:JSON.stringify(e),headers:a};let m,y;try{m=yield fetch(n,h)}catch(L){throw ps.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==m.status)throw ps.create("fetch-status-error",{httpStatus:m.status});try{y=yield m.json()}catch(L){throw ps.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const D=y.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(D[1]),O=Date.now();return{token:y.token,expireTimeMillis:O+T,issuedAtTimeMillis:O}})).apply(this,arguments)}function VC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const gp="firebase-app-check-store";let mp=null;function Hm(){return mp||(mp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ps.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(gp,{keyPath:"compositeKey"})}}catch(r){e(ps.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),mp)}function $C(){return($C=(0,Ee.Z)(function*(n,e){const r=(yield Hm()).transaction(gp,"readwrite"),a=r.objectStore(gp).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var y;h(ps.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const _p=new tl.Yd("@firebase/app-check");function ZA(n,e){return(0,P.hl)()?function HC(n,e){return function GC(n,e){return $C.apply(this,arguments)}(function WC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_p.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function KC(){return Vm().enabled}function YA(){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,Ee.Z)(function*(){const n=Vm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const CF={error:"UNKNOWN_ERROR"};function QA(n){return P.US.encodeString(JSON.stringify(n),!1)}function g0(n){return s.apply(this,arguments)}function s(){return(s=(0,Ee.Z)(function*(n,e=!1){const t=n.app;$A(t);const r=yr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&b(m)&&(i=m)}if(!e&&i&&b(i))return{token:i.token};let h,u=!1;if(KC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=d0(VC(t,yield YA()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const m=yield r.exchangeTokenPromise;return yield ZA(t,m),na(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?_p.warn(m.message):_p.error(m),a=m}return i?(h={token:i.token},na(t,Object.assign(Object.assign({},r),{token:i})),yield ZA(t,i)):h=E(a),u&&g(t,h),h})).apply(this,arguments)}function l(n,e){const t=yr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),na(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function c(n){const{app:e}=n,t=yr(e);let r=t.tokenRefresher;r||(r=function f(n){const{app:e}=n;return new l0((0,Ee.Z)(function*(){let r;if(r=yr(e).token?yield g0(n,!0):yield g0(n),r.error)throw r.error}),()=>!0,()=>{const t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),na(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function g(n,e){const t=yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function b(n){return n.expireTimeMillis-Date.now()>0}function E(n){return{token:QA(CF),error:n}}class C{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)l(this.app,t.next);return Promise.resolve()}}const IF="app-check-internal";!function mG(){(0,ta._registerComponent)(new Zu.wA("app-check",n=>function N(n,e){return new C(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(IF).initialize()})),(0,ta._registerComponent)(new Zu.wA(IF,n=>function x(n){return{getToken:e=>g0(n,e),addTokenListener:e=>function o(n,e,t,r){const{app:i}=n,a=yr(i),u={next:t,error:r,type:e};if(na(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&b(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),c(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>c(n))}(n,"INTERNAL",e),removeTokenListener:e=>l(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ta.registerVersion)("@firebase/app-check","0.5.12")}();class XC{constructor(){return(0,xn.vb)("app-check")}}typeof window<"u"&&window;var tO=F(7554);const nO=new d.OlP("angularfire2.auth.use-emulator"),rO=new d.OlP("angularfire2.auth.settings"),iO=new d.OlP("angularfire2.auth.tenant-id"),sO=new d.OlP("angularfire2.auth.langugage-code"),oO=new d.OlP("angularfire2.auth.use-device-language"),aO=new d.OlP("angularfire.auth.persistence"),lO=(n,e,t,r,i,a,u,h)=>(0,qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),u)for(const[y,D]of Object.entries(u))m.settings[y]=D;return h&&m.setPersistence(h),m},[t,r,i,a,u,h]);let eI=(()=>{class n{constructor(t,r,i,a,u,h,m,y,D,T,O,L){const H=new rn.x,ee=st(void 0).pipe((0,Pm.Q)(u.outsideAngular),An(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,6682)))),(0,ot.U)(()=>(0,qi.on)(t,a,r)),(0,ot.U)(he=>lO(he,a,h,y,D,T,m,O)),r0({bufferSize:1,refCount:!1}));if(Ed(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{ee.pipe(cs()).subscribe();const Ge=ee.pipe(An(Ye=>Ye.getRedirectResult().then(rt=>rt,()=>null)),xn.iC,r0({bufferSize:1,refCount:!1})),Ve=ee.pipe(An(Ye=>new Bn.y(rt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(ht=>rt.next(ht),ht=>rt.error(ht),()=>rt.complete()))})))),tt=ee.pipe(An(Ye=>new Bn.y(rt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(ht=>rt.next(ht),ht=>rt.error(ht),()=>rt.complete()))}))));this.authState=Ge.pipe(xC(Ve),(0,km.R)(u.outsideAngular),(0,Pm.Q)(u.insideAngular)),this.user=Ge.pipe(xC(tt),(0,km.R)(u.outsideAngular),(0,Pm.Q)(u.insideAngular)),this.idToken=this.user.pipe(An(Ye=>Ye?(0,hn.D)(Ye.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(An(Ye=>Ye?(0,hn.D)(Ye.getIdTokenResult()):st(null))),this.credential=(0,n0.T)(Ge,H,this.authState.pipe(Jn(Ye=>!Ye))).pipe((0,ot.U)(Ye=>Ye?.user?Ye:null),(0,km.R)(u.outsideAngular),(0,Pm.Q)(u.insideAngular))}return(0,qi.pX)(this,ee,a,{spy:{apply:(he,Ge,Ve)=>{(he.startsWith("signIn")||he.startsWith("createUser"))&&Ve.then(tt=>H.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(xn.HU),d.LFG(nO,8),d.LFG(rO,8),d.LFG(iO,8),d.LFG(sO,8),d.LFG(oO,8),d.LFG(aO,8),d.LFG(XC,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),EG=(()=>{class n{constructor(){tO.Z.registerVersion("angularfire",xn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eI]}),n})();function uO(){return(0,or.e)((n,e)=>{let t,r=!1;n.subscribe((0,pn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}F(6682);var lt,SF=F(3942),DG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},od={},cO=cO||{},kt=DG||self;function tI(){}function dO(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hO="closure_uid_"+(1e9*Math.random()>>>0),IG=0;function TG(n,e,t){return n.call.apply(n.bind,arguments)}function SG(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ki(n,e,t){return(Ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?TG:SG).apply(null,arguments)}function nI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Oh(){this.s=this.s,this.o=this.o}var AG={};Oh.prototype.s=!1,Oh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function CG(n){return Object.prototype.hasOwnProperty.call(n,hO)&&n[hO]||(n[hO]=++IG)}(this);delete AG[n]}},Oh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},AF=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function OF(n){return Array.prototype.concat.apply([],arguments)}function fO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rI(n){return/^[\s\xa0]*$/.test(n)}var Fs,MF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ks(n,e){return-1!=n.indexOf(e)}function pO(n,e){return n<e?-1:n>e?1:0}e:{var xF=kt.navigator;if(xF){var RF=xF.userAgent;if(RF){Fs=RF;break e}}Fs=""}function gO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function PF(n){const e={};for(const t in n)e[t]=n[t];return e}var kF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<kF.length;a++)t=kF[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function mO(n){return mO[" "](n),n}mO[" "]=tI;var iI,n,xG=ks(Fs,"Opera"),Km=ks(Fs,"Trident")||ks(Fs,"MSIE"),LF=ks(Fs,"Edge"),_O=LF||Km,VF=ks(Fs,"Gecko")&&!(ks(Fs.toLowerCase(),"webkit")&&!ks(Fs,"Edge"))&&!(ks(Fs,"Trident")||ks(Fs,"MSIE"))&&!ks(Fs,"Edge"),RG=ks(Fs.toLowerCase(),"webkit")&&!ks(Fs,"Edge");function BF(){var n=kt.document;return n?n.documentMode:void 0}e:{var yO="",vO=(n=Fs,VF?/rv:([^\);]+)(\)|;)/.exec(n):LF?/Edge\/([\d\.]+)/.exec(n):Km?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):RG?/WebKit\/(\S+)/.exec(n):xG?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(vO&&(yO=vO?vO[1]:""),Km){var bO=BF();if(null!=bO&&bO>parseFloat(yO)){iI=String(bO);break e}}iI=yO}var PG={};var FG=kt.document&&Km&&(BF()||parseInt(iI,10))||void 0,LG=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",tI,e),kt.removeEventListener("test",tI,e)}catch{}return n}();function gs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function y0(n,e){if(gs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(VF){e:{try{mO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:VG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&y0.Z.h.call(this)}}gs.prototype.h=function(){this.defaultPrevented=!0},Zi(y0,gs);var VG={2:"touch",3:"pen",4:"mouse"};y0.prototype.h=function(){y0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var v0="closure_listenable_"+(1e6*Math.random()|0),BG=0;function UG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++BG,this.ca=this.fa=!1}function sI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function oI(n){this.src=n,this.g={},this.h=0}function EO(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=NF(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(sI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function DO(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}oI.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=DO(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new UG(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var CO="closure_lm_"+(1e6*Math.random()|0),IO={};function jF(n,e,t,r,i){if(r&&r.once)return GF(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)jF(n,e[a],t,r,i);return null}return t=AO(t),n&&n[v0]?n.N(e,t,_0(r)?!!r.capture:!!r,i):HF(n,e,t,!1,r,i)}function HF(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=_0(i)?!!i.capture:!!i,h=SO(n);if(h||(n[CO]=h=new oI(n)),(t=h.add(e,t,r,u,a)).proxy)return t;if(r=function jG(){var e=HG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LG||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(WF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function GF(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)GF(n,e[a],t,r,i);return null}return t=AO(t),n&&n[v0]?n.O(e,t,_0(r)?!!r.capture:!!r,i):HF(n,e,t,!0,r,i)}function $F(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)$F(n,e[a],t,r,i);else r=_0(r)?!!r.capture:!!r,t=AO(t),n&&n[v0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=DO(a=n.g[e],t,r,i))&&(sI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=SO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=DO(e,t,r,i)),(t=-1<n?e[n]:null)&&TO(t))}function TO(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[v0])EO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(WF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=SO(e))?(EO(t,n),0==t.h&&(t.src=null,e[CO]=null)):sI(n)}}}function WF(n){return n in IO?IO[n]:IO[n]="on"+n}function HG(n,e){if(n.ca)n=!0;else{e=new y0(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&TO(n),n=t.call(r,e)}return n}function SO(n){return(n=n[CO])instanceof oI?n:null}var NO="__closure_events_fn_"+(1e9*Math.random()>>>0);function AO(n){return"function"==typeof n?n:(n[NO]||(n[NO]=function(e){return n.handleEvent(e)}),n[NO])}function wi(){Oh.call(this),this.i=new oI(this),this.P=this,this.I=null}function Yi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gs(e,n);else if(e instanceof gs)e.target=e.target||n;else{var i=e;FF(e=new gs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=aI(u,r,!0,e)&&i}if(i=aI(u=e.g=n,r,!0,e)&&i,i=aI(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=aI(u=e.g=t[a],r,!1,e)&&i}function aI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&EO(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Zi(wi,Oh),wi.prototype[v0]=!0,wi.prototype.removeEventListener=function(n,e,t,r){$F(this,n,e,t,r)},wi.prototype.M=function(){if(wi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sI(t[r]);delete n.g[e],n.h--}}this.I=null},wi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},wi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var OO=kt.JSON.stringify;function GG(){var n=qF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var xO,zF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new WG,n=>n.reset());class WG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zG(n){kt.setTimeout(()=>{throw n},0)}function MO(n,e){xO||function qG(){var n=kt.Promise.resolve(void 0);xO=function(){n.then(KG)}}(),RO||(xO(),RO=!0),qF.add(n,e)}var RO=!1,qF=new class $G{constructor(){this.h=this.g=null}add(e,t){const r=zF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function KG(){for(var n;n=GG();){try{n.h.call(n.g)}catch(t){zG(t)}var e=zF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}RO=!1}function lI(n,e){wi.call(this),this.h=n||1,this.g=e||kt,this.j=Ki(this.kb,this),this.l=Date.now()}function PO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function kO(n,e,t){if("function"==typeof n)t&&(n=Ki(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ki(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function KF(n){n.g=kO(()=>{n.g=null,n.i&&(n.i=!1,KF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zi(lI,wi),(lt=lI.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yi(this,"tick"),this.da&&(PO(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){lI.Z.M.call(this),PO(this),delete this.g};class ZG extends Oh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:KF(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function b0(n){Oh.call(this),this.h=n,this.g={}}Zi(b0,Oh);var ZF=[];function YF(n,e,t,r){Array.isArray(t)||(t&&(ZF[0]=t.toString()),t=ZF);for(var i=0;i<t.length;i++){var a=jF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function QF(n){gO(n.g,function(e,t){this.g.hasOwnProperty(t)&&TO(e)},n),n.g={}}function uI(){this.g=!0}function Zm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function XG(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return OO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}b0.prototype.M=function(){b0.Z.M.call(this),QF(this)},b0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uI.prototype.Aa=function(){this.g=!1},uI.prototype.info=function(){};var yp={},JF=null;function cI(){return JF=JF||new wi}function XF(n){gs.call(this,yp.Ma,n)}function w0(n){const e=cI();Yi(e,new XF(e,n))}function eL(n,e){gs.call(this,yp.STAT_EVENT,n),this.stat=e}function Ls(n){const e=cI();Yi(e,new eL(e,n))}function tL(n,e){gs.call(this,yp.Na,n),this.size=e}function E0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}yp.Ma="serverreachability",Zi(XF,gs),yp.STAT_EVENT="statevent",Zi(eL,gs),yp.Na="timingevent",Zi(tL,gs);var dI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nL={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function FO(){}function iL(){}FO.prototype.h=null;var BO,D0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function LO(){gs.call(this,"d")}function VO(){gs.call(this,"c")}function hI(){}function C0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new b0(this),this.P=e$,this.W=new lI(n=_O?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sL}function sL(){this.i=null,this.g="",this.h=!1}Zi(LO,gs),Zi(VO,gs),Zi(hI,FO),hI.prototype.g=function(){return new XMLHttpRequest},hI.prototype.i=function(){return{}},BO=new hI;var e$=45e3,UO={},fI={};function jO(n,e,t){n.K=1,n.v=yI(ad(e)),n.s=t,n.U=!0,oL(n,null)}function oL(n,e){n.F=Date.now(),I0(n),n.A=ad(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),gL(t.h,"t",r),n.C=0,t=n.l.H,n.h=new sL,n.g=VL(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ZG(Ki(n.Ia,n,n.g),n.O)),YF(n.V,n.g,"readystatechange",n.gb),e=n.H?PF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),w0(1),function YG(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var D=y[0];y=y[1];var T=D.split("_");u=2<=T.length&&"type"==T[1]?u+(D+"=")+y+"&":u+(D+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function aL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function lL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=t$(n,t),i==fI){4==e&&(n.o=4,Ls(14),r=!1),Zm(n.j,n.m,null,"[Incomplete Response]");break}if(i==UO){n.o=4,Ls(15),Zm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zm(n.j,n.m,i,null),HO(n,i)}aL(n)&&i!=fI&&i!=UO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ls(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),XO(e),e.L=!0,Ls(11))):(Zm(n.j,n.m,t,"[Invalid Chunked Response]"),vp(n),T0(n))}function t$(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fI:(t=Number(e.substring(t,r)),isNaN(t)?UO:(r+=1)+t>e.length?fI:(e=e.substr(r,t),n.C=r+t,e))}function I0(n){n.Y=Date.now()+n.P,uL(n,n.P)}function uL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=E0(Ki(n.eb,n),e)}function pI(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function T0(n){0==n.l.G||n.I||PL(n.l,n)}function vp(n){pI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,PO(n.W),QF(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function HO(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||WO(t.i,n)))if(t.I=n.N,!n.J&&WO(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;CI(t),EI(t)}JO(t),Ls(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=E0(Ki(t.ab,t),6e3));if(1>=yL(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ep(t,11)}else if((n.J||t.g==n)&&CI(t),!rI(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const D=y[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const O=y[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const H=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var a=r.i;!a.g&&(ks(H,"spdy")||ks(H,"quic")||ks(H,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(zO(a,a.h),a.h=null))}if(r.D){const ee=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.sa=ee,ur(r.F,r.D,ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=LL(r,r.H?r.la:null,r.W),u.J){vL(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(pI(h),I0(h)),r.g=u}else xL(r);0<t.l.length&&DI(t)}else"stop"!=y[0]&&"close"!=y[0]||Ep(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Ep(t,7):YO(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}w0(4)}catch{}}function GO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dO(n)||"string"==typeof n)AF(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(dO(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function n$(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(dO(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Ym(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ym)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $O(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];bp(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)bp(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function bp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=C0.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==ld(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const D=ld(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>D)&&(3!=D||_O||this.g&&(this.h.h||this.g.ga()||SL(this.g)))){this.I||4!=D||7==e||w0(8==e||0>=T?3:2),pI(this);var t=this.g.ba();this.N=t;t:if(aL(this)){var r=SL(this.g);n="";var i=r.length,a=4==ld(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vp(this),T0(this);var u="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function QG(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rI(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ls(12),vp(this),T0(this);break e}Zm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,HO(this,t)}this.U?(lL(this,D,u),_O&&this.i&&3==D&&(YF(this.V,this.W,"tick",this.fb),this.W.start())):(Zm(this.j,this.m,u,null),HO(this,u)),4==D&&vp(this),this.i&&!this.I&&(4==D?PL(this.l,this):(this.i=!1,I0(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ls(12)):(this.o=0,Ls(13)),vp(this),T0(this)}}}catch{}},lt.fb=function(){if(this.g){var n=ld(this.g),e=this.g.ga();this.C<e.length&&(pI(this),lL(this,n,e),this.i&&4!=n&&I0(this))}},lt.cancel=function(){this.I=!0,vp(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function JG(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(w0(3),Ls(17)),vp(this),this.o=2,T0(this)):uL(this,this.Y-n)},(lt=Ym.prototype).R=function(){$O(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return $O(this),this.g.concat()},lt.get=function(n,e){return bp(this.h,n)?this.h[n]:e},lt.set=function(n,e){bp(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var cL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wp){this.g=void 0!==e?e:n.g,gI(this,n.j),this.s=n.s,mI(this,n.i),_I(this,n.m),this.l=n.l,e=n.h;var t=new A0;t.i=e.i,e.g&&(t.g=new Ym(e.g),t.h=e.h),dL(this,t),this.o=n.o}else n&&(t=String(n).match(cL))?(this.g=!!e,gI(this,t[1]||"",!0),this.s=S0(t[2]||""),mI(this,t[3]||"",!0),_I(this,t[4]),this.l=S0(t[5]||"",!0),dL(this,t[6]||"",!0),this.o=S0(t[7]||"")):(this.g=!!e,this.h=new A0(null,this.g))}function ad(n){return new wp(n)}function gI(n,e,t){n.j=t?S0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mI(n,e,t){n.i=t?S0(e,!0):e}function _I(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dL(n,e,t){e instanceof A0?(n.h=e,function d$(n,e){e&&!n.j&&(Mh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(fL(this,r),gL(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=N0(e,u$)),n.h=new A0(e,n.g))}function ur(n,e,t){n.h.set(e,t)}function yI(n){return ur(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function S0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function N0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,o$),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function o$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(N0(e,hL,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(N0(e,hL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(N0(t,"/"==t.charAt(0)?l$:a$,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",N0(t,c$)),n.join("")};var hL=/[#\/\?@]/g,a$=/[#\?:]/g,l$=/[#\?]/g,u$=/[#\?@]/g,c$=/#/g;function A0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Mh(n){n.g||(n.g=new Ym,n.h=0,n.i&&function r$(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fL(n,e){Mh(n),e=Qm(n,e),bp(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,bp((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$O(n)))}function pL(n,e){return Mh(n),e=Qm(n,e),bp(n.g.h,e)}function gL(n,e,t){fL(n,e),0<t.length&&(n.i=null,n.g.set(Qm(n,e),fO(t)),n.h+=t.length)}function Qm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mL(n){this.l=n||f$,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ea&&kt.g.Ea()&&kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=A0.prototype).add=function(n,e){Mh(this),this.i=null,n=Qm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){Mh(this),this.g.forEach(function(t,r){AF(t,function(i){n.call(e,i,r,this)},this)},this)},lt.T=function(){Mh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},lt.R=function(n){Mh(this);var e=[];if("string"==typeof n)pL(this,n)&&(e=OF(e,this.g.get(Qm(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=OF(e,n[t])}return e},lt.set=function(n,e){return Mh(this),this.i=null,pL(this,n=Qm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var f$=10;function _L(n){return!!n.h||!!n.g&&n.g.size>=n.j}function yL(n){return n.h?1:n.g?n.g.size:0}function WO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zO(n,e){n.g?n.g.add(e):n.h=e}function vL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return fO(n.i)}function qO(){}function p$(){this.g=new qO}function g$(n,e,t){const r=t||"";try{GO(n,function(i,a){let u=i;_0(i)&&(u=OO(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function O0(n){this.l=n.$b||null,this.j=n.ib||!1}function bI(n,e){wi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=KO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mL.prototype.cancel=function(){if(this.i=bL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},qO.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},qO.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Zi(O0,FO),O0.prototype.g=function(){return new bI(this.l,this.j)},O0.prototype.i=function(n){return function(){return n}}({}),Zi(bI,wi);var KO=0;function wL(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function M0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,x0(n)}function x0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=bI.prototype).open=function(n,e){if(this.readyState!=KO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,x0(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,M0(this)),this.readyState=KO},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,x0(this)),this.g&&(this.readyState=3,x0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wL(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?M0(this):x0(this),3==this.readyState&&wL(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,M0(this))},lt.Ta=function(n){this.g&&(this.response=n,M0(this))},lt.ha=function(){this.g&&M0(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _$=kt.JSON.parse;function $r(n){wi.call(this),this.headers=new Ym,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=EL,this.K=this.L=!1}Zi($r,wi);var EL="",y$=/^https?$/i,v$=["POST","PUT"];function w$(n){return"content-type"==n.toLowerCase()}function DL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,CL(n),wI(n)}function CL(n){n.D||(n.D=!0,Yi(n,"complete"),Yi(n,"error"))}function IL(n){if(n.h&&typeof cO<"u"&&(!n.C[1]||4!=ld(n)||2!=n.ba()))if(n.v&&4==ld(n))kO(n.Fa,0,n);else if(Yi(n,"readystatechange"),4==ld(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(cL)[1]||null;if(!i&&kt.self&&kt.self.location){var a=kt.self.location.protocol;i=a.substr(0,a.length-1)}r=!y$.test(i?i.toLowerCase():"")}t=r}if(t)Yi(n,"complete"),Yi(n,"success");else{n.m=6;try{var u=2<ld(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",CL(n)}}finally{wI(n)}}}function wI(n,e){if(n.g){TL(n);const t=n.g,r=n.C[0]?tI:null;n.g=null,n.C=null,e||Yi(n,"ready");try{t.onreadystatechange=r}catch{}}}function TL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function ld(n){return n.g?n.g.readyState:0}function SL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case EL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ZO(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function E$(n){let e="";return gO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ur(n,e,t))}function R0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NL(n){this.za=0,this.l=[],this.h=new uI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=R0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=R0("baseRetryDelayMs",5e3,n),this.$a=R0("retryDelaySeedMs",1e4,n),this.Ya=R0("forwardChannelMaxRetries",2,n),this.ra=R0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new mL(n&&n.concurrentRequestLimit),this.Ca=new p$,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function YO(n){if(AL(n),3==n.G){var e=n.V++,t=ad(n.F);ur(t,"SID",n.J),ur(t,"RID",e),ur(t,"TYPE","terminate"),P0(n,t),(e=new C0(n,n.h,e,void 0)).K=2,e.v=yI(ad(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=VL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),I0(e)}FL(n)}function EI(n){n.g&&(XO(n),n.g.cancel(),n.g=null)}function AL(n){EI(n),n.u&&(kt.clearTimeout(n.u),n.u=null),CI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function QO(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&DI(n)}function DI(n){_L(n.i)||n.m||(n.m=!0,MO(n.Ha,n),n.C=0)}function OL(n,e){var t;t=e?e.m:n.V++;const r=ad(n.F);ur(r,"SID",n.J),ur(r,"RID",t),ur(r,"AID",n.U),P0(n,r),n.o&&n.s&&ZO(r,n.o,n.s),t=new C0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ML(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),zO(n.i,t),jO(t,r,e)}function P0(n,e){n.j&&GO({},function(t,r){ur(e,r,t)})}function ML(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ki(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let y=i[m].h;const D=i[m].g;if(y-=a,0>y)a=Math.max(0,i[m].h-100),h=!1;else try{g$(D,u,"req"+y+"_")}catch{r&&r(D)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function xL(n){n.g||n.u||(n.Y=1,MO(n.Ga,n),n.A=0)}function JO(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=E0(Ki(n.Ga,n),kL(n,n.A)),n.A++,0))}function XO(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function RL(n){n.g=new C0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ad(n.oa);ur(e,"RID","rpc"),ur(e,"SID",n.J),ur(e,"CI",n.N?"0":"1"),ur(e,"AID",n.U),P0(n,e),ur(e,"TYPE","xmlhttp"),n.o&&n.s&&ZO(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=yI(ad(e)),t.s=null,t.U=!0,oL(t,n)}function CI(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function PL(n,e){var t=null;if(n.g==e){CI(n),XO(n),n.g=null;var r=2}else{if(!WO(n.i,e))return;t=e.D,vL(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Yi(r=cI(),new tL(r,t,e,i)),DI(n)}else xL(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function D$(n,e){return!(yL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=E0(Ki(n.Ha,n,e),kL(n,n.C)),n.C++,0)))}(n,e)||2==r&&JO(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ep(n,5);break;case 4:Ep(n,10);break;case 3:Ep(n,6);break;default:Ep(n,2)}}function kL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ep(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ki(n.jb,n);t||(t=new wp("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||gI(t,"https"),yI(t)),function m$(n,e){const t=new uI;if(kt.Image){const r=new Image;r.onload=nI(vI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nI(vI,t,r,"TestLoadImage: error",!1,e),r.onabort=nI(vI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nI(vI,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ls(2);n.G=0,n.j&&n.j.va(e),FL(n),AL(n)}function FL(n){n.G=0,n.I=-1,n.j&&((0!=bL(n.i).length||0!=n.l.length)&&(n.i.i.length=0,fO(n.l),n.l.length=0),n.j.ua())}function LL(n,e,t){let r=function i$(n){return n instanceof wp?ad(n):new wp(n,void 0)}(t);if(""!=r.i)e&&mI(r,e+"."+r.i),_I(r,r.m);else{const i=kt.location;r=function s$(n,e,t,r){var i=new wp(null,void 0);return n&&gI(i,n),e&&mI(i,e),t&&_I(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&gO(n.aa,function(i,a){ur(r,a,i)}),t=n.sa,(e=n.D)&&t&&ur(r,e,t),ur(r,"VER",n.ma),P0(n,r),r}function VL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $r(t&&n.Ba&&!n.qa?new O0({ib:!0}):n.qa)).L=n.H,e}function BL(){}function II(){if(Km&&!(10<=Number(FG)))throw Error("Environmental error: no available transport.")}function ra(n,e){wi.call(this),this.g=new NL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!rI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jm(this)}function UL(n){LO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jL(){VO.call(this),this.status=1}function Jm(n){this.g=n}(lt=$r.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():BO.g(),this.C=function rL(n){return n.h||(n.h=n.i())}(this.u?this.u:BO),this.g.onreadystatechange=Ki(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void DL(this,a)}n=t||"";const i=new Ym(this.headers);r&&GO(r,function(a,u){i.set(u,a)}),r=function OG(n){e:{var e=w$;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=kt.FormData&&n instanceof kt.FormData,!(0<=NF(v$,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{TL(this),0<this.B&&((this.K=function b$(n){return Km&&function kG(){return function MG(n){var e=PG;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=MF(String(iI)).split("."),t=MF("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=pO(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||pO(0==i[2].length,0==a[2].length)||pO(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ki(this.pa,this)):this.A=kO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){DL(this,a)}},lt.pa=function(){typeof cO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yi(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yi(this,"complete"),Yi(this,"abort"),wI(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wI(this,!0)),$r.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?IL(this):this.cb())},lt.cb=function(){IL(this)},lt.ba=function(){try{return 2<ld(this)?this.g.status:-1}catch{return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_$(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=NL.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new C0(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=PF(a),FF(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ML(this,i,e),ur(t=ad(this.F),"RID",n),ur(t,"CVER",22),this.D&&ur(t,"X-HTTP-Session-Id",this.D),P0(this,t),this.o&&a&&ZO(t,this.o,a),zO(this.i,i),this.Ra&&ur(t,"TYPE","init"),this.ja?(ur(t,"$req",e),ur(t,"SID","null"),i.$=!0,jO(i,t,null)):jO(i,t,e),this.G=2}}else 3==this.G&&(n?OL(this,n):0==this.l.length||_L(this.i)||OL(this))},lt.Ga=function(){if(this.u=null,RL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=E0(Ki(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ls(10),EI(this),RL(this))},lt.ab=function(){null!=this.v&&(this.v=null,EI(this),JO(this),Ls(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ls(2)):(this.h.info("Failed to ping google.com"),Ls(1))},(lt=BL.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},II.prototype.g=function(n,e){return new ra(n,e)},Zi(ra,wi),ra.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),MO(Ki(n.hb,n,e))),Ls(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=LL(n,null,n.W),DI(n)},ra.prototype.close=function(){YO(this.g)},ra.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,QO(this.g,e)}else this.v?((e={}).__data__=OO(n),QO(this.g,e)):QO(this.g,n)},ra.prototype.M=function(){this.g.j=null,delete this.j,YO(this.g),delete this.g,ra.Z.M.call(this)},Zi(UL,LO),Zi(jL,VO),Zi(Jm,BL),Jm.prototype.xa=function(){Yi(this.g,"a")},Jm.prototype.wa=function(n){Yi(this.g,new UL(n))},Jm.prototype.va=function(n){Yi(this.g,new jL(n))},Jm.prototype.ua=function(){Yi(this.g,"b")},II.prototype.createWebChannel=II.prototype.g,ra.prototype.send=ra.prototype.u,ra.prototype.open=ra.prototype.m,ra.prototype.close=ra.prototype.close,dI.NO_ERROR=0,dI.TIMEOUT=8,dI.HTTP_ERROR=6,nL.COMPLETE="complete",iL.EventType=D0,D0.OPEN="a",D0.CLOSE="b",D0.ERROR="c",D0.MESSAGE="d",wi.prototype.listen=wi.prototype.N,$r.prototype.listenOnce=$r.prototype.O,$r.prototype.getLastError=$r.prototype.La,$r.prototype.getLastErrorCode=$r.prototype.Da,$r.prototype.getStatus=$r.prototype.ba,$r.prototype.getResponseJson=$r.prototype.Qa,$r.prototype.getResponseText=$r.prototype.ga,$r.prototype.send=$r.prototype.ea;var C$=od.createWebChannelTransport=function(){return new II},I$=od.getStatEventTarget=function(){return cI()},eM=od.ErrorCode=dI,T$=od.EventType=nL,S$=od.Event=yp,HL=od.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},N$=od.FetchXmlHttpFactory=O0,TI=od.WebChannel=iL,A$=od.XhrIo=$r;const GL="@firebase/firestore";class Ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let Xm="9.9.1";const xh=new tl.Yd("@firebase/firestore");function tM(){return xh.logLevel}function Fe(n,...e){if(xh.logLevel<=tl.in.DEBUG){const t=e.map(nM);xh.debug(`Firestore (${Xm}): ${n}`,...t)}}function Wr(n,...e){if(xh.logLevel<=tl.in.ERROR){const t=e.map(nM);xh.error(`Firestore (${Xm}): ${n}`,...t)}}function k0(n,...e){if(xh.logLevel<=tl.in.WARN){const t=e.map(nM);xh.warn(`Firestore (${Xm}): ${n}`,...t)}}function nM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Xm}) INTERNAL ASSERTION FAILED: `+n;throw Wr(e),new Error(e)}function At(n,e){n||ut()}function Qe(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $L{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ei.UNAUTHENTICATED))}shutdown(){}}class R${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class P${constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Di,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,Ee.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},m=y=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Di)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new $L(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Ei(e)}}class k${constructor(e,t,r){this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class F${constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new k$(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L${constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new WL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function V$(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class zL{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=V$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function e_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qL(n){return n+"\0"}class cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new cr(0,0))}static max(){return new St(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class F0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===F0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof F0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends F0{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const B$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends F0{construct(e,t,r){return new Lr(e,t,r)}static isValidIdentifier(e){return B$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(t)}static emptyPath(){return new Lr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(an.fromString(e))}static fromName(e){return new Ze(an.fromString(e).popFirst(5))}static empty(){return new Ze(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new an(e.slice()))}}class SI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rM(n){return n.fields.find(e=>2===e.kind)}function Dp(n){return n.fields.filter(e=>2!==e.kind)}SI.UNKNOWN_ID=-1;class NI{constructor(e,t){this.fieldPath=e,this.kind=t}}class L0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new L0(0,ia.min())}}function KL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new cr(t+1,0):new cr(t,r));return new ia(i,Ze.empty(),e)}function ZL(n){return new ia(n.readTime,n.key,-1)}class ia{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ia(St.min(),Ze.empty(),-1)}static max(){return new ia(St.max(),Ze.empty(),-1)}}function iM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const YL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Rh(n){return sM.apply(this,arguments)}function sM(){return sM=(0,Ee.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==YL)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),sM.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,u=new Array(a);let h=0;for(let m=0;m<a;m++){const y=m;t(e[y]).next(D=>{u[y]=D,++h,h===a&&r(u)},D=>i(D))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class AI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Di,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new V0(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=oM(r.target.error);this.T.reject(new V0(e,i))}}static open(e,t,r,i){try{return new AI(t,e.transaction(i,r))}catch(a){throw new V0(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new j$(t)}}class ql{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===ql.v((0,P.z$)())&&Wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Cp(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,P.hl)())return!1;if(ql.S())return!0;const e=(0,P.z$)(),t=ql.v(e),r=0<t&&t<10,i=ql.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new V0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Re(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Re(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new V0(e,h))},a.onupgradeneeded=u=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.P.O(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.k(e);const m=AI.open(a.db,e,u?"readonly":"readwrite",r),y=i(m).next(D=>(m.R(),D)).catch(D=>(m.abort(D),ue.reject(D))).toPromise();return y.catch(()=>{}),yield m.A,y}catch(m){const y=m,D="FirebaseError"!==y.name&&h<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",D),a.close(),!D)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class U${constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Cp(this.$.delete())}}class V0 extends Re{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ph(n){return"IndexedDbTransactionError"===n.name}class j${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cp(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Cp(this.store.add(e))}get(e){return Cp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Cp(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Cp(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(u,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}W(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,u,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const u=oM(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}G(e,t){const r=[];return new ue((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const m=new U$(h),y=t(h.primaryKey,h.value,m);if(y instanceof ue){const D=y.catch(T=>(m.done(),ue.reject(T)));r.push(D)}m.isDone?i():null===m.U?h.continue():h.continue(m.U)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cp(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=oM(r.target.error);t(i)}})}let JL=!1;function oM(n){const e=ql.v((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JL||(JL=!0,setTimeout(()=>{throw r},0)),r}}return n}class H${constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Ph(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Rh(r)}yield t.Z(1)}))}}class G${constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Fe("IndexBackiller",`Processing collection: ${u}`),this.nt(e,u,i).next(h=>{i-=h,r.add(u)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.st(i,a)).next(h=>(Fe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=ZL(a);iM(u,r)>0&&(r=u)}),new ia(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class go{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function XL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ip(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}go.ot=-1;class Sr{constructor(e,t){this.comparator=e,this.root=t||Qi.EMPTY}insert(e,t){return new Sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new Sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new OI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new OI(this.root,e,this.comparator,!1)}getReverseIterator(){return new OI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new OI(this.root,e,this.comparator,!0)}}class OI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Qi.RED,this.left=i??Qi.EMPTY,this.right=a??Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Qi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1,Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Qi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new Sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tV(this.data.getIterator())}getIteratorFrom(e){return new tV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class tV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function t_(n){return n.hasNext()?n.getNext():void 0}class sa{constructor(e){this.fields=e,e.sort(Lr.comparator)}static empty(){return new sa([])}unionWith(e){let t=new In(Lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return e_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ni(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const W$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kh(n){if(At(!!n),"string"==typeof n){let e=0;const t=W$.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nr(n.seconds),nanos:Nr(n.nanos)}}function Nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Tp(n){return"string"==typeof n?ni.fromBase64String(n):ni.fromUint8Array(n)}function aM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nV(n){const e=n.mapValue.fields.__previous_value__;return aM(e)?nV(e):e}function B0(n){const e=kh(n.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}class z${constructor(e,t,r,i,a,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class ud{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ud("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ud&&e.projectId===this.projectId&&e.database===this.database}}function U0(n){return null==n}function j0(n){return 0===n&&1/n==-1/0}function rV(n){return"number"==typeof n&&Number.isInteger(n)&&!j0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},MI={nullValue:"NULL_VALUE"};function Sp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aM(n)?4:aV(n)?9007199254740991:10:ut()}function Yu(n,e){if(n===e)return!0;const t=Sp(n);if(t!==Sp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return B0(n).isEqual(B0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=kh(r.timestampValue),u=kh(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Tp(n.bytesValue).isEqual(Tp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Nr(r.geoPointValue.latitude)===Nr(i.geoPointValue.latitude)&&Nr(r.geoPointValue.longitude)===Nr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Nr(r.integerValue)===Nr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Nr(r.doubleValue),u=Nr(i.doubleValue);return a===u?j0(a)===j0(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return e_(n.arrayValue.values||[],e.arrayValue.values||[],Yu);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(XL(a)!==XL(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!Yu(a[h],u[h])))return!1;return!0}(n,e);default:return ut()}var i}function H0(n,e){return void 0!==(n.values||[]).find(t=>Yu(t,e))}function Lh(n,e){if(n===e)return 0;const t=Sp(n),r=Sp(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Nr(i.integerValue||i.doubleValue),h=Nr(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return iV(n.timestampValue,e.timestampValue);case 4:return iV(B0(n),B0(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Tp(i),h=Tp(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),h=a.split("/");for(let m=0;m<u.length&&m<h.length;m++){const y=jt(u[m],h[m]);if(0!==y)return y}return jt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=jt(Nr(i.latitude),Nr(a.latitude));return 0!==u?u:jt(Nr(i.longitude),Nr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],h=a.values||[];for(let m=0;m<u.length&&m<h.length;++m){const y=Lh(u[m],h[m]);if(y)return y}return jt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Fh.mapValue&&a===Fh.mapValue)return 0;if(i===Fh.mapValue)return 1;if(a===Fh.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),m=a.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let D=0;D<h.length&&D<y.length;++D){const T=jt(h[D],y[D]);if(0!==T)return T;const O=Lh(u[h[D]],m[y[D]]);if(0!==O)return O}return jt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ut()}}function iV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=kh(n),r=kh(e),i=jt(t.seconds,r.seconds);return 0!==i?i:jt(t.nanos,r.nanos)}function n_(n){return lM(n)}function lM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=kh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Tp(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=lM(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${lM(r.fields[h])}`;return a+"}"}(n.mapValue):ut();var e}function Np(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uM(n){return!!n&&"integerValue"in n}function G0(n){return!!n&&"arrayValue"in n}function sV(n){return!!n&&"nullValue"in n}function oV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xI(n){return!!n&&"mapValue"in n}function $0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ip(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function q$(n){return"nullValue"in n?MI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Np(ud.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function K$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Np(ud.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fh:ut()}function lV(n,e){const t=Lh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function uV(n,e){const t=Lh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ji{constructor(e){this.value=e}static empty(){return new Ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$0(t)}setAll(e){let t=Lr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=$0(u):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());xI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ip(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ji($0(this.value))}}function cV(n){const e=[];return Ip(n.fields,(t,r)=>{const i=new Lr([t]);if(xI(r)){const a=cV(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new sa(e)}class $n{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new $n(e,0,St.min(),St.min(),Ji.empty(),0)}static newFoundDocument(e,t,r){return new $n(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new $n(e,2,t,St.min(),Ji.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,St.min(),Ji.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Z${constructor(e,t=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.ut=null}}function dV(n,e=null,t=[],r=[],i=null,a=null,u=null){return new Z$(n,e,t,r,i,a,u)}function Ap(n){const e=Qe(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+n_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),U0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>n_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>n_(r)).join(",")),e.ut=t}return e.ut}function W0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!s3(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Yu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mV(n.startAt,e.startAt)&&mV(n.endAt,e.endAt)}function RI(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function PI(n,e){return n.filters.filter(t=>t instanceof Xi&&t.field.isEqual(e))}function hV(n,e,t){let r=MI,i=!0;for(const a of PI(n,e)){let u=MI,h=!0;switch(a.op){case"<":case"<=":u=q$(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,h=!1;break;case"!=":case"not-in":u=MI}lV({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];lV({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function fV(n,e,t){let r=Fh,i=!0;for(const a of PI(n,e)){let u=Fh,h=!0;switch(a.op){case">=":case">":u=K$(a.value),h=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,h=!1;break;case"!=":case"not-in":u=Fh}uV({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];uV({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Xi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Q$(e,t,r):"array-contains"===t?new e3(e,r):"in"===t?new t3(e,r):"not-in"===t?new n3(e,r):"array-contains-any"===t?new r3(e,r):new Xi(e,t,r)}static ct(e,t,r){return"in"===t?new J$(e,r):new X$(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Lh(t,this.value)):null!==t&&Sp(this.value)===Sp(t)&&this.at(Lh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Q$ extends Xi{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.at(t)}}class J$ extends Xi{constructor(e,t){super(e,"in",t),this.keys=pV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class X$ extends Xi{constructor(e,t){super(e,"not-in",t),this.keys=pV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class e3 extends Xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return G0(t)&&H0(t.arrayValue,this.value)}}class t3 extends Xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&H0(this.value.arrayValue,t)}}class n3 extends Xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(H0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!H0(this.value.arrayValue,t)}}class r3 extends Xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!G0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>H0(this.value.arrayValue,r))}}class Vh{constructor(e,t){this.position=e,this.inclusive=t}}class r_{constructor(e,t="asc"){this.field=e,this.dir=t}}function s3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function gV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(u.referenceValue),t.key):Lh(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yu(n.position[t],e.position[t]))return!1;return!0}class cd{constructor(e,t=null,r=[],i=[],a=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=m,this.lt=null,this.ft=null}}function _V(n,e,t,r,i,a,u,h){return new cd(n,e,t,r,i,a,u,h)}function i_(n){return new cd(n)}function cM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dM(n){for(const e of n.filters)if(e.ht())return e.field;return null}function hM(n){return null!==n.collectionGroup}function s_(n){const e=Qe(n);if(null===e.lt){e.lt=[];const t=dM(e),r=cM(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new r_(t)),e.lt.push(new r_(Lr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new r_(Lr.keyField(),a))}}}return e.lt}function nl(n){const e=Qe(n);if(!e.ft)if("F"===e.limitType)e.ft=dV(e.path,e.collectionGroup,s_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of s_(e))t.push(new r_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Vh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Vh(e.startAt.position,e.startAt.inclusive):null;e.ft=dV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function yV(n,e,t){return new cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function z0(n,e){return W0(nl(n),nl(e))&&n.limitType===e.limitType}function vV(n){return`${Ap(nl(n))}|lt:${n.limitType}`}function fM(n){return`Query(target=${function Y$(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${n_(r.value)}`;var r}).join(", ")}]`),U0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>n_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>n_(t)).join(",")),`Target(${e})`}(nl(n))}; limitType=${n.limitType})`}function pM(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const h=gV(i,a,u);return i.inclusive?h<=0:h<0}(t.startAt,s_(t),r)||t.endAt&&!function(i,a,u){const h=gV(i,a,u);return i.inclusive?h>=0:h>0}(t.endAt,s_(t),r)));var t,r}function bV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wV(n){return(e,t)=>{let r=!1;for(const i of s_(n)){const a=a3(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function a3(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,u){const h=a.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Lh(h,m):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function EV(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:j0(e)?"-0":e}}function DV(n){return{integerValue:""+n}}function CV(n,e){return rV(e)?DV(e):EV(n,e)}class kI{constructor(){this._=void 0}}function l3(n,e,t){return n instanceof o_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Op?TV(n,e):n instanceof Mp?SV(n,e):function(r,i){const a=IV(r,i),u=NV(a)+NV(r._t);return uM(a)&&uM(r._t)?DV(u):EV(r.wt,u)}(n,e)}function u3(n,e,t){return n instanceof Op?TV(n,e):n instanceof Mp?SV(n,e):t}function IV(n,e){return n instanceof a_?uM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class o_ extends kI{}class Op extends kI{constructor(e){super(),this.elements=e}}function TV(n,e){const t=AV(e);for(const r of n.elements)t.some(i=>Yu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mp extends kI{constructor(e){super(),this.elements=e}}function SV(n,e){let t=AV(e);for(const r of n.elements)t=t.filter(i=>!Yu(i,r));return{arrayValue:{values:t}}}class a_ extends kI{constructor(e,t){super(),this.wt=e,this._t=t}}function NV(n){return Nr(n.integerValue||n.doubleValue)}function AV(n){return G0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class q0{constructor(e,t){this.field=e,this.transform=t}}class d3{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function FI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class LI{}function OV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new u_(n.key,vr.none()):new l_(n.key,n.data,vr.none());{const t=n.data,r=Ji.empty();let i=new In(Lr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new dd(n.key,r,new sa(i.toArray()),vr.none())}}function h3(n,e,t){n instanceof l_?function(r,i,a){const u=r.value.clone(),h=RV(r.fieldTransforms,i,a.transformResults);u.setAll(h),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof dd?function(r,i,a){if(!FI(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=RV(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(xV(r)),h.setAll(u),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function K0(n,e,t,r){return n instanceof l_?function(i,a,u,h){if(!FI(i.precondition,a))return u;const m=i.value.clone(),y=PV(i.fieldTransforms,h,a);return m.setAll(y),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof dd?function(i,a,u,h){if(!FI(i.precondition,a))return u;const m=PV(i.fieldTransforms,h,a),y=a.data;return y.setAll(xV(i)),y.setAll(m),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(u=t,FI(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function f3(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=IV(r.transform,i||null);null!=a&&(null===t&&(t=Ji.empty()),t.set(r.field,a))}return t||null}function MV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&e_(t,r,(i,a)=>function c3(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Op&&r instanceof Op||t instanceof Mp&&r instanceof Mp?e_(t.elements,r.elements,Yu):t instanceof a_&&r instanceof a_?Yu(t._t,r._t):t instanceof o_&&r instanceof o_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class l_ extends LI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dd extends LI{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function RV(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,u3(u,h,t[i]))}return r}function PV(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,l3(a,u,e))}return r}class u_ extends LI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gM extends LI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class p3{constructor(e){this.count=e}}var zr,ln;function kV(n){switch(n){default:return ut();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function FV(n){if(void 0===n)return Wr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case zr.OK:return ge.OK;case zr.CANCELLED:return ge.CANCELLED;case zr.UNKNOWN:return ge.UNKNOWN;case zr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case zr.INTERNAL:return ge.INTERNAL;case zr.UNAVAILABLE:return ge.UNAVAILABLE;case zr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case zr.NOT_FOUND:return ge.NOT_FOUND;case zr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case zr.ABORTED:return ge.ABORTED;case zr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case zr.DATA_LOSS:return ge.DATA_LOSS;default:return ut()}}(ln=zr||(zr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class Bh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ip(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return eV(this.inner)}size(){return this.innerSize}}const g3=new Sr(Ze.comparator);function mo(){return g3}const LV=new Sr(Ze.comparator);function Z0(...n){let e=LV;for(const t of n)e=e.insert(t.key,t);return e}function VV(n){let e=LV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qu(){return Y0()}function BV(){return Y0()}function Y0(){return new Bh(n=>n.toString(),(n,e)=>n.isEqual(e))}const m3=new Sr(Ze.comparator),_3=new In(Ze.comparator);function Gt(...n){let e=_3;for(const t of n)e=e.add(t);return e}const y3=new In(jt);function VI(){return y3}class Q0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,J0.createSynthesizedTargetChangeForCurrentChange(e,t)),new Q0(St.min(),r,VI(),mo(),Gt())}}class J0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new J0(ni.EMPTY_BYTE_STRING,t,Gt(),Gt(),Gt())}}class BI{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class UV{constructor(e,t){this.targetId=e,this.It=t}}class jV{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class HV{constructor(){this.Tt=0,this.Et=$V(),this.At=ni.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Gt(),t=Gt(),r=Gt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new J0(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=$V()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class v3{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=mo(),this.Bt=GV(),this.Lt=new In(jt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(RI(a))if(0===r){const u=new Ze(a.path);this.Kt(t,u,$n.newNoDocument(u,St.min()))}else At(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,u)=>{const h=this.Ht(u);if(h){if(a.current&&RI(h.target)){const m=new Ze(h.target.path);null!==this.$t.get(m)||this.Xt(u,m)||this.Kt(u,m,$n.newNoDocument(m,e))}a.vt&&(t.set(u,a.St()),a.Dt())}});let r=Gt();this.Bt.forEach((a,u)=>{let h=!0;u.forEachWhile(m=>{const y=this.Ht(m);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.$t.forEach((a,u)=>u.setReadTime(e));const i=new Q0(e,t,this.Lt,this.$t,r);return this.$t=mo(),this.Bt=GV(),this.Lt=new In(jt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new HV,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new In(jt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new HV),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function GV(){return new Sr(Ze.comparator)}function $V(){return new Sr(Ze.comparator)}const b3={asc:"ASCENDING",desc:"DESCENDING"},w3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class E3{constructor(e,t){this.databaseId=e,this.dt=t}}function X0(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WV(n,e){return n.dt?e.toBase64():e.toUint8Array()}function D3(n,e){return X0(n,e.toTimestamp())}function Ci(n){return At(!!n),St.fromTimestamp(function(e){const t=kh(e);return new cr(t.seconds,t.nanos)}(n))}function mM(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zV(n){const e=an.fromString(n);return At(t2(e)),e}function eb(n,e){return mM(n.databaseId,e.path)}function Ju(n,e){const t=zV(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(KV(t))}function _M(n,e){return mM(n.databaseId,e)}function qV(n){const e=zV(n);return 4===e.length?an.emptyPath():KV(e)}function tb(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KV(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ZV(n,e,t){return{name:eb(n,e),fields:t.value.mapValue.fields}}function YV(n,e,t){const r=Ju(n,e.name),i=Ci(e.updateTime),a=new Ji({mapValue:{fields:e.fields}}),u=$n.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function nb(n,e){let t;if(e instanceof l_)t={update:ZV(n,e.key,e.value)};else if(e instanceof u_)t={delete:eb(n,e.key)};else if(e instanceof dd)t={update:ZV(n,e.key,e.data),updateMask:x3(e.fieldMask)};else{if(!(e instanceof gM))return ut();t={verify:eb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof o_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Op)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Mp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof a_)return{fieldPath:a.field.canonicalString(),increment:u._t};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:D3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function yM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?vr.updateTime(Ci(i.updateTime)):void 0!==i.exists?vr.exists(i.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let h=null;"setToServerValue"in u?(At("REQUEST_TIME"===u.setToServerValue),h=new o_):"appendMissingElements"in u?h=new Op(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Mp(u.removeAllFromArray.values||[]):"increment"in u?h=new a_(a,u.increment):ut();const m=Lr.fromServerFormat(u.fieldPath);return new q0(m,h)}(n,i)):[];var i;if(e.update){const i=Ju(n,e.update.name),a=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new sa((e.updateMask.fieldPaths||[]).map(y=>Lr.fromServerFormat(y)));return new dd(i,a,u,t,r)}return new l_(i,a,t,r)}if(e.delete){const i=Ju(n,e.delete);return new u_(i,t)}if(e.verify){const i=Ju(n,e.verify);return new gM(i,t)}return ut()}function QV(n,e){return{documents:[_M(n,e.path)]}}function JV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_M(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_M(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const y=m.map(D=>function(T){if("=="===T.op){if(oV(T.value))return{unaryFilter:{field:c_(T.field),op:"IS_NAN"}};if(sV(T.value))return{unaryFilter:{field:c_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(oV(T.value))return{unaryFilter:{field:c_(T.field),op:"IS_NOT_NAN"}};if(sV(T.value))return{unaryFilter:{field:c_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:c_(T.field),op:A3(T.op),value:T.value}}}(D));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(y=>{return{field:c_((D=y).field),direction:N3(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(y=e.limit,n.dt||U0(y)?y:{value:y});var y,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function XV(n){let e=qV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=e2(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(D=>{return new r_(d_((T=D).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(D){let T;return T="object"==typeof D?D.value:D,U0(T)?null:T}(t.limit));let m=null;var D;t.startAt&&(m=new Vh((D=t.startAt).values||[],!!D.before));let y=null;return t.endAt&&(y=function(D){return new Vh(D.values||[],!D.before)}(t.endAt)),_V(e,i,u,a,h,"F",m,y)}function e2(n){return n?void 0!==n.unaryFilter?[M3(n)]:void 0!==n.fieldFilter?[O3(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>e2(e)).reduce((e,t)=>e.concat(t)):ut():[]}function N3(n){return b3[n]}function A3(n){return w3[n]}function c_(n){return{fieldPath:n.canonicalString()}}function d_(n){return Lr.fromServerFormat(n.fieldPath)}function O3(n){return Xi.create(d_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function M3(n){switch(n.unaryFilter.op){case"IS_NAN":const e=d_(n.unaryFilter.field);return Xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=d_(n.unaryFilter.field);return Xi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=d_(n.unaryFilter.field);return Xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=d_(n.unaryFilter.field);return Xi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function x3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=n2(e)),e=R3(n.get(t),e);return n2(e)}function R3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function n2(n){return n+"\x01\x01"}function Xu(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&ut(),n.charAt(u+1)){case"\x01":const h=n.substring(a,u);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:ut()}a=u+2}return new an(r)}const r2=["userId","batchId"];function UI(n,e){return[n,Vs(e)]}function s2(n,e,t){return[n,Vs(e),t]}const P3={},k3=["prefixPath","collectionGroup","readTime","documentId"],F3=["prefixPath","collectionGroup","documentId"],L3=["collectionGroup","readTime","prefixPath","documentId"],V3=["canonicalId","targetId"],B3=["targetId","path"],U3=["path","targetId"],j3=["collectionId","parent"],H3=["indexId","uid"],G3=["uid","sequenceNumber"],$3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W3=["indexId","uid","orderedDocumentKey"],z3=["userId","collectionPath","documentId"],q3=["userId","collectionPath","largestBatchId"],K3=["userId","collectionGroup","largestBatchId"],o2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z3=[...o2,"documentOverlays"],a2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],l2=a2,Y3=[...l2,"indexConfiguration","indexState","indexEntries"];class vM extends QL{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ii(n,e){const t=Qe(n);return ql.N(t.ee,e)}class bM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&h3(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=K0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=K0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BV();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(i.key)?null:h;const m=OV(u,h);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&e_(this.mutations,e.mutations,(t,r)=>MV(t,r))&&e_(this.baseMutations,e.baseMutations,(t,r)=>MV(t,r))}}class wM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=m3;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new wM(e,t,r,i)}}class EM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uh{constructor(e,t,r,i,a=St.min(),u=St.min(),h=ni.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class u2{constructor(e){this.ne=e}}function c2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:eb(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:X0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xp(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:xp(e.version)}}var i,a;return r}function jI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rp(n){const e=new cr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Pp(n,e){const t=(e.baseMutations||[]).map(a=>yM(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>yM(n.ne,a)),i=cr.fromMillis(e.localWriteTimeMs);return new bM(e.batchId,i,t,r)}function rb(n){const e=Rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rp(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=nl(i_(qV(i.documents[0])))):r=nl(XV(n.query)),new Uh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ni.fromBase64String(n.resumeToken))}function d2(n,e){const t=xp(e.snapshotVersion),r=xp(e.lastLimboFreeSnapshotVersion);let i;i=RI(e.target)?QV(n.ne,e.target):JV(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ap(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function DM(n){const e=XV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yV(e,e.limit,"L"):e}function CM(n,e){return new EM(e.largestBatchId,yM(n.ne,e.overlayMutation))}function h2(n,e){const t=e.path.lastSegment();return[n,Vs(e.path.popLast()),t]}function f2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xp(r.readTime),documentKey:Vs(r.documentKey.path),largestBatchId:r.largestBatchId}}class J3{getBundleMetadata(e,t){return p2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return p2(e).put({bundleId:(r=t).id,createTime:xp(Ci(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return g2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:DM(i.bundledQuery),readTime:Rp(i.readTime)};var i})}saveNamedQuery(e,t){return g2(e).put({name:(r=t).name,readTime:xp(Ci(r.readTime)),bundledQuery:r.bundledQuery});var r}}function p2(n){return Ii(n,"bundles")}function g2(n){return Ii(n,"namedQueries")}class HI{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new HI(e,t.uid||"")}getOverlay(e,t){return ib(e).get(h2(this.userId,t)).next(r=>r?CM(this.wt,r):null)}getOverlays(e,t){const r=Qu();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const h=new EM(t,u);i.push(this.ie(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Vs(u.getCollectionPath())));const a=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(ib(e).W("collectionPathOverlayIndex",h))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Qu(),a=Vs(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ib(e).K("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const y=CM(this.wt,m);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Qu();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ib(e).J({index:"collectionGroupOverlayIndex",range:h},(m,y,D)=>{const T=CM(this.wt,y);a.size()<i||T.largestBatchId===u?(a.set(T.getKey(),T),u=T.largestBatchId):D.done()}).next(()=>a)}ie(e,t){return ib(e).put(function(r,i,a){const[u,h,m]=h2(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:nb(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function ib(n){return Ii(n,"documentOverlays")}class kp{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Nr(e.integerValue));else if("doubleValue"in e){const r=Nr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),j0(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Tp(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?aV(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ut()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Ze.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function X3(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function m2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=X3(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}kp.ye=new kp;class eW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=m2(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=m2(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class tW{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class nW{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class sb{constructor(){this.Me=new eW,this.Fe=new tW(this.Me),this.$e=new nW(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fp(this.indexId,this.documentKey,this.arrayValue,r)}}function Lp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_2(n.arrayValue,e.arrayValue),0!==t?t:(t=_2(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function _2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class rW{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=rM(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Dp(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const u=r[i];if(!this.je(this.Ke,u)||!this.We(this.Ue[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],u))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class iW{constructor(){this.ze=new IM}addToCollectionParentIndex(e,t){return this.ze.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(ia.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class IM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(an.comparator)).toArray()}}const GI=new Uint8Array(0);class sW{constructor(e,t){this.user=e,this.databaseId=t,this.He=new IM,this.Je=new Bh(r=>Ap(r),(r,i)=>W0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Vs(i)};return y2(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qL(t),""],!1,!0);return y2(e).K(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Xu(u.parent))}return r})}addFieldIndex(e,t){const r=$I(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=ab(e);return a.next(h=>{u.put(f2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=$I(e),i=ab(e),a=ob(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ob(e);let i=!0;const a=new Map;return ue.forEach(this.Ye(t),u=>this.Xe(e,u).next(h=>{i&&(i=!!h),a.set(u,h)})).next(()=>{if(i){let u=Gt();const h=[];return ue.forEach(a,(m,y)=>{var D;Fe("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Ap(t)}`);const T=function(tt,Ye){const rt=rM(Ye);if(void 0===rt)return null;for(const ht of PI(tt,rt.fieldPath))switch(ht.op){case"array-contains-any":return ht.value.arrayValue.values||[];case"array-contains":return[ht.value]}return null}(y,m),O=function(tt,Ye){const rt=new Map;for(const ht of Dp(Ye))for(const Rt of PI(tt,ht.fieldPath))switch(Rt.op){case"==":case"in":rt.set(ht.fieldPath.canonicalString(),Rt.value);break;case"not-in":case"!=":return rt.set(ht.fieldPath.canonicalString(),Rt.value),Array.from(rt.values())}return null}(y,m),L=function(tt,Ye){const rt=[];let ht=!0;for(const Rt of Dp(Ye)){const tn=0===Rt.kind?hV(tt,Rt.fieldPath,tt.startAt):fV(tt,Rt.fieldPath,tt.startAt);rt.push(tn.value),ht&&(ht=tn.inclusive)}return new Vh(rt,ht)}(y,m),H=function(tt,Ye){const rt=[];let ht=!0;for(const Rt of Dp(Ye)){const tn=0===Rt.kind?fV(tt,Rt.fieldPath,tt.endAt):hV(tt,Rt.fieldPath,tt.endAt);rt.push(tn.value),ht&&(ht=tn.inclusive)}return new Vh(rt,ht)}(y,m),ee=this.Ze(m,y,L),he=this.Ze(m,y,H),Ge=this.tn(m,y,O),Ve=this.en(m.indexId,T,ee,L.inclusive,he,H.inclusive,Ge);return ue.forEach(Ve,tt=>r.j(tt,t.limit).next(Ye=>{Ye.forEach(rt=>{const ht=Ze.fromSegments(rt.documentKey);u.has(ht)||(u=u.add(ht),h.push(ht))})}))}).next(()=>h)}return ue.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),y=m/(null!=t?t.length:1),D=[];for(let T=0;T<m;++T){const O=t?this.nn(t[T/y]):GI,L=this.sn(e,O,r[T%y],i),H=this.rn(e,O,a[T%y],u),ee=h.map(he=>this.sn(e,O,he,!0));D.push(...this.createRange(L,H,ee))}return D}sn(e,t,r,i){const a=new Fp(e,Ze.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new Fp(e,Ze.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new rW(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const h of a)r.Ge(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return ue.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let h=new In(Lr.comparator),m=!1;for(const y of u.filters){const D=y;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?m=!0:h=h.add(D.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new sb;for(const i of Dp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Be(i.kind);kp.ye.re(a,u)}return r.Oe()}nn(e){const t=new sb;return kp.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new sb;return kp.ye.re(Np(this.databaseId,t),r.Be(function(i){const a=Dp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new sb);let a=0;for(const u of Dp(e)){const h=r[a++];for(const m of i)if(this.cn(t,u.fieldPath)&&G0(h))i=this.an(i,u,h);else{const y=m.Be(u.kind);kp.ye.re(h,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const h of i){const m=new sb;m.seed(h.Oe()),kp.ye.re(u,m.Be(t.kind)),a.push(m)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof Xi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$I(e),i=ab(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const u=[];return ue.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{u.push(function(y,D){const T=D?new L0(D.sequenceNumber,new ia(Rp(D.readTime),new Ze(Xu(D.documentKey)),D.largestBatchId)):L0.empty(),O=y.fields.map(([L,H])=>new NI(Lr.fromServerFormat(L),H));return new SI(y.indexId,y.collectionGroup,O,T)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=$I(e),a=ab(e);return this.ln(e).next(u=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,m=>a.put(f2(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?ue.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,m=>this.fn(e,i,m).next(y=>{const D=this.dn(a,m);return y.isEqual(D)?ue.resolve():this._n(e,a,m,y,D)}))))})}wn(e,t,r,i){return ob(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return ob(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=ob(e);let a=new In(Lp);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(u,h)=>{a=a.add(new Fp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}dn(e,t){let r=new In(Lp);const i=this.on(t,e);if(null==i)return r;const a=rM(t);if(null!=a){const u=e.data.field(a.fieldPath);if(G0(u))for(const h of u.arrayValue.values||[])r=r.add(new Fp(t.indexId,e.key,this.nn(h),i))}else r=r.add(new Fp(t.indexId,e.key,GI,i));return r}_n(e,t,r,i,a){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,y,D,T){const O=h.getIterator(),L=m.getIterator();let H=t_(O),ee=t_(L);for(;H||ee;){let he=!1,Ge=!1;if(H&&ee){const Ve=y(H,ee);Ve<0?Ge=!0:Ve>0&&(he=!0)}else null!=H?Ge=!0:he=!0;he?(D(ee),ee=t_(L)):Ge?(T(H),H=t_(O)):(H=t_(O),ee=t_(L))}}(i,a,Lp,h=>{u.push(this.wn(e,t,r,h))},h=>{u.push(this.mn(e,t,r,h))}),ue.waitFor(u)}ln(e){let t=1;return ab(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Lp(u,h)).filter((u,h,m)=>!h||0!==Lp(u,m[h-1]));const i=[];i.push(e);for(const u of r){const h=Lp(u,e),m=Lp(u,t);if(0===h)i[0]=e.Le();else if(h>0&&m<0)i.push(u),i.push(u.Le());else if(m>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,GI,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,GI,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(v2)}getMinOffset(e,t){return ue.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||ut())).next(v2)}}function y2(n){return Ii(n,"collectionParents")}function ob(n){return Ii(n,"indexEntries")}function $I(n){return Ii(n,"indexConfiguration")}function ab(n){return Ii(n,"indexState")}function v2(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;iM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ia(e.readTime,e.documentKey,t)}const b2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function w2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.J({range:u},(D,T,O)=>(h++,O.delete()));a.push(m.next(()=>{At(1===h)}));const y=[];for(const D of t.mutations){const T=s2(e,D.key.path,t.batchId);a.push(i.delete(T)),y.push(D.key)}return ue.waitFor(a).next(()=>y)}function WI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class zI{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){At(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new zI(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jh(e).J({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=h_(e),u=jh(e);return u.add({}).next(h=>{At("number"==typeof h);const m=new bM(h,t,r,i),y=function(O,L,H){const ee=H.baseMutations.map(Ge=>nb(O.ne,Ge)),he=H.mutations.map(Ge=>nb(O.ne,Ge));return{userId:L,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:ee,mutations:he}}(this.wt,this.userId,m),D=[];let T=new In((O,L)=>jt(O.canonicalString(),L.canonicalString()));for(const O of i){const L=s2(this.userId,O.key.path,h);T=T.add(O.key.path.popLast()),D.push(u.put(y)),D.push(a.put(L,P3))}return T.forEach(O=>{D.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.gn[h]=m.keys()}),ue.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return jh(e).get(t).next(r=>r?(At(r.userId===this.userId),Pp(this.wt,r)):null)}yn(e,t){return this.gn[t]?ue.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return jh(e).J({index:"userMutationsIndex",range:i},(u,h,m)=>{h.userId===this.userId&&(At(h.batchId>=r),a=Pp(this.wt,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return jh(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jh(e).K("userMutationsIndex",t).next(r=>r.map(i=>Pp(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=UI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return h_(e).J({range:i},(u,h,m)=>{const[y,D,T]=u,O=Xu(D);if(y===this.userId&&t.path.isEqual(O))return jh(e).get(T).next(L=>{if(!L)throw ut();At(L.userId===this.userId),a.push(Pp(this.wt,L))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(jt);const i=[];return t.forEach(a=>{const u=UI(this.userId,a.path),h=IDBKeyRange.lowerBound(u),m=h_(e).J({range:h},(y,D,T)=>{const[O,L,H]=y,ee=Xu(L);O===this.userId&&a.path.isEqual(ee)?r=r.add(H):T.done()});i.push(m)}),ue.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=UI(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new In(jt);return h_(e).J({range:u},(m,y,D)=>{const[T,O,L]=m,H=Xu(O);T===this.userId&&r.isPrefixOf(H)?H.length===i&&(h=h.add(L)):D.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(jh(e).get(a).next(u=>{if(null===u)throw ut();At(u.userId===this.userId),r.push(Pp(this.wt,u))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return w2(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return h_(e).J({range:r},(a,u,h)=>{if(a[0]===this.userId){const m=Xu(a[1]);i.push(m)}else h.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return E2(e,this.userId,t)}Tn(e){return D2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E2(n,e,t){const r=UI(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return h_(n).J({range:a,H:!0},(h,m,y)=>{const[D,T,O]=h;D===e&&T===i&&(u=!0),y.done()}).next(()=>u)}function jh(n){return Ii(n,"mutations")}function h_(n){return Ii(n,"documentMutations")}function D2(n){return Ii(n,"mutationQueues")}class Vp{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Vp(0)}static Rn(){return new Vp(-1)}}class oW{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Vp(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>St.fromTimestamp(new cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>f_(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return f_(e).J((u,h)=>{const m=rb(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return f_(e).J((r,i)=>{const a=rb(i);t(a)})}bn(e){return C2(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}Pn(e,t){return C2(e).put("targetGlobalKey",t)}vn(e,t){return f_(e).put(d2(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ap(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return f_(e).J({range:i,index:"queryTargetsIndex"},(u,h,m)=>{const y=rb(h);W0(t,y.target)&&(a=y,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Hh(e);return t.forEach(u=>{const h=Vs(u.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Hh(e);return ue.forEach(t,a=>{const u=Vs(a.path);return ue.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Hh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hh(e);let a=Gt();return i.J({range:r,H:!0},(u,h,m)=>{const y=Xu(u[1]),D=new Ze(y);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Vs(t.path),i=IDBKeyRange.bound([r],[qL(r)],!1,!0);let a=0;return Hh(e).J({index:"documentTargetsIndex",H:!0,range:i},([u,h],m,y)=>{0!==u&&(a++,y.done())}).next(()=>a>0)}te(e,t){return f_(e).get(t).next(r=>r?rb(r):null)}}function f_(n){return Ii(n,"targets")}function C2(n){return Ii(n,"targetGlobal")}function Hh(n){return Ii(n,"targetDocuments")}function I2([n,e],[t,r]){const i=jt(n,t);return 0===i?jt(e,r):i}class aW{constructor(e){this.Sn=e,this.buffer=new In(I2),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();I2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ph(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Rh(r)}yield t.kn(3e5)}))}}class uW{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(go.ot);const r=new aW(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(b2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b2):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,u,h,m,y;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),tM()<=tl.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-D}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${T} documents in `+(y-m)+`ms\nTotal Duration: ${y-D}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class cW{constructor(e,t){this.db=e,this.garbageCollector=new uW(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return qI(e,r)}removeReference(e,t,r){return qI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qI(e,t)}Un(e,t){return function(r,i){let a=!1;return D2(r).Y(u=>E2(r,u,i).next(h=>(h&&(a=!0),ue.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(u,h)=>{if(h<=t){const m=this.Un(e,u).next(y=>{if(!y)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,St.min()),Hh(e).delete([0,Vs(u.path)])))});i.push(m)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qI(e,t)}Ln(e,t){const r=Hh(e);let i,a=go.ot;return r.J({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:y})=>{0===u?(a!==go.ot&&t(new Ze(Xu(i)),a),a=y,i=m):a=go.ot}).next(()=>{a!==go.ot&&t(new Ze(Xu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qI(n,e){return Hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vs(e.path),sequenceNumber:r}));var r}class T2{constructor(){this.changes=new Bh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dW{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bp(e).put(r)}removeEntry(e,t,r){return Bp(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],jI(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=$n.newInvalidDocument(t);return Bp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lb(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:$n.newInvalidDocument(t)};return Bp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lb(t))},(i,a)=>{r={document:this.Kn(t,a),size:WI(a)}}).next(()=>r)}getEntries(e,t){let r=mo();return this.Qn(e,t,(i,a)=>{const u=this.Kn(i,a);r=r.insert(i,u)}).next(()=>r)}jn(e,t){let r=mo(),i=new Sr(Ze.comparator);return this.Qn(e,t,(a,u)=>{const h=this.Kn(a,u);r=r.insert(a,h),i=i.insert(a,WI(u))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new In(O2);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(lb(i.first()),lb(i.last())),u=i.getIterator();let h=u.getNext();return Bp(e).J({index:"documentKeyIndex",range:a},(m,y,D)=>{const T=Ze.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&O2(h,T)<0;)r(h,null),h=u.getNext();h&&h.isEqual(T)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?D.q(lb(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),jI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bp(e).K(IDBKeyRange.bound(i,a,!0)).next(u=>{let h=mo();for(const m of u){const y=this.Kn(Ze.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=mo();const u=A2(t,r),h=A2(t,ia.max());return Bp(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,y,D)=>{const T=this.Kn(Ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new hW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return N2(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}qn(e,t){return N2(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Q3(n,e){let t;if(e.document)t=YV(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=Rp(e.noDocument.readTime);t=$n.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Ze.fromSegments(e.unknownDocument.path),i=Rp(e.unknownDocument.version);t=$n.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new cr(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return $n.newInvalidDocument(e)}}function S2(n){return new dW(n)}class hW extends T2{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Bh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new In((a,u)=>jt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const h=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,h.readTime)),u.isValidDocument()){const m=c2(this.zn.wt,u);i=i.add(a.path.popLast()),r+=WI(m)-h.size,t.push(this.zn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=c2(this.zn.wt,u.convertToNoDocument(St.min()));t.push(this.zn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,u)=>{this.Hn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function N2(n){return Ii(n,"remoteDocumentGlobal")}function Bp(n){return Ii(n,"remoteDocumentsV14")}function lb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function A2(n,e){const t=e.documentKey.path.toArray();return[n,jI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function O2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=jt(t[a],r[a]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}class fW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class M2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&K0(r.mutation,i,sa.empty(),cr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=Qu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=Z0();return a.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Qu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let a=mo();const u=Y0(),h=Y0();return t.forEach((m,y)=>{const D=r.get(y.key);i.has(y.key)&&(void 0===D||D.mutation instanceof dd)?a=a.insert(y.key,y):void 0!==D&&(u.set(y.key,D.mutation.getFieldMask()),K0(D.mutation,y,D.mutation.getFieldMask(),cr.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((y,D)=>u.set(y,D)),t.forEach((y,D)=>{var T;return h.set(y,new fW(D,null!==(T=u.get(y))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Y0();let i=new Sr((u,h)=>u-h),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const y=t.get(m);if(null===y)return;let D=r.get(m)||sa.empty();D=h.applyToLocalView(y,D),r.set(m,D);const T=(i.get(h.batchId)||Gt()).add(m);i=i.insert(h.batchId,T)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,D=m.value,T=BV();D.forEach(O=>{if(!a.has(O)){const L=OV(t.get(O),r.get(O));null!==L&&T.set(O,L),a=a.add(O)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ue.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(Qu());let h=-1,m=a;return u.next(y=>ue.forEach(y,(D,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),a.get(D)?ue.resolve():this.getBaseDocument(e,D,T).next(O=>{m=m.insert(D,O)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,m,y,Gt())).next(D=>({batchId:h,changes:VV(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=Z0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Z0();return this.indexManager.getCollectionParents(e,i).next(u=>ue.forEach(u,h=>{const m=(y=t,D=h.child(i),new cd(D,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(y=>{y.forEach((D,T)=>{a=a.insert(D,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,m)=>{const y=m.getKey();null===i.get(y)&&(i=i.insert(y,$n.newInvalidDocument(y)))});let u=Z0();return i.forEach((h,m)=>{const y=a.get(h);void 0!==y&&K0(y.mutation,m,sa.empty(),cr.now()),pM(t,m)&&(u=u.insert(h,m))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve($n.newInvalidDocument(t))}}class pW{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ue.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ci(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:DM(r.bundledQuery),readTime:Ci(r.readTime)}),ue.resolve();var r}}class gW{constructor(){this.overlays=new Sr(Ze.comparator),this.Xn=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qu();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Qu(),a=t.length+1,u=new Ze(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Sr((y,D)=>y-D);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let D=a.get(y.largestBatchId);null===D&&(D=Qu(),a=a.insert(y.largestBatchId,D)),D.set(y.getKey(),y)}}const h=Qu(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,D)=>h.set(y,D)),!(h.size()>=i)););return ue.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new EM(t,r));let a=this.Xn.get(t);void 0===a&&(a=Gt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class TM{constructor(){this.Zn=new In(Ti.ts),this.es=new In(Ti.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ti(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ze(new an([])),r=new Ti(t,e),i=new Ti(t,e+1),a=[];return this.es.forEachInRange([r,i],u=>{this.rs(u),a.push(u.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ze(new an([])),r=new Ti(t,e),i=new Ti(t,e+1);let a=Gt();return this.es.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ti(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ze.comparator(e.key,t.key)||jt(e.ls,t.ls)}static ns(e,t){return jt(e.ls,t.ls)||Ze.comparator(e.key,t.key)}}class mW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new In(Ti.ts)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const u=new bM(a,t,r,i);this.mutationQueue.push(u);for(const h of i)this.ds=this.ds.add(new Ti(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],u=>{const h=this._s(u.ls);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(jt);return t.forEach(i=>{const a=new Ti(i,0),u=new Ti(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,u],h=>{r=r.add(h.ls)})}),ue.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const u=new Ti(new Ze(a),0);let h=new In(jt);return this.ds.forEachWhile(m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(m.ls)),!0)},u),ue.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ue.forEach(t.mutations,i=>{const a=new Ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Ti(t,0),i=this.ds.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _W{constructor(e){this.ps=e,this.docs=new Sr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=mo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=mo();const a=new Ze(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||iM(ZL(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}Is(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yW(this)}getSize(e){return ue.resolve(this.size)}}class yW extends T2{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class vW{constructor(e){this.persistence=e,this.Ts=new Bh(t=>Ap(t),W0),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Es=0,this.As=new TM,this.targetCount=0,this.Rs=Vp.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ue.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Vp(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.vn(t),ue.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.As.containsKey(t))}}class x2{constructor(e,t){this.bs={},this.overlays={},this.Ps=new go(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new vW(this),this.indexManager=new iW,this.remoteDocumentCache=new _W(r=>this.referenceDelegate.Ss(r)),this.wt=new u2(t),this.Ds=new pW(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new mW(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new bW(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return ue.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class bW extends QL{constructor(e){super(),this.currentSequenceNumber=e}}class KI{constructor(e){this.persistence=e,this.ks=new TM,this.Os=null}static Ms(e){return new KI(e)}get Fs(){if(this.Os)return this.Os;throw ut()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ue.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Fs,r=>{const i=Ze.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,St.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ue.or([()=>ue.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class wW{constructor(e){this.wt=e}O(e,t,r,i){const a=new AI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",r2,{unique:!0}),h.createObjectStore("documentMutations"),R2(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),R2(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",r2,{unique:!0});const D=m.store("mutations"),T=y.map(O=>D.put(O));return ue.waitFor(T)})}(e,a))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Bs(a))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(u=u.next(()=>this.Us(a))),r<8&&i>=8&&(u=u.next(()=>this.qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Ks(a))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:z3});m.createIndex("collectionPathOverlayIndex",q3,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",K3,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:k3});m.createIndex("documentKeyIndex",F3),m.createIndex("collectionGroupIndex",L3)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.Qs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:H3}).createIndex("sequenceNumberIndex",G3,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:$3}).createIndex("documentKeyIndex",W3,{unique:!1})}(e))),u}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=WI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ue.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",u).next(h=>ue.forEach(h,m=>{At(m.userId===a.userId);const y=Pp(this.wt,m);return w2(e,a.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((u,h)=>{const m=new an(u),y=[0,Vs(m)];a.push(t.get(y).next(D=>D?ue.resolve():t.put({targetId:0,path:Vs(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:j3});const r=t.store("collectionParents"),i=new IM,a=u=>{if(i.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:Vs(m)})}};return t.store("remoteDocuments").J({H:!0},(u,h)=>{const m=new an(u);return a(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([u,h,m],y)=>{const D=Xu(h);return a(D.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=rb(i),u=d2(this.wt,a);return t.put(u)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,u)=>{const h=t.store("remoteDocumentsV14"),m=(y=u,y.document?new Ze(an.fromString(y.document.name).popFirst(5)):y.noDocument?Ze.fromSegments(y.noDocument.path):y.unknownDocument?Ze.fromSegments(y.unknownDocument.path):ut()).path.toArray();var y;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(D))}).next(()=>ue.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=S2(this.wt),a=new x2(KI.Ms,this.wt.ne);return r.K().next(u=>{const h=new Map;return u.forEach(m=>{var y;let D=null!==(y=h.get(m.userId))&&void 0!==y?y:Gt();Pp(this.wt,m).keys().forEach(T=>D=D.add(T)),h.set(m.userId,D)}),ue.forEach(h,(m,y)=>{const D=new Ei(y),T=HI.se(this.wt,D),O=a.getIndexManager(D),L=zI.se(D,this.wt,O,a.referenceDelegate);return new M2(i,L,T,O).recalculateAndSaveOverlaysForDocumentKeys(new vM(t,go.ot),m).next()})})}}function R2(n){n.createObjectStore("targetDocuments",{keyPath:B3}).createIndex("documentTargetsIndex",U3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V3,{unique:!0}),n.createObjectStore("targetGlobal")}const SM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class NM{constructor(e,t,r,i,a,u,h,m,y,D,T=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=u,this.document=h,this.Ws=y,this.zs=D,this.Hs=T,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=O=>Promise.resolve(),!NM.V())throw new Re(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cW(this,i),this.ei=t+"main",this.wt=new u2(m),this.ni=new ql(this.ei,this.Hs,new wW(this.wt)),this.Vs=new oW(this.referenceDelegate,this.wt),this.remoteDocumentCache=S2(this.wt),this.Ds=new J3,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===D&&Wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,SM);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new go(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ZI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ph(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return ub(e).get("owner").next(t=>ue.resolve(this.di(t)))}_i(e){return ZI(e).delete(this.clientId)}wi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ii(r,"clientMetadata");return i.K().next(a=>{const u=e.gi(a,18e5),h=a.filter(m=>-1===u.indexOf(m));return ue.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ue.resolve(!0):ub(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,SM);return!1}}return!(!this.networkEnabled||!this.inForeground)||ZI(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new vM(t,go.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>ZI(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return zI.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sW(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return HI.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Hs)?Y3:14===u?l2:13===u?a2:12===u?Z3:11===u?o2:void ut();var u;let h;return this.ni.runTransaction(e,i,a,m=>(h=new vM(m,this.Ps?this.Ps.next():go.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw Wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Re(ge.FAILED_PRECONDITION,YL);return r(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}bi(e){return ub(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ge.FAILED_PRECONDITION,SM)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ub(e).put("owner",t)}static V(){return ql.V()}li(e){const t=ub(e);return t.get("owner").next(r=>this.di(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Wr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ub(n){return Ii(n,"owner")}function ZI(n){return Ii(n,"clientMetadata")}function AM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class OM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Gt(),i=Gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new OM(e,t.fromCache,r,i)}}class P2{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return ue.resolve(null)}xi(e,t,r,i){return function o3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(St.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const u=this.ki(t,a);return this.Oi(t,u,r,i)?this.Ni(e,t):(tM()<=tl.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fM(t)),this.Mi(e,u,t,KL(i,-1)))})}ki(e,t){let r=new In(wV(e));return t.forEach((i,a)=>{pM(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return tM()<=tl.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",fM(t)),this.Di.getDocumentsMatchingQuery(e,t,ia.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class EW{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Sr(jt),this.Bi=new Bh(a=>Ap(a),W0),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M2(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function k2(n,e,t,r){return new EW(n,e,t,r)}function F2(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,Ee.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let m=Gt();for(const y of i){u.push(y.batchId);for(const D of y.mutations)m=m.add(D.key)}for(const y of a){h.push(y.batchId);for(const D of y.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(y=>({Ki:y,removedBatchIds:u,addedBatchIds:h}))})})}),MM.apply(this,arguments)}function DW(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(u,h,m,y){const D=m.batch,T=D.keys();let O=ue.resolve();return T.forEach(L=>{O=O.next(()=>y.getEntry(h,L)).next(H=>{const ee=m.docVersions.get(L);At(null!==ee),H.version.compareTo(ee)<0&&(D.applyToRemoteDocument(H,m),H.isValidDocument()&&(H.setReadTime(m.commitVersion),y.addEntry(H)))})}),O.next(()=>u.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Gt();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function L2(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function CW(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((D,T)=>{const O=i.get(T);if(!O)return;h.push(t.Vs.removeMatchingKeys(a,D.removedDocuments,T).next(()=>t.Vs.addMatchingKeys(a,D.addedDocuments,T)));let L=O.withSequenceNumber(a.currentSequenceNumber);var H,ee,he;e.targetMismatches.has(T)?L=L.withResumeToken(ni.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):D.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(D.resumeToken,r)),i=i.insert(T,L),ee=L,he=D,(0===(H=O).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(a,L))});let m=mo(),y=Gt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(V2(a,u,e.documentUpdates).next(D=>{m=D.Gi,y=D.Qi})),!r.isEqual(St.min())){const D=t.Vs.getLastRemoteSnapshotVersion(a).next(T=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return ue.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,y)).next(()=>m)}).then(a=>(t.$i=i,a))}function V2(n,e,t){let r=Gt(),i=Gt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=mo();return t.forEach((h,m)=>{const y=a.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(St.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||0===m.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Fe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)}),{Gi:u,Qi:i}})}function IW(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function p_(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Vs.allocateTargetId(r).next(u=>(i=new Uh(e,u,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function g_(n,e,t){return xM.apply(this,arguments)}function xM(){return xM=(0,Ee.Z)(function*(n,e,t){const r=Qe(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ph(u))throw u;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),xM.apply(this,arguments)}function YI(n,e,t){const r=Qe(n);let i=St.min(),a=Gt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,y){const D=Qe(h),T=D.Bi.get(y);return void 0!==T?ue.resolve(D.$i.get(T)):D.Vs.getTargetData(m,y)}(r,u,nl(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{a=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(u,e,t?i:St.min(),t?a:Gt())).next(h=>(j2(r,bV(e),h),{documents:h,ji:a})))}function B2(n,e){const t=Qe(n),r=Qe(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(u=>u?u.target:null))}function U2(n,e){const t=Qe(n),r=t.Li.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,KL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(j2(t,e,i),i))}function j2(n,e,t){let r=St.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function RM(){return RM=(0,Ee.Z)(function*(n,e,t,r){const i=Qe(n);let a=Gt(),u=mo();for(const y of t){const D=e.Wi(y.metadata.name);y.document&&(a=a.add(D));const T=e.zi(y);T.setReadTime(e.Hi(y.metadata.readTime)),u=u.insert(D,T)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),m=yield p_(i,(y=r,nl(i_(an.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>V2(y,h,u).next(D=>(h.apply(y),D)).next(D=>i.Vs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>i.Vs.addMatchingKeys(y,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,D.Gi,D.Qi)).next(()=>D.Gi)))}),RM.apply(this,arguments)}function SW(n,e){return PM.apply(this,arguments)}function PM(){return PM=(0,Ee.Z)(function*(n,e,t=Gt()){const r=yield p_(n,nl(DM(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Ci(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ds.saveNamedQuery(a,e);const h=r.withResumeToken(ni.EMPTY_BYTE_STRING,u);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(a,h).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),PM.apply(this,arguments)}function H2(n,e){return`firestore_clients_${n}_${e}`}function G2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kM(n,e){return`firestore_targets_${n}_${e}`}class QI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Re(i.error.code,i.error.message))),u?new QI(e,t,i.state,a):(Wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new cb(e,r.state,i):(Wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=VI();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=rV(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new JI(e,a):(Wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class FM{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new FM(t.clientId,t.onlineState):(Wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class LM{constructor(){this.activeTargetIds=VI()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VM{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Sr(jt),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=H2(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new LM),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(H2(e.persistenceKey,i));if(a){const u=JI.Ji(i,a);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(kM(this.persistenceKey,e));if(r){const i=cb.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let u=go.ot;if(null!=a)try{const h=JSON.parse(a);At("number"==typeof h),u=h}catch(h){Wr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==go.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new QI(this.currentUser,e,t,r),a=G2(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=G2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=kM(this.persistenceKey,e),a=new cb(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return JI.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return QI.Ji(new Ei(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return cb.Ji(i,t)}wr(e){return FM.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),u=[],h=[];return a.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Mr(u,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=VI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $2{constructor(){this.Fr=new LM,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new LM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NW{Br(e){}shutdown(){}}class W2{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class OW{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class MW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const u=this.oo(e,t);Fe("RestConnection","Sending: ",u,r);const h={};return this.uo(h,i,a),this.co(e,u,h,r).then(m=>(Fe("RestConnection","Received: ",m),m),m=>{throw k0("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}ao(e,t,r,i,a,u){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${AW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,u)=>{const h=new A$;h.listenOnce(T$.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case eM.NO_ERROR:const y=h.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(y)),a(y);break;case eM.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),u(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case eM.HTTP_ERROR:const D=h.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const T=h.getResponseJson().error;if(T&&T.status&&T.message){const O=function(L){const H=L.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(H)>=0?H:ge.UNKNOWN}(T.status);u(new Re(O,T.message))}else u(new Re(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=C$(),u=I$(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new N$({})),this.uo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Fe("Connection","Creating WebChannel: "+m,h);const y=a.createWebChannel(m,h);let D=!1,T=!1;const O=new OW({jr:H=>{T?Fe("Connection","Not sending because WebChannel is closed:",H):(D||(Fe("Connection","Opening WebChannel transport."),y.open(),D=!0),Fe("Connection","WebChannel sending:",H),y.send(H))},Wr:()=>y.close()}),L=(H,ee,he)=>{H.listen(ee,Ge=>{try{he(Ge)}catch(Ve){setTimeout(()=>{throw Ve},0)}})};return L(y,TI.EventType.OPEN,()=>{T||Fe("Connection","WebChannel transport opened.")}),L(y,TI.EventType.CLOSE,()=>{T||(T=!0,Fe("Connection","WebChannel transport closed"),O.eo())}),L(y,TI.EventType.ERROR,H=>{T||(T=!0,k0("Connection","WebChannel transport errored:",H),O.eo(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),L(y,TI.EventType.MESSAGE,H=>{var ee;if(!T){const he=H.data[0];At(!!he);const Ge=he,Ve=Ge.error||(null===(ee=Ge[0])||void 0===ee?void 0:ee.error);if(Ve){Fe("Connection","WebChannel received error:",Ve);const tt=Ve.status;let Ye=function(ht){const Rt=zr[ht];if(void 0!==Rt)return FV(Rt)}(tt),rt=Ve.message;void 0===Ye&&(Ye=ge.INTERNAL,rt="Unknown error status: "+tt+" with message "+Ve.message),T=!0,O.eo(new Re(Ye,rt)),y.close()}else Fe("Connection","WebChannel received:",he),O.no(he)}}),L(u,S$.STAT_EVENT,H=>{H.stat===HL.PROXY?Fe("Connection","Detected buffering proxy"):H.stat===HL.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Zr()},0),O}}function z2(){return typeof window<"u"?window:null}function XI(){return typeof document<"u"?document:null}function db(n){return new E3(n,!0)}class BM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class q2{constructor(e,t,r,i,a,u,h,m){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new BM(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ee.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Ee.Z)(function*(){e.state=0,e.start()}))}qo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xW extends q2{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function I3(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ut(),i=e.targetChange.targetIds||[],a=function(m,y){return m.dt?(At(void 0===y||"string"==typeof y),ni.fromBase64String(y||"")):(At(void 0===y||y instanceof Uint8Array),ni.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const y=void 0===m.code?ge.UNKNOWN:FV(m.code);return new Re(y,m.message||"")}(u);t=new jV(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ju(n,r.document.name),a=Ci(r.document.updateTime),u=new Ji({mapValue:{fields:r.document.fields}}),h=$n.newFoundDocument(i,a,u);t=new BI(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Ju(n,r.document),a=r.readTime?Ci(r.readTime):St.min(),u=$n.newNoDocument(i,a);t=new BI([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Ju(n,r.document);t=new BI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new p3(r.count||0);t=new UV(r.targetId,a)}}var m;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return St.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?St.min():a.readTime?Ci(a.readTime):St.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=tb(this.wt),t.addTarget=function(i,a){let u;const h=a.target;return u=RI(h)?{documents:QV(i,h)}:{query:JV(i,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=WV(i,a.resumeToken):a.snapshotVersion.compareTo(St.min())>0&&(u.readTime=X0(i,a.snapshotVersion.toTimestamp())),u}(this.wt,e);const r=function S3(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=tb(this.wt),t.removeTarget=e,this.Mo(t)}}class RW extends q2{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function T3(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let a=Ci(r.updateTime?r.updateTime:i);return a.isEqual(St.min())&&(a=Ci(i)),new d3(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.Jo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=tb(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nb(this.wt,r))};this.Mo(t)}}class PW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ge.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.bo.ao(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(ge.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class kW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Wr(t),this.su=!1):Fe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class FW{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var m;Gh(u)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ee.Z)(function*(y){const D=Qe(y);D.lu.add(4),yield m_(D),D._u.set("Unknown"),D.lu.delete(4),yield hb(D)}),function(y){return m.apply(this,arguments)})(u))}))}),this._u=new kW(r,i)}}function hb(n){return UM.apply(this,arguments)}function UM(){return UM=(0,Ee.Z)(function*(n){if(Gh(n))for(const e of n.fu)yield e(!0)}),UM.apply(this,arguments)}function m_(n){return jM.apply(this,arguments)}function jM(){return jM=(0,Ee.Z)(function*(n){for(const e of n.fu)yield e(!1)}),jM.apply(this,arguments)}function eT(n,e){const t=Qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),$M(t)?GM(t):y_(t).Co()&&HM(t,e))}function fb(n,e){const t=Qe(n),r=y_(t);t.hu.delete(e),r.Co()&&K2(t,e),0===t.hu.size&&(r.Co()?r.ko():Gh(t)&&t._u.set("Unknown"))}function HM(n,e){n.wu.Nt(e.targetId),y_(n).Qo(e)}function K2(n,e){n.wu.Nt(e),y_(n).jo(e)}function GM(n){n.wu=new v3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),y_(n).start(),n._u.iu()}function $M(n){return Gh(n)&&!y_(n).Do()&&n.hu.size>0}function Gh(n){return 0===Qe(n).lu.size}function Z2(n){n.wu=void 0}function LW(n){return WM.apply(this,arguments)}function WM(){return WM=(0,Ee.Z)(function*(n){n.hu.forEach((e,t)=>{HM(n,e)})}),WM.apply(this,arguments)}function VW(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,Ee.Z)(function*(n,e){Z2(n),$M(n)?(n._u.uu(e),GM(n)):n._u.set("Unknown")}),zM.apply(this,arguments)}function BW(n,e,t){return qM.apply(this,arguments)}function qM(){return qM=(0,Ee.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof jV&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const u=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tT(n,r)}else if(e instanceof BI?n.wu.Ut(e):e instanceof UV?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(St.min()))try{const r=yield L2(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.wu.Yt(a);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.hu.get(m);y&&i.hu.set(m,y.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const m=i.hu.get(h);if(!m)return;i.hu.set(h,m.withResumeToken(ni.EMPTY_BYTE_STRING,m.snapshotVersion)),K2(i,h);const y=new Uh(m.target,h,1,m.sequenceNumber);HM(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield tT(n,r)}var r}),qM.apply(this,arguments)}function tT(n,e,t){return KM.apply(this,arguments)}function KM(){return KM=(0,Ee.Z)(function*(n,e,t){if(!Ph(e))throw e;n.lu.add(1),yield m_(n),n._u.set("Offline"),t||(t=()=>L2(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield hb(n)}))}),KM.apply(this,arguments)}function Y2(n,e){return e().catch(t=>tT(n,t,e))}function __(n){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Ee.Z)(function*(n){const e=Qe(n),t=$h(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;UW(e);)try{const i=yield IW(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,jW(e,i)}catch(i){yield tT(e,i)}Q2(e)&&J2(e)}),ZM.apply(this,arguments)}function UW(n){return Gh(n)&&n.au.length<10}function jW(n,e){n.au.push(e);const t=$h(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Q2(n){return Gh(n)&&!$h(n).Do()&&n.au.length>0}function J2(n){$h(n).start()}function HW(n){return YM.apply(this,arguments)}function YM(){return YM=(0,Ee.Z)(function*(n){$h(n).Xo()}),YM.apply(this,arguments)}function GW(n){return QM.apply(this,arguments)}function QM(){return QM=(0,Ee.Z)(function*(n){const e=$h(n);for(const t of n.au)e.Ho(t.mutations)}),QM.apply(this,arguments)}function $W(n,e,t){return JM.apply(this,arguments)}function JM(){return JM=(0,Ee.Z)(function*(n,e,t){const r=n.au.shift(),i=wM.from(r,e,t);yield Y2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield __(n)}),JM.apply(this,arguments)}function WW(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,Ee.Z)(function*(n,e){var t;e&&$h(n).zo&&(yield(t=(0,Ee.Z)(function*(r,i){if(kV(a=i.code)&&a!==ge.ABORTED){const u=r.au.shift();$h(r).No(),yield Y2(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield __(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Q2(n)&&J2(n)}),XM.apply(this,arguments)}function X2(n,e){return ex.apply(this,arguments)}function ex(){return ex=(0,Ee.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Gh(t);t.lu.add(3),yield m_(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield hb(t)}),ex.apply(this,arguments)}function tx(n,e){return nx.apply(this,arguments)}function nx(){return nx=(0,Ee.Z)(function*(n,e){const t=Qe(n);e?(t.lu.delete(2),yield hb(t)):e||(t.lu.add(2),yield m_(t),t._u.set("Unknown"))}),nx.apply(this,arguments)}function y_(n){return n.mu||(n.mu=function(e,t,r){const i=Qe(e);return i.tu(),new xW(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:LW.bind(null,n),Jr:VW.bind(null,n),Go:BW.bind(null,n)}),n.fu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.mu.No(),$M(n)?GM(n):n._u.set("Unknown")):(yield n.mu.stop(),Z2(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function $h(n){return n.gu||(n.gu=function(e,t,r){const i=Qe(e);return i.tu(),new RW(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:HW.bind(null,n),Jr:WW.bind(null,n),Yo:GW.bind(null,n),Jo:$W.bind(null,n)}),n.fu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.gu.No(),yield __(n)):(yield n.gu.stop(),n.au.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class rx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,h=new rx(e,t,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function v_(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Ph(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class b_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Z0(),this.sortedSet=new Sr(this.comparator)}static emptySet(e){return new b_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof b_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new b_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class eB{constructor(){this.yu=new Sr(Ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ut():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class w_{constructor(e,t,r,i,a,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new w_(e,t,b_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&z0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zW{constructor(){this.Iu=void 0,this.listeners=[]}}class qW{constructor(){this.queries=new Bh(e=>vV(e),z0),this.onlineState="Unknown",this.Tu=new Set}}function ix(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new zW),i)try{a.Iu=yield t.onListen(r)}catch(u){const h=v_(u,`Initialization of query '${fM(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&lx(t)}),sx.apply(this,arguments)}function ox(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ax.apply(this,arguments)}function KW(n,e){const t=Qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Au(i)&&(r=!0);u.Iu=i}}r&&lx(t)}function ZW(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function lx(n){n.Tu.forEach(e=>{e.next()})}class ux{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new w_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=w_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class YW{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class tB{constructor(e){this.wt=e}Wi(e){return Ju(this.wt,e)}zi(e){return e.metadata.exists?YV(this.wt,e.document,!1):$n.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ci(e)}}class QW{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nB(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=an.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new tB(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Gt()).add(a);t.set(u,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function TW(n,e,t,r){return RM.apply(this,arguments)}(e.localStore,new tB(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield SW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function nB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rB{constructor(e){this.key=e}}class iB{constructor(e){this.key=e}}class sB{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Gt(),this.mutatedKeys=Gt(),this.Lu=wV(e),this.Uu=new b_(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new eB,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,T)=>{const O=i.get(D),L=pM(this.query,T)?T:null,H=!!O&&this.mutatedKeys.has(O.key),ee=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let he=!1;O&&L?O.data.isEqual(L.data)?H!==ee&&(r.track({type:3,doc:L}),he=!0):this.Qu(O,L)||(r.track({type:2,doc:L}),he=!0,(m&&this.Lu(L,m)>0||y&&this.Lu(L,y)<0)&&(h=!0)):!O&&L?(r.track({type:0,doc:L}),he=!0):O&&!L&&(r.track({type:1,doc:O}),he=!0,(m||y)&&(h=!0)),he&&(L?(u=u.add(L),a=ee?a.add(D):a.delete(D)):(u=u.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const D="F"===this.query.limitType?u.last():u.first();u=u.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:u,Gu:r,Oi:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((y,D)=>function(T,O){const L=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return L(T)-L(O)}(y.type,D.type)||this.Lu(y.doc,D.doc)),this.ju(r);const u=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,m=h!==this.$u;return this.$u=h,0!==a.length||m?{snapshot:new w_(this.query,e.Uu,i,a,e.mutatedKeys,0===h,m,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new eB,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Gt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new iB(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new rB(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Gt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return w_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class JW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XW{constructor(e){this.key=e,this.Xu=!1}}class e8{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new Bh(h=>vV(h),z0),this.ec=new Map,this.nc=new Set,this.sc=new Sr(Ze.comparator),this.ic=new Map,this.rc=new TM,this.oc={},this.uc=new Map,this.cc=Vp.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function t8(n,e){return cx.apply(this,arguments)}function cx(){return cx=(0,Ee.Z)(function*(n,e){const t=Rx(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const u=yield p_(t.localStore,nl(e));t.isPrimaryClient&&eT(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield dx(t,e,r,"current"===h)}return i}),cx.apply(this,arguments)}function dx(n,e,t,r){return hx.apply(this,arguments)}function hx(){return hx=(0,Ee.Z)(function*(n,e,t,r){n.hc=(D,T,O)=>{return(L=(0,Ee.Z)(function*(H,ee,he,Ge){let Ve=ee.view.Ku(he);Ve.Oi&&(Ve=yield YI(H.localStore,ee.query,!1).then(({documents:rt})=>ee.view.Ku(rt,Ve)));const tt=Ge&&Ge.targetChanges.get(ee.targetId),Ye=ee.view.applyChanges(Ve,H.isPrimaryClient,tt);return Ex(H,ee.targetId,Ye.zu),Ye.snapshot}),function(H,ee,he,Ge){return L.apply(this,arguments)})(n,D,T,O);var L};const i=yield YI(n.localStore,e,!0),a=new sB(e,i.ji),u=a.Ku(i.documents),h=J0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(u,n.isPrimaryClient,h);Ex(n,t,m.zu);const y=new JW(e,t,a);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),hx.apply(this,arguments)}function n8(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!z0(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield g_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fb(t.remoteStore,r.targetId),E_(t,r.targetId)}).catch(Rh))):(E_(t,r.targetId),yield g_(t.localStore,r.targetId,!0))}),fx.apply(this,arguments)}function px(){return px=(0,Ee.Z)(function*(n,e,t){const r=Px(n);try{const i=yield function(a,u){const h=Qe(a),m=cr.now(),y=u.reduce((O,L)=>O.add(L.key),Gt());let D,T;return h.persistence.runTransaction("Locally write mutations","readwrite",O=>{let L=mo(),H=Gt();return h.Ui.getEntries(O,y).next(ee=>{L=ee,L.forEach((he,Ge)=>{Ge.isValidDocument()||(H=H.add(he))})}).next(()=>h.localDocuments.getOverlayedDocuments(O,L)).next(ee=>{D=ee;const he=[];for(const Ge of u){const Ve=f3(Ge,D.get(Ge.key).overlayedDocument);null!=Ve&&he.push(new dd(Ge.key,Ve,cV(Ve.value.mapValue),vr.exists(!0)))}return h.mutationQueue.addMutationBatch(O,m,he,u)}).next(ee=>{T=ee;const he=ee.applyToLocalDocumentSet(D,H);return h.documentOverlayCache.saveOverlays(O,ee.batchId,he)})}).then(()=>({batchId:T.batchId,changes:VV(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let m=a.oc[a.currentUser.toKey()];m||(m=new Sr(jt)),m=m.insert(u,h),a.oc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield hd(r,i.changes),yield __(r.remoteStore)}catch(i){const a=v_(i,"Failed to persist write");t.reject(a)}}),px.apply(this,arguments)}function oB(n,e){return gx.apply(this,arguments)}function gx(){return gx=(0,Ee.Z)(function*(n,e){const t=Qe(n);try{const r=yield CW(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.ic.get(a);u&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?At(u.Xu):i.removedDocuments.size>0&&(At(u.Xu),u.Xu=!1))}),yield hd(t,r,e)}catch(r){yield Rh(r)}}),gx.apply(this,arguments)}function aB(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,u)=>{const h=u.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,u){const h=Qe(a);h.onlineState=u;let m=!1;h.queries.forEach((y,D)=>{for(const T of D.listeners)T.Eu(u)&&(m=!0)}),m&&lx(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i8(n,e,t){return mx.apply(this,arguments)}function mx(){return mx=(0,Ee.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let u=new Sr(Ze.comparator);u=u.insert(a,$n.newNoDocument(a,St.min()));const h=Gt().add(a),m=new Q0(St.min(),new Map,new In(jt),u,h);yield oB(r,m),r.sc=r.sc.remove(a),r.ic.delete(e),Dx(r)}else yield g_(r.localStore,e,!1).then(()=>E_(r,e,t)).catch(Rh)}),mx.apply(this,arguments)}function s8(n,e){return _x.apply(this,arguments)}function _x(){return _x=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield DW(t.localStore,e);wx(t,r,null),bx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hd(t,i)}catch(i){yield Rh(i)}}),_x.apply(this,arguments)}function o8(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=(0,Ee.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(a,u){const h=Qe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,u).next(D=>(At(null!==D),y=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(r.localStore,e);wx(r,e,t),bx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hd(r,i)}catch(i){yield Rh(i)}}),yx.apply(this,arguments)}function vx(){return vx=(0,Ee.Z)(function*(n,e){const t=Qe(n);Gh(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Qe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=v_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),vx.apply(this,arguments)}function bx(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function wx(n,e,t){const r=Qe(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function E_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||lB(n,r)})}function lB(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(fb(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),Dx(n))}function Ex(n,e,t){for(const r of t)r instanceof rB?(n.rc.addReference(r.key,e),l8(n,r)):r instanceof iB?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||lB(n,r.key)):ut()}function l8(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.nc.add(r),Dx(n))}function Dx(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ze(an.fromString(e)),r=n.cc.next();n.ic.set(r,new XW(t)),n.sc=n.sc.insert(t,r),eT(n.remoteStore,new Uh(nl(i_(t.path)),r,2,go.ot))}}function hd(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,Ee.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[],u=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,m)=>{u.push(r.hc(m,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,y.fromCache?"not-current":"current"),i.push(y);const D=OM.Vi(m.targetId,y);a.push(D)}}))}),yield Promise.all(u),r.Zu.Go(i),yield(h=(0,Ee.Z)(function*(m,y){const D=Qe(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ue.forEach(y,O=>ue.forEach(O.Pi,L=>D.persistence.referenceDelegate.addReference(T,O.targetId,L)).next(()=>ue.forEach(O.vi,L=>D.persistence.referenceDelegate.removeReference(T,O.targetId,L)))))}catch(T){if(!Ph(T))throw T;Fe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const O=T.targetId;if(!T.fromCache){const L=D.$i.get(O),ee=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);D.$i=D.$i.insert(O,ee)}}}),function(m,y){return h.apply(this,arguments)})(r.localStore,a))}),Cx.apply(this,arguments)}function u8(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,Ee.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield F2(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(u=>{u.forEach(h=>{h.reject(new Re(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hd(t,r.Ki)}var i}),Ix.apply(this,arguments)}function c8(n,e){const t=Qe(n),r=t.ic.get(e);if(r&&r.Xu)return Gt().add(r.key);{let i=Gt();const a=t.ec.get(e);if(!a)return i;for(const u of a){const h=t.tc.get(u);i=i.unionWith(h.view.qu)}return i}}function d8(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=yield YI(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Ex(t,e.targetId,i.zu),i}),Tx.apply(this,arguments)}function h8(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,Ee.Z)(function*(n,e){const t=Qe(n);return U2(t.localStore,e).then(r=>hd(t,r))}),Sx.apply(this,arguments)}function f8(n,e,t,r){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,Ee.Z)(function*(n,e,t,r){const i=Qe(n),a=yield function(u,h){const m=Qe(u),y=Qe(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>y.yn(D,h).next(T=>T?m.localDocuments.getDocuments(D,T):ue.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield __(i.remoteStore):"acknowledged"===t||"rejected"===t?(wx(i,e,r||null),bx(i,e),h=e,Qe(Qe(i.localStore).mutationQueue).In(h)):ut(),yield hd(i,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Nx.apply(this,arguments)}function Ax(){return Ax=(0,Ee.Z)(function*(n,e){const t=Qe(n);if(Rx(t),Px(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uB(t,r.toArray());t.ac=!0,yield tx(t.remoteStore,!0);for(const a of i)eT(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(E_(t,u),g_(t.localStore,u,!0))),fb(t.remoteStore,u)}),yield i,yield uB(t,r),function(a){const u=Qe(a);u.ic.forEach((h,m)=>{fb(u.remoteStore,m)}),u.rc.cs(),u.ic=new Map,u.sc=new Sr(Ze.comparator)}(t),t.ac=!1,yield tx(t.remoteStore,!1)}}),Ax.apply(this,arguments)}function uB(n,e,t){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,Ee.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[];for(const u of e){let h;const m=r.ec.get(u);if(m&&0!==m.length){h=yield p_(r.localStore,nl(m[0]));for(const y of m){const D=r.tc.get(y),T=yield d8(r,D);T.snapshot&&a.push(T.snapshot)}}else{const y=yield B2(r.localStore,u);h=yield p_(r.localStore,y),yield dx(r,cB(y),u,!1)}i.push(h)}return r.Zu.Go(a),i}),Ox.apply(this,arguments)}function cB(n){return _V(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g8(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).Ri()}function m8(n,e,t,r){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,Ee.Z)(function*(n,e,t,r){const i=Qe(n);if(i.ac)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield U2(i.localStore,bV(a[0])),h=Q0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hd(i,u,h);break}case"rejected":yield g_(i.localStore,e,!0),E_(i,e,r);break;default:ut()}}),Mx.apply(this,arguments)}function _8(n,e,t){return xx.apply(this,arguments)}function xx(){return xx=(0,Ee.Z)(function*(n,e,t){const r=Rx(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const a=yield B2(r.localStore,i),u=yield p_(r.localStore,a);yield dx(r,cB(a),u.targetId,!1),eT(r.remoteStore,u)}for(const i of t)r.ec.has(i)&&(yield g_(r.localStore,i,!1).then(()=>{fb(r.remoteStore,i),E_(r,i)}).catch(Rh))}}),xx.apply(this,arguments)}function Rx(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i8.bind(null,e),e.Zu.Go=KW.bind(null,e.eventManager),e.Zu.lc=ZW.bind(null,e.eventManager),e}function Px(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o8.bind(null,e),e}class dB{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.wt=db(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return k2(this.persistence,new P2,e.initialUser,this.wt)}_c(e){return new x2(KI.Ms,this.wt)}dc(e){return new $2}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hB extends dB{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield Px(r.yc.syncEngine),yield __(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return k2(this.persistence,new P2,e.initialUser,this.wt)}mc(e,t){return new lW(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new G$(t,this.persistence);return new H$(e.asyncQueue,r)}_c(e){const t=AM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new NM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,z2(),XI(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new $2}}class v8 extends hB{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof VM&&(r.sharedClientState.syncEngine={kr:f8.bind(null,i),Or:m8.bind(null,i),Mr:_8.bind(null,i),Ri:g8.bind(null,i),Nr:h8.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,Ee.Z)(function*(u){yield function p8(n,e){return Ax.apply(this,arguments)}(r.yc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}dc(e){const t=z2();if(!VM.V(t))throw new Re(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new VM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kx{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>aB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=u8.bind(null,r.syncEngine),yield tx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new qW}createDatastore(e){const t=db(e.databaseInfo.databaseId),r=new MW(e.databaseInfo);return new PW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>aB(this.syncEngine,h,0),u=W2.V()?new W2:new NW,new FW(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,h,m,y){const D=new e8(r,i,a,u,h,m);return y&&(D.ac=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield m_(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fB(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class nT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class b8{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Di,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new YW(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class w8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,u){const h=Qe(a),m=tb(h.wt)+"/documents",y={documents:u.map(L=>eb(h.wt,L))},D=yield h.ao("BatchGetDocuments",m,y,u.length),T=new Map;D.forEach(L=>{const H=function C3(n,e){return"found"in e?function(t,r){At(!!r.found);const i=Ju(t,r.found.name),a=Ci(r.found.updateTime),u=new Ji({mapValue:{fields:r.found.fields}});return $n.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=Ju(t,r.missing),a=Ci(r.readTime);return $n.newNoDocument(i,a)}(n,e):ut()}(h.wt,L);T.set(H.key.toString(),H)});const O=[];return u.forEach(L=>{const H=T.get(L.toString());At(!!H),O.push(H)}),O}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new u_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ze.fromPath(i);e.mutations.push(new gM(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const u=Qe(i),h=tb(u.wt)+"/documents",m={writes:a.map(y=>nb(u.wt,y))};yield u.ro("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Re(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class E8{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new BM(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ee.Z)(function*(){const t=new w8(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!U0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kV(t)}return!1}}class D8{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ei.UNAUTHENTICATED,this.clientId=zL.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ee.Z)(function*(h){Fe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Fe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=v_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function pB(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield F2(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Fx.apply(this,arguments)}function gB(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Vx(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>X2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>X2(e.remoteStore,a)),n.onlineComponents=e}),Lx.apply(this,arguments)}function Vx(n){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Ee.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield pB(n,new dB)),n.offlineComponents}),Bx.apply(this,arguments)}function rT(n){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,Ee.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield gB(n,new kx)),n.onlineComponents}),Ux.apply(this,arguments)}function mB(n){return Vx(n).then(e=>e.persistence)}function jx(n){return Vx(n).then(e=>e.localStore)}function _B(n){return rT(n).then(e=>e.remoteStore)}function Hx(n){return rT(n).then(e=>e.syncEngine)}function D_(n){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,Ee.Z)(function*(n){const e=yield rT(n),t=e.eventManager;return t.onListen=t8.bind(null,e.syncEngine),t.onUnlisten=n8.bind(null,e.syncEngine),t}),Gx.apply(this,arguments)}function yB(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,u,h,m){const y=new nT({next:T=>{a.enqueueAndForget(()=>ox(i,D));const O=T.docs.has(u);!O&&T.fromCache?m.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&h&&"server"===h.source?m.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),D=new ux(i_(u.path),y,{includeMetadataChanges:!0,Du:!0});return ix(i,D)}(yield D_(n),n.asyncQueue,e,t,r)})),r.promise}function vB(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,u,h,m){const y=new nT({next:T=>{a.enqueueAndForget(()=>ox(i,D)),T.fromCache&&"server"===h.source?m.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),D=new ux(u,y,{includeMetadataChanges:!0,Du:!0});return ix(i,D)}(yield D_(n),n.asyncQueue,e,t,r)})),r.promise}const bB=new Map;function $x(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wB(n,e,t,r){if(!0===e&&!0===r)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EB(n){if(!Ze.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DB(n){if(Ze.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iT(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CB(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class IB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IB({}),this._settingsFrozen=!1,e instanceof ud?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ud(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new x$;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new F$(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bB.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),bB.delete(e),t.terminate())}(this),Promise.resolve()}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class ec extends ms{constructor(e,t,r){super(e,t,i_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new Ze(e))}withConverter(e){return new ec(this.firestore,e,this._path)}}function TB(n,e,...t){if(n=(0,P.m9)(n),$x("collection","path",e),n instanceof pb){const r=an.fromString(e,...t);return DB(r),new ec(n,null,r)}{if(!(n instanceof er||n instanceof ec))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return DB(r),new ec(n.firestore,null,r)}}function sT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=zL.I()),$x("doc","path",e),n instanceof pb){const r=an.fromString(e,...t);return EB(r),new er(n,null,new Ze(r))}{if(!(n instanceof er||n instanceof ec))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return EB(r),new er(n.firestore,n instanceof ec?n.converter:null,new Ze(r))}}function SB(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof er||n instanceof ec)&&(e instanceof er||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NB(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof ms&&e instanceof ms&&n.firestore===e.firestore&&z0(n._query,e._query)&&n.converter===e.converter}class P8{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new BM(this,"async_queue_retry"),this.Kc=()=>{const t=XI();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=XI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=XI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Di;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ph(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Wr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=rx.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&ut()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Wx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class k8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends pb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new P8,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||AB(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||AB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function AB(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new z$(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new D8(n._authCredentials,n._appCheckCredentials,n._queue,r)}function OB(n,e,t){const r=new Di;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield pB(n,t),yield gB(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function MB(n){if(n._initialized||n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(ni.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tc(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Up{constructor(e){this._methodName=e}}class oT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const W8=/^__.*__$/;class z8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dd(e,this.data,this.fieldMask,t,this.fieldTransforms):new l_(e,this.data,t,this.fieldTransforms)}}class xB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class aT{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new aT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return cT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(RB(this.Zc)&&W8.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class q8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||db(e)}aa(e,t,r,i=!1){return new aT({Zc:e,methodName:t,ca:r,path:Lr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function jp(n){const e=n._freezeSettings(),t=db(n._databaseId);return new q8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lT(n,e,t,r,i,a={}){const u=n.aa(a.merge||a.mergeFields?2:0,e,t,i);Zx("Data must be an object, but it was:",u,r);const h=FB(r,u);let m,y;if(a.merge)m=new sa(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const D=[];for(const T of a.mergeFields){const O=Yx(e,T,t);if(!u.contains(O))throw new Re(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);VB(D,O)||D.push(O)}m=new sa(D),y=u.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,y=u.fieldTransforms;return new z8(new Ji(h),m,y)}class gb extends Up{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gb}}function PB(n,e,t){return new aT({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class zx extends Up{_toFieldTransform(e){return new q0(e.path,new o_)}isEqual(e){return e instanceof zx}}class K8 extends Up{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=PB(this,e,!0),r=this.ha.map(a=>Hp(a,t)),i=new Op(r);return new q0(e.path,i)}isEqual(e){return this===e}}class Z8 extends Up{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=PB(this,e,!0),r=this.ha.map(a=>Hp(a,t)),i=new Mp(r);return new q0(e.path,i)}isEqual(e){return this===e}}class Y8 extends Up{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new a_(e.wt,CV(e.wt,this.la));return new q0(e.path,t)}isEqual(e){return this===e}}function qx(n,e,t,r){const i=n.aa(1,e,t);Zx("Data must be an object, but it was:",i,r);const a=[],u=Ji.empty();Ip(r,(m,y)=>{const D=uT(e,m,t);y=(0,P.m9)(y);const T=i.ia(D);if(y instanceof gb)a.push(D);else{const O=Hp(y,T);null!=O&&(a.push(D),u.set(D,O))}});const h=new sa(a);return new xB(u,h,i.fieldTransforms)}function Kx(n,e,t,r,i,a){const u=n.aa(1,e,t),h=[Yx(e,r,t)],m=[i];if(a.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)h.push(Yx(e,a[O])),m.push(a[O+1]);const y=[],D=Ji.empty();for(let O=h.length-1;O>=0;--O)if(!VB(y,h[O])){const L=h[O];let H=m[O];H=(0,P.m9)(H);const ee=u.ia(L);if(H instanceof gb)y.push(L);else{const he=Hp(H,ee);null!=he&&(y.push(L),D.set(L,he))}}const T=new sa(y);return new xB(D,T,u.fieldTransforms)}function kB(n,e,t,r=!1){return Hp(t,n.aa(r?4:3,e))}function Hp(n,e){if(LB(n=(0,P.m9)(n)))return Zx("Unsupported field value:",e,n),FB(n,e);if(n instanceof Up)return function(t,r){if(!RB(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let h=Hp(u,r.ra(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CV(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=cr.fromDate(t);return{timestampValue:X0(r.wt,i)}}if(t instanceof cr){const i=new cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:X0(r.wt,i)}}if(t instanceof oT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tc)return{bytesValue:WV(r.wt,t._byteString)};if(t instanceof er){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${iT(t)}`)}(n,e)}function FB(n,e){const t={};return eV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ip(n,(r,i)=>{const a=Hp(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function LB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof oT||n instanceof tc||n instanceof er||n instanceof Up)}function Zx(n,e,t){if(!LB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iT(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function Yx(n,e,t){if((e=(0,P.m9)(e))instanceof fd)return e._internalPath;if("string"==typeof e)return uT(n,e);throw cT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q8=new RegExp("[~\\*/\\[\\]]");function uT(n,e,t){if(e.search(Q8)>=0)throw cT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch{throw cT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cT(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Re(ge.INVALID_ARGUMENT,h+n+m)}function VB(n,e){return n.some(t=>t.isEqual(e))}class mb{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new J8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class J8 extends mb{data(){return super.data()}}function dT(n,e){return"string"==typeof e?uT(n,e):e instanceof fd?e._internalPath:e._delegate._internalPath}class Gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pd extends mb{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _b(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _b extends pd{data(e={}){return super.data(e)}}class Wh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _b(this._firestore,this._userDataWriter,r.key,r,new Gp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new _b(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Gp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new _b(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Gp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),y=a.indexOf(u.doc.key)),{type:X8(u.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function X8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function BB(n,e){return n instanceof pd&&e instanceof pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wh&&e instanceof Wh&&n._firestore===e._firestore&&NB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function UB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yb{}function zh(n,...e){for(const t of e)n=t._apply(n);return n}class ez extends yb{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=jp(e.firestore),r=function(i,a,u,h,m,y,D){let T;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){zB(D,y);const L=[];for(const H of D)L.push(WB(h,i,H));T={arrayValue:{values:L}}}else T=WB(h,i,D)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||zB(D,y),T=kB(u,"where",D,"in"===y||"not-in"===y);const O=Xi.create(m,y,T);return function(L,H){if(H.ht()){const he=dM(L);if(null!==he&&!he.isEqual(H.field))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${he.toString()}' and '${H.field.toString()}'`);const Ge=cM(L);null!==Ge&&qB(0,H.field,Ge)}const ee=function(he,Ge){for(const Ve of he.filters)if(Ge.indexOf(Ve.op)>=0)return Ve.op;return null}(L,function(he){switch(he){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==ee)throw new Re(ge.INVALID_ARGUMENT,ee===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ms(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new cd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class nz extends yb{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new r_(i,a);return function(h,m){if(null===cM(h)){const y=dM(h);null!==y&&qB(0,y,m.field)}}(r,u),u}(e._query,this.fa,this.wa);return new ms(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new cd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class jB extends yb{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new ms(e.firestore,e.converter,yV(e._query,this.ma,this.ga))}}class HB extends yb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=$B(e,this.type,this.ya,this.pa);return new ms(e.firestore,e.converter,(i=t,new cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class GB extends yb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=$B(e,this.type,this.ya,this.pa);return new ms(e.firestore,e.converter,(i=t,new cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function $B(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof mb)return function(i,a,u,h,m){if(!h)throw new Re(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const D of s_(i))if(D.field.isKeyField())y.push(Np(a,h.key));else{const T=h.data.field(D.field);if(aM(T))throw new Re(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const O=D.field.canonicalString();throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}y.push(T)}return new Vh(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=jp(n.firestore);return function(a,u,h,m,y,D){const T=a.explicitOrderBy;if(y.length>T.length)throw new Re(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let L=0;L<y.length;L++){const H=y[L];if(T[L].field.isKeyField()){if("string"!=typeof H)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof H}`);if(!hM(a)&&-1!==H.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${H}' contains a slash.`);const ee=a.path.child(an.fromString(H));if(!Ze.isDocumentKey(ee))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const he=new Ze(ee);O.push(Np(u,he))}else{const ee=kB(h,m,H);O.push(ee)}}return new Vh(O,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WB(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hM(e)&&-1!==t.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Ze.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Np(n,new Ze(r))}if(t instanceof er)return Np(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iT(t)}.`)}function zB(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qB(n,e,t){if(!t.isEqual(e))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const cz={maxAttempts:5};class Qx{convertValue(e,t="none"){switch(Sp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return Ip(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new oT(Nr(e.latitude),Nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(B0(e));default:return null}}convertTimestamp(e){const t=kh(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);At(t2(r));const i=new ud(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||Wr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function hT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dz extends Qx{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class KB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jp(e)}set(e,t,r){this._verifyNotCommitted();const i=qh(e,this._firestore),a=hT(i.converter,t,r),u=lT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,vr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=qh(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof fd?Kx(this._dataReader,"WriteBatch.update",a._key,t,r,i):qx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qh(e,this._firestore);return this._mutations=this._mutations.concat(new u_(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $p extends Qx{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function ZB(n,e,t){n=sn(n,er);const r=sn(n.firestore,dr),i=hT(n.converter,e,t);return C_(r,[lT(jp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,vr.none())])}function YB(n,e,t,...r){n=sn(n,er);const i=sn(n.firestore,dr),a=jp(i);let u;return u="string"==typeof(e=(0,P.m9)(e))||e instanceof fd?Kx(a,"updateDoc",n._key,e,t,r):qx(a,"updateDoc",n._key,e),C_(i,[u.toMutation(n._key,vr.exists(!0))])}function QB(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Wx(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(Wx(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let m,y,D;if(n instanceof er)y=sn(n.firestore,dr),D=i_(n._key.path),m={next:T=>{e[u]&&e[u](Jx(y,n,T))},error:e[u+1],complete:e[u+2]};else{const T=sn(n,ms);y=sn(T.firestore,dr),D=T._query;const O=new $p(y);m={next:L=>{e[u]&&e[u](new Wh(y,O,T,L))},error:e[u+1],complete:e[u+2]},UB(n._query)}return function(T,O,L,H){const ee=new nT(H),he=new ux(O,ee,L);return T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return ix(yield D_(T),he)})),()=>{ee.Tc(),T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return ox(yield D_(T),he)}))}}(qr(y),D,h,m)}function C_(n,e){return function(t,r){const i=new Di;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function r8(n,e,t){return px.apply(this,arguments)}(yield Hx(t),r,i)})),i.promise}(qr(n),e)}function Jx(n,e,t){const r=t.docs.get(e._key),i=new $p(n);return new pd(n,i,e._key,r,new Gp(t.hasPendingWrites,t.fromCache),e.converter)}class wz extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jp(e)}get(e){const t=qh(e,this._firestore),r=new dz(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new mb(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new mb(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=qh(e,this._firestore),a=hT(i.converter,t,r),u=lT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=qh(e,this._firestore);let u;return u="string"==typeof(t=(0,P.m9)(t))||t instanceof fd?Kx(this._dataReader,"Transaction.update",a._key,t,r,i):qx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qh(e,this._firestore),r=new $p(this._firestore);return super.get(e).then(i=>new pd(this._firestore,r,t._key,i._document,new Gp(!1,!1),t.converter))}}function Xx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function XB(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function eU(){if(!function $$(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xm=ta.SDK_VERSION,(0,ta._registerComponent)(new Zu.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new dr(i,new P$(t.getProvider("auth-internal")),new L$(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ta.registerVersion)(GL,"3.4.13",n),(0,ta.registerVersion)(GL,"3.4.13","esm2017")}();class vb{constructor(e){this._delegate=e}static fromBase64String(e){return eU(),new vb(tc.fromBase64String(e))}static fromUint8Array(e){return XB(),new vb(tc.fromUint8Array(e))}toBase64(){return eU(),this._delegate.toBase64()}toUint8Array(){return XB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eR(n){return function Oz(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Mz{enableIndexedDbPersistence(e,t){return function L8(n,e){MB(n=sn(n,dr));const t=qr(n),r=n._freezeSettings(),i=new kx;return OB(t,i,new hB(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function V8(n){MB(n=sn(n,dr));const e=qr(n),t=n._freezeSettings(),r=new kx;return OB(e,r,new v8(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function B8(n){if(n._initialized&&!n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!ql.V())return Promise.resolve();const i=r+"main";yield ql.delete(i)}),function(r){return t.apply(this,arguments)})(AM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class tU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ud||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&k0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function x8(n,e,t,r={}){var i;const a=(n=sn(n,pb))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&k0("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Ei.MOCK_USER;else{u=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ei(m)}n._authCredentials=new R$(new $L(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function j8(n){return function C8(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield mB(n),t=yield _B(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.lu.delete(0),hb(i)}(t)}))}(qr(n=sn(n,dr)))}(this._delegate)}disableNetwork(){return function H8(n){return function I8(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield mB(n),t=yield _B(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=Qe(i);a.lu.add(0),yield m_(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=sn(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function U8(n){return function(e){const t=new Di;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function a8(n,e){return vx.apply(this,arguments)}(yield Hx(e),t)})),t.promise}(qr(n=sn(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function bz(n,e){return function N8(n,e){const t=new nT(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield D_(n),i=t,Qe(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield D_(n),i=t,void Qe(r).Tu.delete(i);var r,i}))}}(qr(n=sn(n,dr)),Wx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new I_(this,TB(this._delegate,e))}catch(t){throw Bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new rl(this,sT(this._delegate,e))}catch(t){throw Bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Us(this,function R8(n,e){if(n=sn(n,pb),$x("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(n,null,(t=e,new cd(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ez(n,e,t){n=sn(n,dr);const r=Object.assign(Object.assign({},cz),t);return function(i){if(i.maxAttempts<1)throw new Re(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function A8(n,e,t){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const i=yield(a=n,rT(a).then(u=>u.datastore));var a;new E8(n.asyncQueue,i,t,e,r).run()})),r.promise}(qr(n),i=>e(new wz(n,i)),r)}(this._delegate,t=>e(new nU(this,t)))}batch(){return qr(this._delegate),new rU(new KB(this._delegate,e=>C_(this._delegate,e)))}loadBundle(e){return function G8(n,e){const t=qr(n=sn(n,dr)),r=new k8;return function O8(n,e,t,r){const i=function(a,u){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,y){if(m instanceof Uint8Array)return fB(m,y);if(m instanceof ArrayBuffer)return fB(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new b8(m,u);var m}(t,db(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function y8(n,e,t){const r=Qe(n);var i;(i=(0,Ee.Z)(function*(a,u,h){try{const m=yield u.getMetadata();if(yield function(O,L){const H=Qe(O),ee=Ci(L.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",he=>H.Ds.getBundleMetadata(he,L.id)).then(he=>!!he&&he.createTime.compareTo(ee)>=0)}(a.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(O=m).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);h._updateProgress(nB(m));const y=new QW(m,a.localStore,u.wt);let D=yield u.fc();for(;D;){const O=yield y.Nu(D);O&&h._updateProgress(O),D=yield u.fc()}const T=yield y.complete();return yield hd(a,T.Mu,void 0),yield function(O,L){const H=Qe(O);return H.persistence.runTransaction("Save bundle","readwrite",ee=>H.Ds.saveBundleMetadata(ee,L))}(a.localStore,m),h._completeWith(T.progress),Promise.resolve(T.Ou)}catch(m){return k0("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var O}),function(a,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Hx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $8(n,e){return function M8(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield jx(n),e)}))}(qr(n=sn(n,dr)),e).then(t=>t?new ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Us(this,t):null)}}class fT extends Qx{constructor(e){super(),this.firestore=e}convertBytes(e){return new vb(new tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return rl.forKey(t,this.firestore,null)}}class nU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}get(e){const t=zp(e);return this._delegate.get(t).then(r=>new bb(this._firestore,new pd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zp(e);return r?(Xx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}}class rU{constructor(e){this._delegate=e}set(e,t,r){const i=zp(e);return r?(Xx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _b(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Wp(e,new fT(e),t),i.set(t,a)),a}}Wp.INSTANCES=new WeakMap;class rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rl(t,new er(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new rl(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new I_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new I_(this.firestore,TB(this._delegate,e))}catch(t){throw Bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof er&&SB(this._delegate,e)}set(e,t){t=Xx("DocumentReference.set",t);try{return t?ZB(this._delegate,e,t):ZB(this._delegate,e)}catch(r){throw Bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?YB(this._delegate,e):YB(this._delegate,e,t,...r)}catch(i){throw Bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function yz(n){return C_(sn(n.firestore,dr),[new u_(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=iU(e),r=sU(e,i=>new bb(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return QB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function fz(n){n=sn(n,er);const e=sn(n.firestore,dr),t=qr(e),r=new $p(e);return function T8(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,u){try{const h=yield function(m,y){const D=Qe(m);return D.persistence.runTransaction("read document","readonly",T=>D.localDocuments.getDocument(T,y))}(i,a);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Re(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=v_(h,`Failed to get document '${a} from cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield jx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new pd(e,r,n._key,i,new Gp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function pz(n){n=sn(n,er);const e=sn(n.firestore,dr);return yB(qr(e),n._key,{source:"server"}).then(t=>Jx(e,n,t))}(this._delegate):function hz(n){n=sn(n,er);const e=sn(n.firestore,dr);return yB(qr(e),n._key).then(t=>Jx(e,n,t))}(this._delegate),t.then(r=>new bb(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new rl(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function Bs(n,e,t){return n.message=n.message.replace(e,t),n}function iU(n){for(const e of n)if("object"==typeof e&&!eR(e))return e;return{}}function sU(n,e){var t,r;let i;return i=eR(n[0])?n[0]:eR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class bb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new rl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BB(this._delegate,e._delegate)}}class wb extends bb{data(e){const t=this._delegate.data(e);return function M$(n,e){n||ut()}(void 0!==t),t}}class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}where(e,t,r){try{return new Us(this.firestore,zh(this._delegate,function tz(n,e,t){const r=e,i=dT("where",n);return new ez(i,r,t)}(e,t,r)))}catch(i){throw Bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Us(this.firestore,zh(this._delegate,function rz(n,e="asc"){const t=e,r=dT("orderBy",n);return new nz(r,t)}(e,t)))}catch(r){throw Bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Us(this.firestore,zh(this._delegate,function iz(n){return CB("limit",n),new jB("limit",n,"F")}(e)))}catch(t){throw Bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Us(this.firestore,zh(this._delegate,function sz(n){return CB("limitToLast",n),new jB("limitToLast",n,"L")}(e)))}catch(t){throw Bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Us(this.firestore,zh(this._delegate,function oz(...n){return new HB("startAt",n,!0)}(...e)))}catch(t){throw Bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Us(this.firestore,zh(this._delegate,function az(...n){return new HB("startAfter",n,!1)}(...e)))}catch(t){throw Bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Us(this.firestore,zh(this._delegate,function lz(...n){return new GB("endBefore",n,!1)}(...e)))}catch(t){throw Bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Us(this.firestore,zh(this._delegate,function uz(...n){return new GB("endAt",n,!0)}(...e)))}catch(t){throw Bs(t,"endAt()","Query.endAt()")}}isEqual(e){return NB(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function mz(n){n=sn(n,ms);const e=sn(n.firestore,dr),t=qr(e),r=new $p(e);return function S8(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,u){try{const h=yield YI(i,a,!0),m=new sB(a,h.ji),y=m.Ku(h.documents),D=m.applyChanges(y,!1);u.resolve(D.snapshot)}catch(h){const m=v_(h,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield jx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wh(e,r,n,i))}(this._delegate):"server"===e?.source?function _z(n){n=sn(n,ms);const e=sn(n.firestore,dr),t=qr(e),r=new $p(e);return vB(t,n._query,{source:"server"}).then(i=>new Wh(e,r,n,i))}(this._delegate):function gz(n){n=sn(n,ms);const e=sn(n.firestore,dr),t=qr(e),r=new $p(e);return UB(n._query),vB(t,n._query).then(i=>new Wh(e,r,n,i))}(this._delegate),t.then(r=>new tR(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=iU(e),r=sU(e,i=>new tR(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return QB(this._delegate,t,r)}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}class Rz{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Rz(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new wb(this._firestore,r))})}isEqual(e){return BB(this._delegate,e._delegate)}}class I_ extends Us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rl(this.firestore,e):null}doc(e){try{return new rl(this.firestore,void 0===e?sT(this._delegate):sT(this._delegate,e))}catch(t){throw Bs(t,"doc()","CollectionReference.doc()")}}add(e){return function vz(n,e){const t=sn(n.firestore,dr),r=sT(n),i=hT(n.converter,e);return C_(t,[lT(jp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new rl(this.firestore,t))}isEqual(e){return SB(this._delegate,e._delegate)}withConverter(e){return new I_(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function zp(n){return sn(n,er)}class nR{constructor(...e){this._delegate=new fd(...e)}static documentId(){return new nR(Lr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof fd&&this._delegate._internalPath.isEqual(e._internalPath)}}class qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Cz(){return new zx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qp(e)}static delete(){const e=function Dz(){return new gb("deleteField")}();return e._methodName="FieldValue.delete",new qp(e)}static arrayUnion(...e){const t=function Iz(...n){return new K8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new qp(t)}static arrayRemove(...e){const t=function Tz(...n){return new Z8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new qp(t)}static increment(e){const t=function Sz(n){return new Y8("increment",n)}(e);return t._methodName="FieldValue.increment",new qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Pz={Firestore:tU,GeoPoint:oT,Timestamp:cr,Blob:vb,Transaction:nU,WriteBatch:rU,DocumentReference:rl,DocumentSnapshot:bb,Query:Us,QueryDocumentSnapshot:wb,QuerySnapshot:tR,CollectionReference:I_,FieldPath:nR,FieldValue:qp,setLogLevel:function xz(n){!function O$(n){xh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function oU(n,e){return function Lz(n,e=$f.z){return new Bn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rR(n,e){return oU(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function pT(n,e){return rR(n,e).pipe(Ra(void 0),uO(),(0,ot.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=i.find(D=>D.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(D=>D.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),a}))}function aU(n,e,t){return pT(n,t).pipe(Rr((r,i)=>function Bz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Uz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Bc(),(0,ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function iR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function lU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Fz(n){(function kz(n,e){n.INTERNAL.registerComponent(new Zu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Pz)))})(n,(e,t)=>new tU(e,t,new Mz)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(SF.Z);class uU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ra(void 0),uO(),Jn(([r,i])=>i.length>0||!r),(0,ot.U)(([r,i])=>i),xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lU(e);return aU(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xn.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(xn.iC)}add(e){return this.ref.add(e)}doc(e){return new cU(this.ref.doc(e),this.afs)}}class cU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=fU(r,t);return new uU(i,a,this.afs)}snapshotChanges(){return function Vz(n,e){return oU(n,e).pipe(Ra(void 0),uO(),(0,ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(xn.iC)}}class jz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Jn(t=>t.length>0),xn.iC):pT(this.query,this.afs.schedulers.outsideAngular).pipe(xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lU(e);return aU(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),xn.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(xn.iC)}}const dU=new d.OlP("angularfire2.enableFirestorePersistence"),hU=new d.OlP("angularfire2.firestore.persistenceSettings"),Hz=new d.OlP("angularfire2.firestore.settings"),Gz=new d.OlP("angularfire2.firestore.use-emulator");function fU(n,e=(t=>t)){return{query:e(n),ref:n}}let $z=(()=>{class n{constructor(t,r,i,a,u,h,m,y,D,T,O,L,H,ee,he,Ge,Ve){this.schedulers=m;const tt=(0,qi.on)(t,h,r),Ye=D;T&&lO(tt,h,O,H,ee,he,L,Ge),[this.firestore,this.persistenceEnabled$]=(0,qi.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const rt=h.runOutsideAngular(()=>tt.firestore());if(a&&rt.settings(a),Ye&&rt.useEmulator(...Ye),i&&!Ed(u)){const ht=()=>{try{return(0,hn.D)(rt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Rt){return typeof console<"u"&&console.warn(Rt),st(!1)}};return[rt,h.runOutsideAngular(ht)]}return[rt,st(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=fU(i,r),h=this.schedulers.ngZone.run(()=>a);return new uU(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new jz(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new cU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(dU,8),d.LFG(Hz,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(xn.HU),d.LFG(hU,8),d.LFG(Gz,8),d.LFG(eI,8),d.LFG(nO,8),d.LFG(rO,8),d.LFG(iO,8),d.LFG(sO,8),d.LFG(oO,8),d.LFG(aO,8),d.LFG(XC,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Wz=(()=>{class n{constructor(){tO.Z.registerVersion("angularfire",xn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dU,useValue:!0},{provide:hU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$z]}),n})();const pU="@firebase/database";let sR="";function mU(n){sR=n}class qz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Kz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const _U=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qz(e)}}catch{}return new Kz},Kp=_U("localStorage"),oR=_U("sessionStorage"),T_=new tl.Yd("@firebase/database"),yU=function(){let n=1;return function(){return n++}}(),vU=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},Eb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Eb.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Zp=null,bU=!0;const wU=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(T_.logLevel=tl.in.VERBOSE,Zp=T_.log.bind(T_),e&&oR.set("logging_enabled",!0)):"function"==typeof n?Zp=n:(Zp=null,oR.remove("logging_enabled"))},Si=function(...n){if(!0===bU&&(bU=!1,null===Zp&&!0===oR.get("logging_enabled")&&wU(!0)),Zp){const e=Eb.apply(null,n);Zp(e)}},Db=function(n){return function(...e){Si(n,...e)}},aR=function(...n){const e="FIREBASE INTERNAL ERROR: "+Eb(...n);T_.error(e)},nc=function(...n){const e=`FIREBASE FATAL ERROR: ${Eb(...n)}`;throw T_.error(e),new Error(e)},_s=function(...n){const e="FIREBASE WARNING: "+Eb(...n);T_.warn(e)},gT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},gd="[MIN_NAME]",rc="[MAX_NAME]",Yp=function(n,e){if(n===e)return 0;if(n===gd||e===rc)return-1;if(e===gd||n===rc)return 1;{const t=mT(n),r=mT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Qz=function(n,e){return n===e?0:n<e?-1:1},Cb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},lR=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=lR(n[e[r]]);return t+="}",t},EU=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const DU=function(n){(0,P.hu)(!gT(n),"Invalid JSON number");const r=1023;let i,a,u,h,m;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const D=y.join("");let T="";for(m=0;m<64;m+=8){let O=parseInt(D.substr(m,8),2).toString(16);1===O.length&&(O="0"+O),T+=O}return T.toLowerCase()},t6=new RegExp("^-?(0*)\\d{1,10}$"),CU=-2147483648,uR=2147483647,mT=function(n){if(t6.test(n)){const e=Number(n);if(e>=CU&&e<=uR)return e}return null},S_=function(n){try{n()}catch(e){setTimeout(()=>{throw _s("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ib=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class r6{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class i6{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_s(e)}}let Tb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const AU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xU="websocket",RU="long_polling";class dR{constructor(e,t,r,i,a=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function PU(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===xU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==RU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function s6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ni(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class o6{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const hR={},fR={};function pR(n){const e=n.toString();return hR[e]||(hR[e]=new o6),hR[e]}class l6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&S_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Kh{constructor(e,t,r,i,a,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Db(e),this.stats_=pR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),PU(t,RU,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new l6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gR((...a)=>{const[u,h,m,y,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&AU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kh.forceAllow_=!0}static forceDisallow(){Kh.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Kh.forceAllow_&&(Kh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=EU(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=yU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Si("frame writing exception"),h.stack&&Si(h.stack),Si(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Si("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Si("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let yT=null;typeof MozWebSocket<"u"?yT=MozWebSocket:typeof WebSocket<"u"&&(yT=WebSocket);let N_=(()=>{class n{constructor(t,r,i,a,u,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Db(this.connId),this.stats_=pR(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&AU.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),u&&(h.p=u),PU(t,xU,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kp.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${sR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new yT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==yT&&!n.forceDisallow_}static previouslyFailed(){return Kp.isInMemoryStorage||!0===Kp.get("previous_websocket_failure")}markConnectionHealthy(){Kp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=EU(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),jU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Kh,N_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=N_&&N_.isAvailable();let i=r&&!N_.previouslyFailed();if(t.webSocketOnly&&(r||_s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[N_];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class KU{constructor(e,t,r,i,a,u,h,m,y,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Db("c:"+this.id+":"),this.transportManager_=new jU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ib(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Cb("t",e),r=Cb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Cb("t",e),r=Cb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Cb("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?aR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&_s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ib(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ib(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ZU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class YU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vT extends YU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vT}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new _n("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zh(n){return n.pieces_.length-n.pieceNum_}function Pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _n(n.pieces_,e)}function _R(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Sb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function XU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _n(e,0)}function hr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _n(t,0)}function Kt(n){return n.pieceNum_>=n.pieces_.length}function js(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return js(Pn(n),Pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function O6(n,e){const t=Sb(n,0),r=Sb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Yp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function yR(n,e){if(Zh(n)!==Zh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function il(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Zh(n)>Zh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class M6{constructor(e,t){this.errorPrefix_=t,this.parts_=Sb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);ej(this)}}function ej(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qp(n))}function Qp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class vR extends YU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new vR}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nb=1e3;let wT,Jp=(()=>{class n extends ZU{constructor(t,r,i,a,u,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Db("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,P.Pz)(u)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const y=m.d,D=m.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();_s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,h=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):aR("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const D=function(){y?y.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(L){(0,P.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,H]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);m?Si("getToken() completed but was canceled"):(Si("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=H&&H.token,y=new KU(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ee=>{_s(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),m||(t.repoInfo_.nodeAdmin&&_s(L),D())}}})()}interrupt(t){Si("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Si("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Nb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>lR(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new _n(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Si("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Si("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sR.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vT.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class bT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Jt(gd,e),i=new Jt(gd,t);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class rj extends bT{static get __EMPTY_NODE(){return wT}static set __EMPTY_NODE(e){wT=e}compare(e,t){return Yp(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(rc,wT)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,wT)}toString(){return".key"}}const ic=new rj;class ET{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let wR,Kl=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??yo.EMPTY_NODE,this.right=u??yo.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return yo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return yo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class yo{constructor(e,t=yo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new yo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Kl.BLACK,null,null))}remove(e){return new yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ET(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ET(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ET(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ET(this.root_,null,this.comparator_,!0,e)}}function B6(n,e){return Yp(n.name,e.name)}function bR(n,e){return Yp(n,e)}yo.EMPTY_NODE=new class V6{copy(e,t,r,i,a){return this}insert(e,t,r){return new Kl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ij=function(n){return"number"==typeof n?"number:"+DU(n):"string:"+n},sj=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===wR||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===wR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oj,aj,lj,A_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),sj(this.priorityNode_)}static set __childrenNodeConstructor(t){oj=t}static get __childrenNodeConstructor(){return oj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Kt(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Zh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ij(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?DU(this.value_):this.value_,this.lazyHash_=vU(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wn=new class G6 extends bT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Yp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(rc,new A_("[PRIORITY-POST]",lj))}makePost(e,t){const r=aj(e);return new Jt(t,new A_("[PRIORITY-POST]",r))}toString(){return".priority"}},$6=Math.log(2);class W6{constructor(e){this.count=parseInt(Math.log(e+1)/$6,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const DT=function(n,e,t,r){n.sort(e);const i=function(m,y){const D=y-m;let T,O;if(0===D)return null;if(1===D)return T=n[m],O=t?t(T):T,new Kl(O,T.node,Kl.BLACK,null,null);{const L=parseInt(D/2,10)+m,H=i(m,L),ee=i(L+1,y);return T=n[L],O=t?t(T):T,new Kl(O,T.node,Kl.BLACK,H,ee)}},h=function(m){let y=null,D=null,T=n.length;const O=function(H,ee){const he=T-H,Ge=T;T-=H;const Ve=i(he+1,Ge),tt=n[he],Ye=t?t(tt):tt;L(new Kl(Ye,tt.node,ee,null,Ve))},L=function(H){y?(y.left=H,y=H):(D=H,y=H)};for(let H=0;H<m.count;++H){const ee=m.nextBitIsOne(),he=Math.pow(2,m.count-(H+1));ee?O(he,Kl.BLACK):(O(he,Kl.BLACK),O(he,Kl.RED))}return D}(new W6(n.length));return new yo(r||e,h)};let ER;const O_={};class md{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(O_&&Wn,"ChildrenNode.ts has not been loaded"),ER=ER||new md({".priority":O_},{".priority":Wn}),ER}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yo?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==ic,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Jt.Wrap);let h,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();h=i?DT(r,e.getCompare()):O_;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new md(D,y)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const u=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(u,"Missing index implementation for "+a),i===O_){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(Jt.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),DT(h,u.getCompare())}return O_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Jt(e.name,h))),m.insert(e,e.node)}});return new md(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===O_)return i;{const a=t.get(e.name);return a?i.remove(new Jt(e.name,a)):i}});return new md(r,this.indexSet_)}}let Ab,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&sj(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ab||(Ab=new n(new yo(bR),null,md.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ab}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ab:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(Pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Jt(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Ab:this.priorityNode_;return new n(a,h,u)}}updateChild(t,r){const i=qt(t);if(null===i)return r;{(0,P.hu)(".priority"!==qt(t)||1===Zh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Pn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Wn,(h,m)=>{r[h]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):u=!1}),!t&&u&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+ij(this.getPriority().val())+":"),this.forEachChild(Wn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":vU(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new Jt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Jt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Jt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ob?-1:0}withIndex(t){if(t===ic||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ic||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Wn),a=r.getIterator(Wn);let u=i.getNext(),h=a.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=a.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===ic?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ob=new class z6 extends Vt{constructor(){super(new yo(bR),Vt.EMPTY_NODE,md.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new A_(n,br(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Ni(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=br(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(Ni(n,(u,h)=>{if("."!==u.substring(0,1)){const m=br(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Jt(u,m)))}}),0===t.length)return Vt.EMPTY_NODE;const a=DT(t,B6,u=>u.name,bR);if(r){const u=DT(t,Wn.getCompare());return new Vt(a,br(e),new md({".priority":u},{".priority":Wn}))}return new Vt(a,br(e),md.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(gd,Vt.EMPTY_NODE)},MAX:{value:new Jt(rc,Ob)}}),rj.__EMPTY_NODE=Vt.EMPTY_NODE,A_.__childrenNodeConstructor=Vt,function U6(n){wR=n}(Ob),function H6(n){lj=n}(Ob),function j6(n){aj=n}(br);class DR extends bT{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Kt(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Yp(e.name,t.name):a}makePost(e,t){const r=br(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,Ob);return new Jt(rc,e)}toString(){return Sb(this.indexPath_,0).join("/")}}const CR=new class K6 extends bT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Yp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const r=br(e);return new Jt(t,r)}toString(){return".value"}},M_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z6=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=M_.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=M_.charAt(e[i]);return(0,P.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),dj=function(n){if(n===""+uR)return"-";const e=mT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return rc;const a=M_.charAt(M_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},hj=function(n){if(n===""+CU)return gd;const e=mT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+uR:(delete t[t.length-1],t.join("")):(t[t.length-1]=M_.charAt(M_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function fj(n){return{type:"value",snapshotNode:n}}function x_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Mb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function xb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class TR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Mb(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(x_(t,r)):u.trackChildChange(xb(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Wn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Mb(i,a))}),t.isLeafNode()||t.forEachChild(Wn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(xb(i,a,u))}else r.trackChildChange(x_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Rb{constructor(e){this.indexedFilter_=new TR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rb.getStartPost_(e),this.endPost_=Rb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new Jt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const a=this;return t.forEachChild(Wn,(u,h)=>{a.matches(new Jt(u,h))||(i=i.updateImmediateChild(u,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Q6{constructor(e){this.rangedFilter_=new Rb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new Jt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let a,u,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();h=(O,L)=>T(L,O)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,D=!1;for(;m.hasNext();){const T=m.getNext();!D&&h(a,T)<=0&&(D=!0),D&&y<this.limit_&&h(T,u)<=0?y++:i=i.updateImmediateChild(T.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const T=this.index_.getCompare();u=(O,L)=>T(L,O)}else u=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const m=new Jt(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const T=h.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=O&&(O.name===t||h.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const L=null==O?1:u(O,m);if(D&&!r.isEmpty()&&L>=0)return a?.trackChildChange(xb(t,r,T)),h.updateImmediateChild(t,r);{a?.trackChildChange(Mb(t,T));const ee=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(a?.trackChildChange(x_(O.name,O.node)),ee.updateImmediateChild(O.name,O.node)):ee}}return r.isEmpty()?e:D&&u(y,m)>=0?(null!=a&&(a.trackChildChange(Mb(y.name,y.node)),a.trackChildChange(x_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Vt.EMPTY_NODE)):e}}class CT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wn}copy(){const e=new CT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function SR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function NR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function IT(n,e){const t=n.copy();return t.index_=e,t}function pj(n){const e={};if(n.isDefault())return e;let t;return n.index_===Wn?t="$priority":n.index_===CR?t="$value":n.index_===ic?t="$key":((0,P.hu)(n.index_ instanceof DR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Wn&&(e.i=n.index_.toString()),e}class TT extends ZU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Db("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=TT.getListenId_(e,r),h={};this.listens_[u]=h;const m=pj(e._queryParams);this.restRequest_(a+".json",m,(y,D)=>{let T=D;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(a,T,!1,r),(0,P.DV)(this.listens_,u)===h){let O;O=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(O,null)}})}unlisten(e,t){const r=TT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=pj(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,u)=>{let h=u;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,P.cI)(h.responseText)}catch{_s("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&_s("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class r4{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ST(){return{value:null,children:new Map}}function R_(n,e,t){if(Kt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,ST()),R_(n.children.get(r),e=Pn(e),t)}}function AR(n,e){if(Kt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Wn,(r,i)=>{R_(n,new _n(r),i)}),AR(n,e)}}if(n.children.size>0){const t=qt(e);return e=Pn(e),n.children.has(t)&&AR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function OR(n,e,t){null!==n.value?t(e,n.value):function i4(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{OR(i,new _n(e.toString()+"/"+r),t)})}class s4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ni(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class l4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new s4(e);const r=1e4+2e4*Math.random();Ib(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ni(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Ib(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var sl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(sl||(sl={})),sl))();function RR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class NT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=sl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _n(e));return new NT(gn(),t,this.revert)}}return(0,P.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new NT(Pn(this.path),this.affectedTree,this.revert)}}class Pb{constructor(e,t){this.source=e,this.path=t,this.type=sl.LISTEN_COMPLETE}operationForChild(e){return Kt(this.path)?new Pb(this.source,gn()):new Pb(this.source,Pn(this.path))}}class Xp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=sl.OVERWRITE}operationForChild(e){return Kt(this.path)?new Xp(this.source,gn(),this.snap.getImmediateChild(e)):new Xp(this.source,Pn(this.path),this.snap)}}class P_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=sl.MERGE}operationForChild(e){if(Kt(this.path)){const t=this.children.subtree(new _n(e));return t.isEmpty()?null:t.value?new Xp(this.source,gn(),t.value):new P_(this.source,gn(),t)}return(0,P.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new P_(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kt(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class u4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kb(n,e,t,r,i,a){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function h4(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Jt(e.childName,e.snapshotNode),i=new Jt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),u.forEach(h=>{const m=function d4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function AT(n,e){return{eventCache:n,serverCache:e}}function Fb(n,e,t,r){return AT(new Yh(e,t,r),n.serverCache)}function _j(n,e,t,r){return AT(n.eventCache,new Yh(e,t,r))}function OT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function eg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let PR;class zn{constructor(e,t=(()=>(PR||(PR=new yo(Qz)),PR))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return Ni(e,(r,i)=>{t=t.set(new _n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Kt(e))return null;{const r=qt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Pn(e),t);return null!=a?{path:hr(new _n(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Kt(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(Pn(e)):new zn(null)}}set(e,t){if(Kt(e))return new zn(t,this.children);{const r=qt(e),a=(this.children.get(r)||new zn(null)).set(Pn(e),t),u=this.children.insert(r,a);return new zn(this.value,u)}}remove(e){if(Kt(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const i=r.remove(Pn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new zn(null):new zn(this.value,a)}return this}}get(e){if(Kt(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(Pn(e)):null}}setTree(e,t){if(Kt(e))return t;{const r=qt(e),a=(this.children.get(r)||new zn(null)).setTree(Pn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new zn(this.value,u)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(hr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Kt(e))return null;{const a=qt(e),u=this.children.get(a);return u?u.findOnPath_(Pn(e),hr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Kt(e))return this;{this.value&&r(t,this.value);const i=qt(e),a=this.children.get(i);return a?a.foreachOnPath_(Pn(e),hr(t,i),r):new zn(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(hr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Zl{constructor(e){this.writeTree_=e}static empty(){return new Zl(new zn(null))}}function Lb(n,e,t){if(Kt(e))return new Zl(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=js(i,e);return a=a.updateChild(u,t),new Zl(n.writeTree_.set(i,a))}{const i=new zn(t),a=n.writeTree_.setTree(e,i);return new Zl(a)}}}function kR(n,e,t){let r=n;return Ni(t,(i,a)=>{r=Lb(r,hr(e,i),a)}),r}function yj(n,e){if(Kt(e))return Zl.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new Zl(t)}}function FR(n,e){return null!=tg(n,e)}function tg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(js(t.path,e)):null}function vj(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wn,(r,i)=>{e.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Jt(r,i.value))}),e}function Qh(n,e){if(Kt(e))return n;{const t=tg(n,e);return new Zl(null!=t?new zn(t):n.writeTree_.subtree(e))}}function LR(n){return n.writeTree_.isEmpty()}function k_(n,e){return bj(gn(),n.writeTree_,e)}function bj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=bj(hr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(hr(n,".priority"),r)),t}}function MT(n,e){return Ij(e,n)}function y4(n,e){if(n.snap)return il(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&il(hr(n.path,t),e))return!0;return!1}function b4(n){return n.visible}function wj(n,e,t){let r=Zl.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let h;if(a.snap)il(t,u)?(h=js(t,u),r=Lb(r,h,a.snap)):il(u,t)&&(h=js(u,t),r=Lb(r,gn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(il(t,u))h=js(t,u),r=kR(r,h,a.children);else if(il(u,t))if(h=js(u,t),Kt(h))r=kR(r,gn(),a.children);else{const m=(0,P.DV)(a.children,qt(h));if(m){const y=m.getChild(Pn(h));r=Lb(r,gn(),y)}}}}}return r}function Ej(n,e,t,r,i){if(r||i){const a=Qh(n.visibleWrites,e);return!i&&LR(a)?t:i||null!=t||FR(a,gn())?k_(wj(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(il(y.path,e)||il(e,y.path))},e),t||Vt.EMPTY_NODE):null}{const a=tg(n.visibleWrites,e);if(null!=a)return a;{const u=Qh(n.visibleWrites,e);return LR(u)?t:null!=t||FR(u,gn())?k_(u,t||Vt.EMPTY_NODE):null}}}function xT(n,e,t,r){return Ej(n.writeTree,n.treePath,e,t,r)}function VR(n,e){return function w4(n,e,t){let r=Vt.EMPTY_NODE;const i=tg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Qh(n.visibleWrites,e);return t.forEachChild(Wn,(u,h)=>{const m=k_(Qh(a,new _n(u)),h);r=r.updateImmediateChild(u,m)}),vj(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return vj(Qh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function Dj(n,e,t,r){return function E4(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=hr(e,t);if(FR(n.visibleWrites,a))return null;{const u=Qh(n.visibleWrites,a);return LR(u)?i.getChild(t):k_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function RT(n,e){return function C4(n,e){return tg(n.visibleWrites,e)}(n.writeTree,hr(n.treePath,e))}function BR(n,e,t){return function D4(n,e,t,r){const i=hr(e,t),a=tg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?k_(Qh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Cj(n,e){return Ij(hr(n.treePath,e),n.writeTree)}function Ij(n,e){return{treePath:n,writeTree:e}}class N4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,xb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Mb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,x_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,xb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Tj=new class A4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class UR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Yh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:eg(this.viewCache_),a=function S4(n,e,t,r,i,a){return function I4(n,e,t,r,i,a,u){let h;const m=Qh(n.visibleWrites,e),y=tg(m,gn());if(null!=y)h=y;else{if(null==t)return[];h=k_(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const D=[],T=u.getCompare(),O=a?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let L=O.getNext();for(;L&&D.length<i;)0!==T(L,r)&&D.push(L),L=O.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Sj(n,e,t,r,i,a){const u=e.eventCache;if(null!=RT(r,t))return e;{let h,m;if(Kt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=eg(e),T=VR(r,y instanceof Vt?y:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const y=xT(r,eg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=qt(t);if(".priority"===y){(0,P.hu)(1===Zh(t),"Can't have a priority with additional path components");const D=u.getNode();m=e.serverCache.getNode();const T=Dj(r,t,D,m);h=null!=T?n.filter.updatePriority(D,T):u.getNode()}else{const D=Pn(t);let T;if(u.isCompleteForChild(y)){m=e.serverCache.getNode();const O=Dj(r,t,u.getNode(),m);T=null!=O?u.getNode().getImmediateChild(y).updateChild(D,O):u.getNode().getImmediateChild(y)}else T=BR(r,y,e.serverCache);h=null!=T?n.filter.updateChild(u.getNode(),y,T,D,i,a):u.getNode()}}return Fb(e,h,u.isFullyInitialized()||Kt(t),n.filter.filtersNodes())}}function PT(n,e,t,r,i,a,u,h){const m=e.serverCache;let y;const D=u?n.filter:n.filter.getIndexedFilter();if(Kt(t))y=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const L=m.getNode().updateChild(t,r);y=D.updateFullNode(m.getNode(),L,null)}else{const L=qt(t);if(!m.isCompleteForPath(t)&&Zh(t)>1)return e;const H=Pn(t),he=m.getNode().getImmediateChild(L).updateChild(H,r);y=".priority"===L?D.updatePriority(m.getNode(),he):D.updateChild(m.getNode(),L,he,H,Tj,null)}const T=_j(e,y,m.isFullyInitialized()||Kt(t),D.filtersNodes());return Sj(n,T,t,i,new UR(i,T,a),h)}function jR(n,e,t,r,i,a,u){const h=e.eventCache;let m,y;const D=new UR(i,e,a);if(Kt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=Fb(e,y,!0,n.filter.filtersNodes());else{const T=qt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),m=Fb(e,y,h.isFullyInitialized(),h.isFiltered());else{const O=Pn(t),L=h.getNode().getImmediateChild(T);let H;if(Kt(O))H=r;else{const ee=D.getCompleteChild(T);H=null!=ee?".priority"===_R(O)&&ee.getChild(XU(O)).isEmpty()?ee:ee.updateChild(O,r):Vt.EMPTY_NODE}m=L.equals(H)?e:Fb(e,n.filter.updateChild(h.getNode(),T,H,O,D,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Nj(n,e){return n.eventCache.isCompleteForChild(e)}function Aj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function HR(n,e,t,r,i,a,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=Kt(t)?r:new zn(null).setTree(t,r);const D=e.serverCache.getNode();return y.children.inorderTraversal((T,O)=>{if(D.hasChild(T)){const H=Aj(0,e.serverCache.getNode().getImmediateChild(T),O);m=PT(n,m,new _n(T),H,i,a,u,h)}}),y.children.inorderTraversal((T,O)=>{const L=!e.serverCache.isCompleteForChild(T)&&void 0===O.value;if(!D.hasChild(T)&&!L){const ee=Aj(0,e.serverCache.getNode().getImmediateChild(T),O);m=PT(n,m,new _n(T),ee,i,a,u,h)}}),m}class V4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new TR(r.getIndex()),a=function J6(n){return n.loadsAllData()?new TR(n.getIndex()):n.hasLimit()?new Q6(n):new Rb(n)}(r);this.processor_=function O4(n){return{filter:n}}(a);const u=t.serverCache,h=t.eventCache,m=i.updateFullNode(Vt.EMPTY_NODE,u.getNode(),null),y=a.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),D=new Yh(m,u.isFullyInitialized(),i.filtersNodes()),T=new Yh(y,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=AT(T,D),this.eventGenerator_=new u4(this.query_)}get query(){return this.query_}}function j4(n,e){const t=eg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Kt(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function Oj(n){return 0===n.eventRegistrations_.length}function Mj(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function xj(n,e,t,r){e.type===sl.MERGE&&null!==e.source.queryId&&((0,P.hu)(eg(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(OT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function x4(n,e,t,r,i){const a=new N4;let u,h;if(t.type===sl.OVERWRITE){const y=t;y.source.fromUser?u=jR(n,e,y.path,y.snap,r,i,a):((0,P.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Kt(y.path),u=PT(n,e,y.path,y.snap,r,i,h,a))}else if(t.type===sl.MERGE){const y=t;y.source.fromUser?u=function P4(n,e,t,r,i,a,u){let h=e;return r.foreach((m,y)=>{const D=hr(t,m);Nj(e,qt(D))&&(h=jR(n,h,D,y,i,a,u))}),r.foreach((m,y)=>{const D=hr(t,m);Nj(e,qt(D))||(h=jR(n,h,D,y,i,a,u))}),h}(n,e,y.path,y.children,r,i,a):((0,P.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=HR(n,e,y.path,y.children,r,i,h,a))}else if(t.type===sl.ACK_USER_WRITE){const y=t;u=y.revert?function L4(n,e,t,r,i,a){let u;if(null!=RT(r,t))return e;{const h=new UR(r,e,i),m=e.eventCache.getNode();let y;if(Kt(t)||".priority"===qt(t)){let D;if(e.serverCache.isFullyInitialized())D=xT(r,eg(e));else{const T=e.serverCache.getNode();(0,P.hu)(T instanceof Vt,"serverChildren would be complete if leaf node"),D=VR(r,T)}y=n.filter.updateFullNode(m,D,a)}else{const D=qt(t);let T=BR(r,D,e.serverCache);null==T&&e.serverCache.isCompleteForChild(D)&&(T=m.getImmediateChild(D)),y=null!=T?n.filter.updateChild(m,D,T,Pn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Vt.EMPTY_NODE,Pn(t),h,a):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=xT(r,eg(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=RT(r,gn()),Fb(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function k4(n,e,t,r,i,a,u){if(null!=RT(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Kt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return PT(n,e,t,m.getNode().getChild(t),i,a,h,u);if(Kt(t)){let y=new zn(null);return m.getNode().forEachChild(ic,(D,T)=>{y=y.set(new _n(D),T)}),HR(n,e,t,y,i,a,h,u)}return e}{let y=new zn(null);return r.foreach((D,T)=>{const O=hr(t,D);m.isCompleteForPath(O)&&(y=y.set(D,m.getNode().getChild(O)))}),HR(n,e,t,y,i,a,h,u)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==sl.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);u=function F4(n,e,t,r,i){const a=e.serverCache;return Sj(n,_j(e,a.getNode(),a.isFullyInitialized()||Kt(t),a.isFiltered()),t,r,Tj,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function R4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=OT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(fj(OT(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function M4(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Rj(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Rj(n,e,t,r){return function c4(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function Y6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),kb(n,i,"child_removed",e,r,t),kb(n,i,"child_added",e,r,t),kb(n,i,"child_moved",a,r,t),kb(n,i,"child_changed",e,r,t),kb(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let kT,LT;class Pj{constructor(){this.views=new Map}}function GR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),xj(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(xj(u,e,t,r));return a}}function $R(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=xT(t,i?r:null),m=!1;h?m=!0:r instanceof Vt?(h=VR(t,r),m=!1):(h=Vt.EMPTY_NODE,m=!1);const y=AT(new Yh(h,m,!1),new Yh(r,i,!1));return new V4(e,y)}return u}function kj(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jh(n,e){let t=null;for(const r of n.views.values())t=t||j4(r,e);return t}function Fj(n,e){return e._queryParams.loadsAllData()?FT(n):n.views.get(e._queryIdentifier)}function Lj(n,e){return null!=Fj(n,e)}function Xh(n){return null!=FT(n)}function FT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Q4=1;class Vj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function T4(){return{visibleWrites:Zl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function WR(n,e,t,r,i){return function p4(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Lb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?F_(n,new Xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ef(n,e,t=!1){const r=function m4(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function _4(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&y4(h,r.path)?i=!1:il(r.path,h.path)&&(a=!0)),u--}return!!i&&(a?(function v4(n){n.visibleWrites=wj(n.allWrites,b4,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=yj(n.visibleWrites,r.path):Ni(r.children,m=>{n.visibleWrites=yj(n.visibleWrites,hr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new zn(null);return null!=r.snap?a=a.set(gn(),!0):Ni(r.children,u=>{a=a.set(new _n(u),!0)}),F_(n,new NT(r.path,a,t))}return[]}function Vb(n,e,t){return F_(n,new Xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function VT(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||Lj(a,e))){const h=function K4(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const h=Xh(n);if("default"===i)for(const[m,y]of n.views.entries())u=u.concat(Mj(y,t,r)),Oj(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||a.push(y.query));else{const m=n.views.get(i);m&&(u=u.concat(Mj(m,t,r)),Oj(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Xh(n)&&a.push(new(function W4(){return(0,P.hu)(kT,"Reference.ts has not been loaded"),kT}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function z4(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;u=h.events;const y=-1!==m.findIndex(T=>T._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(T,O)=>Xh(O));if(y&&!D){const T=n.syncPointTree_.subtree(i);if(!T.isEmpty()){const O=function sq(n){return n.fold((e,t,r)=>{if(t&&Xh(t))return[FT(t)];{let i=[];return t&&(i=kj(t)),Ni(r,(a,u)=>{i=i.concat(u)}),i}})}(T);for(let L=0;L<O.length;++L){const H=O[L],ee=H.query,he=$j(n,H);n.listenProvider_.startListening(Ub(ee),Bb(n,ee),he.hashFn,he.onComplete)}}}!D&&m.length>0&&!r&&(y?n.listenProvider_.stopListening(Ub(e),null):m.forEach(T=>{const O=n.queryToTagMap.get(UT(T));n.listenProvider_.stopListening(Ub(T),O)})),function oq(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=UT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return u}function Bj(n,e,t,r){const i=zR(n,r);if(null!=i){const a=qR(i),u=a.path,h=a.queryId,m=js(u,e);return KR(n,u,new Xp(RR(h),m,t))}return[]}function Uj(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(y,D)=>{const T=js(y,t);r=r||Jh(D,T),i=i||Xh(D)});let u,a=e.syncPointTree_.get(t);a?(i=i||Xh(a),r=r||Jh(a,gn())):(a=new Pj,e.syncPointTree_=e.syncPointTree_.set(t,a)),null!=r?u=!0:(u=!1,r=Vt.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((D,T)=>{const O=Jh(T,gn());O&&(r=r.updateImmediateChild(D,O))}));const h=Lj(a,n);if(!h&&!n._queryParams.loadsAllData()){const y=UT(n);(0,P.hu)(!e.queryToTagMap.has(y),"View does not exist, but we have a tag");const D=function aq(){return Q4++}();e.queryToTagMap.set(y,D),e.tagToQueryMap.set(D,y)}return{syncPoint:a,writesCache:MT(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:u,foundAncestorDefaultView:i,viewAlreadyExists:h}}function jj(n,e,t){const{syncPoint:r,serverCache:i,writesCache:a,serverCacheComplete:u,viewAlreadyExists:h,foundAncestorDefaultView:m}=Uj(e,n);let y=function q4(n,e,t,r,i,a){const u=$R(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function H4(n,e){n.eventRegistrations_.push(e)}(u,t),function G4(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wn,(a,u)=>{r.push(x_(a,u))}),t.isFullyInitialized()&&r.push(fj(t.getNode())),Rj(n,r,t.getNode(),e)}(u,t)}(r,e,t,a,i,u);if(!h&&!m){const D=Fj(r,e);y=y.concat(function lq(n,e,t){const r=e._path,i=Bb(n,e),a=$j(n,t),u=n.listenProvider_.startListening(Ub(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Xh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,D,T)=>{if(!Kt(y)&&D&&Xh(D))return[FT(D).query];{let O=[];return D&&(O=O.concat(kj(D).map(L=>L.query))),Ni(T,(L,H)=>{O=O.concat(H)}),O}});for(let y=0;y<m.length;++y){const D=m[y];n.listenProvider_.stopListening(Ub(D),Bb(n,D))}}return u}(n,e,D))}return y}function BT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=Jh(h,js(u,e));if(y)return y});return Ej(i,e,a,t,!0)}function F_(n,e){return Hj(e,n.syncPointTree_,null,MT(n.pendingWriteTree_,gn()))}function Hj(n,e,t,r){if(Kt(n.path))return Gj(n,e,t,r);{const i=e.get(gn());null==t&&null!=i&&(t=Jh(i,gn()));let a=[];const u=qt(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const y=t?t.getImmediateChild(u):null,D=Cj(r,u);a=a.concat(Hj(h,m,y,D))}return i&&(a=a.concat(GR(i,n,r,t))),a}}function Gj(n,e,t,r){const i=e.get(gn());null==t&&null!=i&&(t=Jh(i,gn()));let a=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,y=Cj(r,u),D=n.operationForChild(u);D&&(a=a.concat(Gj(D,h,m,y)))}),i&&(a=a.concat(GR(i,n,r,t))),a}function $j(n,e){const t=e.query,r=Bb(n,t);return{hashFn:()=>(function B4(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function tq(n,e,t){const r=zR(n,t);if(r){const i=qR(r),a=i.path,u=i.queryId,h=js(a,e);return KR(n,a,new Pb(RR(u),h))}return[]}(n,t._path,r):function eq(n,e){return F_(n,new Pb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function e6(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return VT(n,t,null,a)}}}}function Bb(n,e){const t=UT(e);return n.queryToTagMap.get(t)}function UT(n){return n._path.toString()+"$"+n._queryIdentifier}function zR(n,e){return n.tagToQueryMap.get(e)}function qR(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _n(n.substr(0,e))}}function KR(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),GR(r,t,MT(n.pendingWriteTree_,e),null)}function Ub(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Y4(){return(0,P.hu)(LT,"Reference.ts has not been loaded"),LT}())(n._repo,n._path):n}class ZR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ZR(t)}node(){return this.node_}}class YR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=hr(this.path_,e);return new YR(this.syncTree_,t)}node(){return BT(this.syncTree_,this.path_)}}const Wj=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?cq(n[".sv"],e,t):"object"==typeof n[".sv"]?dq(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},cq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},dq=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},zj=function(n,e,t,r){return JR(e,new YR(t,n),r)},QR=function(n,e,t){return JR(n,new ZR(e),t)};function JR(n,e,t){const r=n.getPriority().val(),i=Wj(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,h=Wj(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new A_(h,br(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new A_(i))),u.forEachChild(Wn,(h,m)=>{const y=JR(m,e.getImmediateChild(h),t);y!==m&&(a=a.updateImmediateChild(h,y))}),a}}class XR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function jT(n,e){let t=e instanceof _n?e:new _n(e),r=n,i=qt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new XR(i,r,a),t=Pn(t),i=qt(t)}return r}function ng(n){return n.node.value}function eP(n,e){n.node.value=e,tP(n)}function qj(n){return n.node.childCount>0}function HT(n,e){Ni(n.node.children,(t,r)=>{e(new XR(t,n,r))})}function Kj(n,e,t,r){t&&!r&&e(n),HT(n,i=>{Kj(i,e,!0,r)}),t&&r&&e(n)}function jb(n){return new _n(null===n.parent?n.name:jb(n.parent)+"/"+n.name)}function tP(n){null!==n.parent&&function pq(n,e,t){const r=function hq(n){return void 0===ng(n)&&!qj(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,tP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,tP(n))}(n.parent,n.name,n)}const gq=/[\[\].#$\/\u0000-\u001F\u007F]/,mq=/[\[\].#$\u0000-\u001F\u007F]/,nP=10485760,GT=function(n){return"string"==typeof n&&0!==n.length&&!gq.test(n)},Zj=function(n){return"string"==typeof n&&0!==n.length&&!mq.test(n)},Hb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!gT(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},sc=function(n,e,t,r){r&&void 0===e||Gb((0,P.gK)(n,"value"),e,t)},Gb=function(n,e,t){const r=t instanceof _n?new M6(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Qp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Qp(r)+" with contents = "+e.toString());if(gT(e))throw new Error(n+"contains "+e.toString()+" "+Qp(r));if("string"==typeof e&&e.length>nP/3&&(0,P.ug)(e)>nP)throw new Error(n+"contains a string greater than "+nP+" utf8 bytes "+Qp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ni(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!GT(u)))throw new Error(n+" contains an invalid key ("+u+") "+Qp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function x6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),ej(n)})(r,u),Gb(n,h,r),function R6(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Qp(r)+" in addition to actual children.")}},Yj=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ni(e,(u,h)=>{const m=new _n(u);if(Gb(i,h,hr(t,m)),".priority"===_R(m)&&!Hb(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Sb(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!GT(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(O6);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&il(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},rP=function(n,e,t){if(!t||void 0!==e){if(gT(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hb(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$b=function(n,e,t,r){if(!(r&&void 0===t||GT(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Wb=function(n,e,t,r){if(!(r&&void 0===t||Zj(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ol=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Qj=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!GT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Zj(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $T(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!yR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Jj(n,e,t){$T(n,t),Xj(n,r=>yR(r,e))}function al(n,e,t){$T(n,t),Xj(n,r=>il(r,e)||il(e,r))}function Xj(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(wq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function wq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Zp&&Si("event: "+t.toString()),S_(r)}}}const eH="repo_interrupt";class Dq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ST(),this.transactionQueueTree_=new XR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tH(n){const t=n.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function zb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:tH(n)})}function nH(n,e,t,r,i){n.dataUpdateCount++;const a=new _n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,P.UI)(t,y=>br(y));u=function rq(n,e,t,r){const i=zR(n,r);if(i){const a=qR(i),u=a.path,h=a.queryId,m=js(u,e),y=zn.fromObject(t);return KR(n,u,new P_(RR(h),m,y))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=br(t);u=Bj(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,P.UI)(t,y=>br(y));u=function X4(n,e,t){const r=zn.fromObject(t);return F_(n,new P_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=br(t);u=Vb(n.serverSyncTree_,a,m)}let h=a;u.length>0&&(h=L_(n,a)),al(n.eventQueue_,h,u)}function rH(n,e){iP(n,"connected",e),!1===e&&function Nq(n){rg(n,"onDisconnectEvents");const e=zb(n),t=ST();OR(n.onDisconnect_,gn(),(i,a)=>{const u=zj(i,a,n.serverSyncTree_,e);R_(t,i,u)});let r=[];OR(t,gn(),(i,a)=>{r=r.concat(Vb(n.serverSyncTree_,i,a));const u=lP(n,i);L_(n,u)}),n.onDisconnect_=ST(),al(n.eventQueue_,gn(),r)}(n)}function iP(n,e,t){const r=new _n("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const a=Vb(n.infoSyncTree_,r,i);al(n.eventQueue_,r,a)}function WT(n){return n.nextWriteId_++}function Tq(n,e){const t=function iq(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,D)=>{const T=js(y,t);r=r||Jh(D,T)});let i=n.syncPointTree_.get(t);i?r=r||Jh(i,gn()):(i=new Pj,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new Yh(r,!0,!1):null;return function U4(n){return OT(n.viewCache_)}($R(i,e,MT(n.pendingWriteTree_,e._path),a?u.getNode():Vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=br(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())Vb(n.serverSyncTree_,e._path,i);else{const u=function nq(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:a}=Uj(e,n),u=$R(t,e,i,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),e._queryParams.loadsAllData()?null:Bb(n,e)}(n.serverSyncTree_,e);Bj(n.serverSyncTree_,e._path,i,u)}return VT(n.serverSyncTree_,e,null).length>0&&rg(n,"unexpected cancel events in repoGetValue"),i},r=>(rg(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function sP(n,e,t,r,i){rg(n,"set",{path:e.toString(),value:t,priority:r});const a=zb(n),u=br(t,r),h=BT(n.serverSyncTree_,e),m=QR(u,h,a),y=WT(n),D=WR(n.serverSyncTree_,e,m,y,!0);$T(n.eventQueue_,D),n.server_.put(e.toString(),u.val(!0),(O,L)=>{const H="ok"===O;H||_s("set at "+e+" failed: "+O);const ee=ef(n.serverSyncTree_,y,!H);al(n.eventQueue_,e,ee),tf(0,i,O,L)});const T=lP(n,e);L_(n,T),al(n.eventQueue_,T,[])}function Aq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&AR(n.onDisconnect_,e),tf(0,t,r,i)})}function iH(n,e,t,r){const i=br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&R_(n.onDisconnect_,e,i),tf(0,r,a,u)})}function oP(n,e,t){let r;r=".info"===qt(e._path)?VT(n.infoSyncTree_,e,t):VT(n.serverSyncTree_,e,t),Jj(n.eventQueue_,e._path,r)}function sH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(eH)}function rg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Si(t,...e)}function tf(n,e,t,r){e&&S_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function aP(n,e,t){return BT(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function zT(n,e=n.transactionQueueTree_){if(e||qT(n,e),ng(e)){const t=aH(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function kq(n,e,t){const r=t.map(y=>y.currentWriteId),i=aP(n,e,r);let a=i;const u=i.hash();for(let y=0;y<t.length;y++){const D=t[y];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const T=js(e,D.path);a=a.updateChild(T,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,y=>{rg(n,"transaction put response",{path:m.toString(),status:y});let D=[];if("ok"===y){const T=[];for(let O=0;O<t.length;O++)t[O].status=2,D=D.concat(ef(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&T.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();qT(n,jT(n.transactionQueueTree_,e)),zT(n,n.transactionQueueTree_),al(n.eventQueue_,e,D);for(let O=0;O<T.length;O++)S_(T[O])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{_s("transaction at "+m.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}L_(n,e)}},u)}(n,jb(e),t)}else qj(e)&&HT(e,t=>{zT(n,t)})}function L_(n,e){const t=oH(n,e),r=jb(t);return function Fq(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=js(t,m.path);let T,D=!1;if((0,P.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,T=m.abortReason,i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,T="maxretry",i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0));else{const O=aP(n,m.path,u);m.currentInputSnapshot=O;const L=e[h].update(O.val());if(void 0!==L){Gb("transaction failed: Data returned ",L,m.path);let H=br(L);"object"==typeof L&&null!=L&&(0,P.r3)(L,".priority")||(H=H.updatePriority(O.getPriority()));const he=m.currentWriteId,Ge=zb(n),Ve=QR(H,O,Ge);m.currentOutputSnapshotRaw=H,m.currentOutputSnapshotResolved=Ve,m.currentWriteId=WT(n),u.splice(u.indexOf(he),1),i=i.concat(WR(n.serverSyncTree_,m.path,Ve,m.currentWriteId,m.applyLocally)),i=i.concat(ef(n.serverSyncTree_,he,!0))}else D=!0,T="nodata",i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0))}al(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}qT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)S_(r[h]);zT(n,n.transactionQueueTree_)}(n,aH(n,t),r),r}function oH(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===ng(r);)r=jT(r,t),t=qt(e=Pn(e));return r}function aH(n,e){const t=[];return lH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function lH(n,e,t){const r=ng(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);HT(e,i=>{lH(n,i,t)})}function qT(n,e){const t=ng(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,eP(e,t.length>0?t:void 0)}HT(e,r=>{qT(n,r)})}function lP(n,e){const t=jb(oH(n,e)),r=jT(n.transactionQueueTree_,e);return function fq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{uP(n,i)}),uP(n,r),Kj(r,i=>{uP(n,i)}),t}function uP(n,e){const t=ng(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,P.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,P.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(ef(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?eP(e,void 0):t.length=a+1,al(n.eventQueue_,jb(e),i);for(let u=0;u<r.length;u++)S_(r[u])}}const cP=function(n,e){const t=Bq(n),r=t.namespace;return"firebase.com"===t.domain&&nc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&nc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new _n(t.pathString)}},Bq=function(n){let e="",t="",r="",i="",a="",u=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let D=n.indexOf("/");-1===D&&(D=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(D,T)),D<T&&(i=function Lq(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,T)));const O=function Vq(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_s(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),a=r}"ns"in O&&(a=O.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:a}};class uH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class cH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class dH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class hH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return Aq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ol("OnDisconnect.remove",this._path);const e=new P.BH;return iH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ol("OnDisconnect.set",this._path),sc("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return iH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ol("OnDisconnect.setWithPriority",this._path),sc("OnDisconnect.setWithPriority",e,this._path,!1),rP("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function Oq(n,e,t,r,i){const a=br(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,h)=>{"ok"===u&&R_(n.onDisconnect_,e,a),tf(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ol("OnDisconnect.update",this._path),Yj("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function Mq(n,e,t,r){if((0,P.xb)(t))return Si("onDisconnect().update() called with empty data.  Don't do anything."),void tf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ni(t,(u,h)=>{const m=br(h);R_(n.onDisconnect_,hr(e,u),m)}),tf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class vo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Kt(this._path)?null:_R(this._path)}get ref(){return new ll(this._repo,this._path)}get _queryIdentifier(){const e=gj(this._queryParams),t=lR(e);return"{}"===t?"default":t}get _queryObject(){return gj(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof vo))return!1;const t=this._repo===e._repo,r=yR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function A6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function KT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function nf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ic){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==gd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==rc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Wn){if(null!=e&&!Hb(e)||null!=t&&!Hb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof DR||n.getIndex()===CR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ZT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ll extends vo{constructor(e,t){super(e,t,new CT,!1)}get parent(){const e=XU(this._path);return null===e?null:new ll(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ig{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new _n(e),r=sg(this.ref,e);return new ig(this._node.getChild(t),r,Wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ig(i,sg(this.ref,r),Wn)))}hasChild(e){const t=new _n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fH(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?sg(n._root,e):n._root}function pH(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=cP(e,n._repo.repoInfo_.nodeAdmin);Qj("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&nc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),fH(n,t.path.toString())}function sg(n,e){return null===qt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Wb("child","path",t,!1)):Wb("child","path",e,!1),new ll(n._repo,hr(n._path,e));var t}function dP(n,e){n=(0,P.m9)(n),ol("set",n._path),sc("set",e,n._path,!1);const t=new P.BH;return sP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function $q(n,e){Yj("update",e,n._path,!1);const t=new P.BH;return function Sq(n,e,t,r){rg(n,"update",{path:e.toString(),value:t});let i=!0;const a=zb(n),u={};if(Ni(t,(h,m)=>{i=!1,u[h]=zj(hr(e,h),br(m),n.serverSyncTree_,a)}),i)Si("update() called with empty data.  Don't do anything."),tf(0,r,"ok",void 0);else{const h=WT(n),m=function J4(n,e,t,r){!function g4(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=kR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=zn.fromObject(t);return F_(n,new P_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);$T(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,D)=>{const T="ok"===y;T||_s("update at "+e+" failed: "+y);const O=ef(n.serverSyncTree_,h,!T),L=O.length>0?L_(n,e):e;al(n.eventQueue_,L,O),tf(0,r,y,D)}),Ni(t,y=>{const D=lP(n,hr(e,y));L_(n,D)}),al(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class YT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new uH("value",this,new ig(e.snapshotNode,new ll(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new cH(this,e,t):null}matches(e){return e instanceof YT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new cH(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=sg(new ll(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new uH(e.type,this,new ig(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qb(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,y=(D,T)=>{oP(n._repo,n,h),m(D,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new dH(t,a||void 0),h="value"===e?new YT(u):new QT(e,u);return function xq(n,e,t){let r;r=".info"===qt(e._path)?jj(n.infoSyncTree_,e,t):jj(n.serverSyncTree_,e,t),Jj(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>oP(n._repo,n,h)}function hP(n,e,t,r){return qb(n,"value",e,t,r)}function gH(n,e,t,r){return qb(n,"child_added",e,t,r)}function mH(n,e,t,r){return qb(n,"child_changed",e,t,r)}function _H(n,e,t,r){return qb(n,"child_moved",e,t,r)}function yH(n,e,t,r){return qb(n,"child_removed",e,t,r)}function vH(n,e,t){let r=null;const i=t?new dH(t):null;"value"===e?r=new YT(i):e&&(r=new QT(e,i)),oP(n._repo,n,r)}class Yl{}class bH extends Yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sc("endAt",this._value,e._path,!0);const t=NR(e._queryParams,this._value,this._key);if(ZT(t),nf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class qq extends Yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sc("endBefore",this._value,e._path,!1);const t=function n4(n,e,t){let r,i;return n.index_===ic?("string"==typeof e&&(e=hj(e)),i=NR(n,e,t)):(r=null==t?gd:hj(t),i=NR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ZT(t),nf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class wH extends Yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sc("startAt",this._value,e._path,!0);const t=SR(e._queryParams,this._value,this._key);if(ZT(t),nf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class Yq extends Yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){sc("startAfter",this._value,e._path,!1);const t=function t4(n,e,t){let r;if(n.index_===ic)"string"==typeof e&&(e=dj(e)),r=SR(n,e,t);else{let i;i=null==t?rc:dj(t),r=SR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ZT(t),nf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vo(e._repo,e._path,t,e._orderByCalled)}}class Jq extends Yl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vo(e._repo,e._path,function X6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class e5 extends Yl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vo(e._repo,e._path,function e4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class n5 extends Yl{constructor(e){super(),this._path=e}_apply(e){KT(e,"orderByChild");const t=new _n(this._path);if(Kt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new DR(t),i=IT(e._queryParams,r);return nf(i),new vo(e._repo,e._path,i,!0)}}class i5 extends Yl{_apply(e){KT(e,"orderByKey");const t=IT(e._queryParams,ic);return nf(t),new vo(e._repo,e._path,t,!0)}}class o5 extends Yl{_apply(e){KT(e,"orderByPriority");const t=IT(e._queryParams,Wn);return nf(t),new vo(e._repo,e._path,t,!0)}}class l5 extends Yl{_apply(e){KT(e,"orderByValue");const t=IT(e._queryParams,CR);return nf(t),new vo(e._repo,e._path,t,!0)}}class c5 extends Yl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(sc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new bH(this._value,this._key)._apply(new wH(this._value,this._key)._apply(e))}}function Ql(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function $4(n){(0,P.hu)(!kT,"__referenceConstructor has already been defined"),kT=n})(ll),function Z4(n){(0,P.hu)(!LT,"__referenceConstructor has already been defined"),LT=n}(ll);const fP={};function DH(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||nc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Si("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,u=cP(a,i),h=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(m=!0,a=`http://${y}?ns=${h.namespace}`,u=cP(a,i),h=u.repoInfo):m=!u.repoInfo.secure;const D=i&&m?new Tb(Tb.OWNER):new i6(n.name,n.options,e);Qj("Invalid Firebase Database URL",u),Kt(u.path)||nc("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function g5(n,e,t,r){let i=fP[e.name];i||(i={},fP[e.name]=i);let a=i[n.toURLString()];return a&&nc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Dq(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new r6(n.name,t));return new _5(T,n)}class _5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Cq(n,e,t){if(n.stats_=pR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new TT(n.repoInfo_,(r,i,a,u)=>{nH(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>rH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Jp(n.repoInfo_,e,(r,i,a,u)=>{nH(n,r,i,a,u)},r=>{rH(n,r)},r=>{!function Iq(n,e){Ni(e,(t,r)=>{iP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function a6(n,e){const t=n.toString();return fR[t]||(fR[t]=e()),fR[t]}(n.repoInfo_,()=>new l4(n.stats_,n.server_)),n.infoData_=new r4,n.infoSyncTree_=new Vj({startListening:(r,i,a,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=Vb(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),iP(n,"connected",!1),n.serverSyncTree_=new Vj({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(h,m)=>{const y=u(h,m);al(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ll(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function p5(n,e){const t=fP[e];(!t||t[n.key]!==n)&&nc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),sH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&nc("Cannot call "+e+" on a deleted database.")}}function CH(){jU.IS_TRANSPORT_INITIALIZED&&_s("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function y5(){CH(),Kh.forceDisallow()}function v5(){CH(),N_.forceDisallow(),Kh.forceAllow()}function D5(n,e){wU(n,e)}const I5={".sv":"timestamp"};class N5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Jp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Jp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function C5(n){mU(ta.SDK_VERSION),(0,ta._registerComponent)(new Zu.wA("database",(e,{instanceIdentifier:t})=>DH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ta.registerVersion)(pU,"0.13.3",n),(0,ta.registerVersion)(pU,"0.13.3","esm2017")}();const x5=new tl.Yd("@firebase/database-compat"),IH=function(n){x5.warn("FIREBASE WARNING: "+n)};class k5{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,IH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class F5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Wb("DataSnapshot.child","path",e,!1),new rf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Wb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new rf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new oa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class es{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const u=es.getCancelAndContextArgs_("Query.on",r,i),h=(y,D)=>{t.call(u.context,new rf(this.database,y),D)};h.userCallback=t,h.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return hP(this._delegate,h,m),t;case"child_added":return gH(this._delegate,h,m),t;case"child_removed":return yH(this._delegate,h,m),t;case"child_changed":return mH(this._delegate,h,m),t;case"child_moved":return _H(this._delegate,h,m),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,vH(this._delegate,e,i)}else vH(this._delegate,e)}get(){return function Wq(n){return Tq((n=(0,P.m9)(n))._repo,n).then(e=>new ig(e,new ll(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new rf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=es.getCancelAndContextArgs_("Query.once",r,i),u=new P.BH,h=(y,D)=>{const T=new rf(this.database,y);t&&t.call(a.context,T,D),u.resolve(T)};h.userCallback=t,h.context=a.context;const m=y=>{a.cancel&&a.cancel.call(a.context,y),u.reject(y)};switch(e){case"value":hP(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":gH(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":yH(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":mH(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":_H(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new es(this.database,Ql(this._delegate,function Xq(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Jq(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new es(this.database,Ql(this._delegate,function t5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new e5(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new es(this.database,Ql(this._delegate,function r5(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Wb("orderByChild","path",n,!1),new n5(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new es(this.database,Ql(this._delegate,function s5(){return new i5}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new es(this.database,Ql(this._delegate,function a5(){return new o5}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new es(this.database,Ql(this._delegate,function u5(){return new l5}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new es(this.database,Ql(this._delegate,function Zq(n=null,e){return $b("startAt","key",e,!0),new wH(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new es(this.database,Ql(this._delegate,function Qq(n,e){return $b("startAfter","key",e,!0),new Yq(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new es(this.database,Ql(this._delegate,function zq(n,e){return $b("endAt","key",e,!0),new bH(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new es(this.database,Ql(this._delegate,function Kq(n,e){return $b("endBefore","key",e,!0),new qq(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new es(this.database,Ql(this._delegate,function d5(n,e){return $b("equalTo","key",e,!0),new c5(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof es))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new oa(this.database,new ll(this._delegate._repo,this._delegate._path))}}class oa extends es{constructor(e,t){super(e,new vo(t._repo,t._path,new CT,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new oa(this.database,sg(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new oa(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new oa(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=dP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,IH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ol("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=$q(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Gq(n,e,t){if(ol("setWithPriority",n._path),sc("setWithPriority",e,n._path,!1),rP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return sP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function jq(n){return ol("remove",n._path),dP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function A5(n,e,t){var r;if(n=(0,P.m9)(n),ol("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new P.BH,h=hP(n,()=>{});return function Pq(n,e,t,r,i,a){rg(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:yU(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=aP(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Gb("transaction failed: Data returned ",m,u.path),u.status=0;const y=jT(n.transactionQueueTree_,e),D=ng(y)||[];let T;D.push(u),eP(y,D),"object"==typeof m&&null!==m&&(0,P.r3)(m,".priority")?(T=(0,P.DV)(m,".priority"),(0,P.hu)(Hb(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(BT(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const O=zb(n),L=br(m,T),H=QR(L,h,O);u.currentOutputSnapshotRaw=L,u.currentOutputSnapshotResolved=H,u.currentWriteId=WT(n);const ee=WR(n.serverSyncTree_,e,H,u.currentWriteId,u.applyLocally);al(n.eventQueue_,e,ee),zT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,D)=>{let T=null;m?a.reject(m):(T=new ig(D,new ll(n._repo,n._path),Wn),a.resolve(new N5(y,T)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new F5(a.committed,new rf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Hq(n,e){n=(0,P.m9)(n),ol("setPriority",n._path),rP("setPriority",e,!1);const t=new P.BH;return sP(n._repo,hr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function Uq(n,e){n=(0,P.m9)(n),ol("push",n._path),sc("push",e,n._path,!0);const t=tH(n._repo),r=Z6(t),i=sg(n,r),a=sg(n,r);let u;return u=null!=e?dP(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new oa(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new oa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ol("Reference.onDisconnect",this._delegate._path),new k5(new hH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Kb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:y5,forceLongPolling:v5}}useEmulator(e,t,r={}){!function b5(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&nc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&nc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Tb(Tb.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new Tb(u)}!function f5(n,e,t,r){n.repoInfo_=new dR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof oa){const t=pH(this._delegate,e.toString());return new oa(this,t)}{const t=fH(this._delegate,e);return new oa(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=pH(this._delegate,e);return new oa(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function w5(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),sH(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function E5(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function Rq(n){n.persistentConnection_&&n.persistentConnection_.resume(eH)}(n._repo)}(this._delegate)}}Kb.ServerValue={TIMESTAMP:function T5(){return I5}(),increment:n=>function S5(n){return{".sv":{increment:n}}}(n)};var V5=Object.freeze({__proto__:null,initStandalone:function L5({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){mU(t);const u=new Zu.zt("auth-internal",new Zu.H0("database-standalone"));return u.setComponent(new Zu.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Kb(DH(n,u,void 0,e,a),n),namespace:i}}});const B5=Kb.ServerValue;function TH(n){return null==n}function SH(n){return"function"==typeof n.set}function NH(n,e){return SH(e)?e:n.ref(e)}function AH(n,e){if(function j5(n){return"string"==typeof n}(n))return e.stringCase();if(SH(n))return e.firebaseCase();if(function H5(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Zb(n,e,t="on",r=$f.z){return new Bn.y(i=>{let a=null;return a=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,ot.U)(i=>{const{snapshot:a,prevKey:u}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:u,key:h}}),(0,FA.B)())}function OH(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function W5(n,e){const{payload:t,prevKey:r,key:i}=e,a=OH(n,i),u=function $5(n,e){if(TH(e))return 0;{const t=OH(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function MH(n){return(TH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function xH(n,e,t){return function G5(n,e,t){return Zb(n,"value","once",t).pipe(An(r=>{const i=[st(r)];return e.forEach(a=>i.push(Zb(n,a,"on",t))),(0,n0.T)(...i).pipe(Rr(W5,[]))}),Bc())}(n,e=MH(e),t)}function RH(n,e,t){const r=(e=MH(e)).map(i=>Zb(n,i,"on",t));return(0,n0.T)(...r)}function PH(n,e){return function(r,i){return AH(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Z5(n){return function(t){return t?AH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function kH(n,e){return function(){return Zb(n,"value","on",e)}}!function U5(n){n.INTERNAL.registerComponent(new Zu.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Kb(i,r)},"PUBLIC").setServiceProps({Reference:oa,Query:es,Database:Kb,DataSnapshot:rf,enableLogging:D5,INTERNAL:V5,ServerValue:B5}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(SF.Z);const J5=new d.OlP("angularfire2.realtimeDatabaseURL"),X5=new d.OlP("angularfire2.database.use-emulator");let eK=(()=>{class n{constructor(t,r,i,a,u,h,m,y,D,T,O,L,H,ee,he){this.schedulers=h;const Ge=m,Ve=(0,qi.on)(t,u,r);y&&lO(Ve,u,D,O,L,H,T,ee),this.database=(0,qi.cc)(`${Ve.name}.database.${i}`,"AngularFireDatabase",Ve.name,()=>{const tt=u.runOutsideAngular(()=>Ve.database(i||void 0));return Ge&&tt.useEmulator(...Ge),tt},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>NH(this.database,t));let a=i;return r&&(a=r(i)),function Y5(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:PH(r,"update"),set:PH(r,"set"),push:i=>r.push(i),remove:Z5(r),snapshotChanges:i=>xH(n,i,t).pipe(xn.iC),stateChanges:i=>RH(n,i,t).pipe(xn.iC),auditTrail:i=>function z5(n,e,t){return function K5(n,e,t){return function q5(n,e){return Zb(n,"value","on",e).pipe((0,ot.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(oh(e),(0,ot.U)(([i,a])=>{const u=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:h}}),function zz(n){return(0,or.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,pn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ot.U)(i=>i.actions))}(n,RH(n,e).pipe(Rr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(xn.iC),valueChanges:(i,a)=>xH(n,i,t).pipe((0,ot.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),xn.iC)}}(a,this)}object(t){return function Q5(n,e){return{query:n,snapshotChanges:()=>kH(n,e.schedulers.outsideAngular)().pipe(xn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>kH(n,e.schedulers.outsideAngular)().pipe(xn.iC,(0,ot.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>NH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(J5,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(xn.HU),d.LFG(X5,8),d.LFG(eI,8),d.LFG(nO,8),d.LFG(rO,8),d.LFG(iO,8),d.LFG(sO,8),d.LFG(oO,8),d.LFG(aO,8),d.LFG(XC,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tK=(()=>{class n{constructor(){tO.Z.registerVersion("angularfire",xn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eK]}),n})(),nK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"home works!"),d.qZA())}}),n})(),rK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-products"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"products works!"),d.qZA())}}),n})(),iK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"shopping-cart works!"),d.qZA())}}),n})(),sK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-check-out"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"check-out works!"),d.qZA())}}),n})(),oK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-order-sucess"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"order-sucess works!"),d.qZA())}}),n})(),aK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-my-orders"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"my-orders works!"),d.qZA())}}),n})(),lK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin-products"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"admin-products works!"),d.qZA())}}),n})(),uK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin-orders"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"admin-orders works!"),d.qZA())}}),n})(),cK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"login works!"),d.qZA())}}),n})(),dK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[pF]}),n.\u0275inj=d.cJS({imports:[dn,C1,qi.hO.initializeApp(Fo_firebase),EG,tK,Wz,Kv,Sv,zl,jf.forRoot([{path:"",component:nK},{path:"products",component:rK},{path:"shopping-cart",component:iK},{path:"check-out",component:sK},{path:"order-sucess",component:oK},{path:"my/orders",component:aK},{path:"login",component:cK},{path:"admin/products",component:lK},{path:"admin/orders",component:uK}])]}),n})();(0,d.G48)(),gc().bootstrapModule(dK).catch(n=>console.error(n))},9751:(ct,Ne,F)=>{F.d(Ne,{y:()=>fe});var d=F(930),te=F(727),k=F(8822),le=F(9635),se=F(2416),pe=F(576),de=F(2806);let fe=(()=>{class J{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const De=new J;return De.source=this,De.operator=Oe,De}subscribe(Oe,De,it){const ve=function $(J){return J&&J instanceof d.Lv||function G(J){return J&&(0,pe.m)(J.next)&&(0,pe.m)(J.error)&&(0,pe.m)(J.complete)}(J)&&(0,te.Nn)(J)}(Oe)?Oe:new d.Hp(Oe,De,it);return(0,de.x)(()=>{const{operator:_e,source:Je}=this;ve.add(_e?_e.call(ve,Je):Je?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(De){Oe.error(De)}}forEach(Oe,De){return new(De=me(De))((it,ve)=>{const _e=new d.Hp({next:Je=>{try{Oe(Je)}catch(at){ve(at),_e.unsubscribe()}},error:ve,complete:it});this.subscribe(_e)})}_subscribe(Oe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Oe)}[k.L](){return this}pipe(...Oe){return(0,le.U)(Oe)(this)}toPromise(Oe){return new(Oe=me(Oe))((De,it)=>{let ve;this.subscribe(_e=>ve=_e,_e=>it(_e),()=>De(ve))})}}return J.create=Be=>new J(Be),J})();function me(J){var Be;return null!==(Be=J??se.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ct,Ne,F)=>{F.d(Ne,{x:()=>de});var d=F(9751),te=F(727);const le=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),pe=F(2806);let de=(()=>{class me extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new fe(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new le}next($){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:Be,observers:Oe}=this;return J||Be?te.Lc:(this.currentObservers=null,Oe.push($),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Oe,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:Be,isStopped:Oe}=this;J?$.error(Be):Oe&&$.complete()}asObservable(){const $=new d.y;return $.source=this,$}}return me.create=(G,$)=>new fe(G,$),me})();class fe extends de{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,G)}error(G){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==J?J:te.Lc}}},930:(ct,Ne,F)=>{F.d(Ne,{Hp:()=>it,Lv:()=>J});var d=F(576),te=F(727),k=F(2416),le=F(7849),se=F(5032);const pe=me("C",void 0,void 0);function me(Me,be,Ie){return{kind:Me,value:be,error:Ie}}var G=F(3410),$=F(2806);class J extends te.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,te.Nn)(be)&&be.add(this)):this.destination=at}static create(be,Ie,Ue){return new it(be,Ie,Ue)}next(be){this.isStopped?Je(function fe(Me){return me("N",Me,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Je(function de(Me){return me("E",void 0,Me)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Je(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Oe(Me,be){return Be.call(Me,be)}class De{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(be)}catch(Ue){ve(Ue)}}error(be){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(be)}catch(Ue){ve(Ue)}else ve(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ie){ve(Ie)}}}class it extends J{constructor(be,Ie,Ue){let je;if(super(),(0,d.m)(be)||!be)je={next:be??void 0,error:Ie??void 0,complete:Ue??void 0};else{let W;this&&k.v.useDeprecatedNextContext?(W=Object.create(be),W.unsubscribe=()=>this.unsubscribe(),je={next:be.next&&Oe(be.next,W),error:be.error&&Oe(be.error,W),complete:be.complete&&Oe(be.complete,W)}):je=be}this.destination=new De(je)}}function ve(Me){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Me):(0,le.h)(Me)}function Je(Me,be){const{onStoppedNotification:Ie}=k.v;Ie&&G.z.setTimeout(()=>Ie(Me,be))}const at={closed:!0,next:se.Z,error:function _e(Me){throw Me},complete:se.Z}},727:(ct,Ne,F)=>{F.d(Ne,{Lc:()=>pe,w0:()=>se,Nn:()=>de});var d=F(576);const k=(0,F(3888).d)(me=>function($){me(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,Be)=>`${Be+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var le=F(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Oe of $)Oe.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,d.m)(J))try{J()}catch(Oe){G=Oe instanceof k?Oe.errors:[Oe]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Oe of Be)try{fe(Oe)}catch(De){G=G??[],De instanceof k?G=[...G,...De.errors]:G.push(De)}}if(G)throw new k(G)}}add(G){var $;if(G&&G!==this)if(this.closed)fe(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,le.P)($,G)}remove(G){const{_finalizers:$}=this;$&&(0,le.P)($,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const me=new se;return me.closed=!0,me})();const pe=se.EMPTY;function de(me){return me instanceof se||me&&"closed"in me&&(0,d.m)(me.remove)&&(0,d.m)(me.add)&&(0,d.m)(me.unsubscribe)}function fe(me){(0,d.m)(me)?me():me.unsubscribe()}},2416:(ct,Ne,F)=>{F.d(Ne,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Ne,F)=>{F.d(Ne,{E:()=>te});const te=new(F(9751).y)(se=>se.complete())},8996:(ct,Ne,F)=>{F.d(Ne,{D:()=>be});var d=F(8421),te=F(5363),k=F(9468),pe=F(9751),fe=F(2202),me=F(576),G=F(9672);function J(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,G.f)(je,Ue,()=>{const W=Ie[Symbol.asyncIterator]();(0,G.f)(je,Ue,()=>{W.next().then(we=>{we.done?je.complete():je.next(we.value)})},0,!0)})})}var Be=F(3670),Oe=F(8239),De=F(1144),it=F(6495),ve=F(2206),_e=F(4532),Je=F(3260);function be(Ie,Ue){return Ue?function Me(Ie,Ue){if(null!=Ie){if((0,Be.c)(Ie))return function le(Ie,Ue){return(0,d.Xf)(Ie).pipe((0,k.R)(Ue),(0,te.Q)(Ue))}(Ie,Ue);if((0,De.z)(Ie))return function de(Ie,Ue){return new pe.y(je=>{let W=0;return Ue.schedule(function(){W===Ie.length?je.complete():(je.next(Ie[W++]),je.closed||this.schedule())})})}(Ie,Ue);if((0,Oe.t)(Ie))return function se(Ie,Ue){return(0,d.Xf)(Ie).pipe((0,k.R)(Ue),(0,te.Q)(Ue))}(Ie,Ue);if((0,ve.D)(Ie))return J(Ie,Ue);if((0,it.T)(Ie))return function $(Ie,Ue){return new pe.y(je=>{let W;return(0,G.f)(je,Ue,()=>{W=Ie[fe.h](),(0,G.f)(je,Ue,()=>{let we,Q;try{({value:we,done:Q}=W.next())}catch(ie){return void je.error(ie)}Q?je.complete():je.next(we)},0,!0)}),()=>(0,me.m)(W?.return)&&W.return()})}(Ie,Ue);if((0,Je.L)(Ie))return function at(Ie,Ue){return J((0,Je.Q)(Ie),Ue)}(Ie,Ue)}throw(0,_e.z)(Ie)}(Ie,Ue):(0,d.Xf)(Ie)}},8421:(ct,Ne,F)=>{F.d(Ne,{Xf:()=>Be});var d=F(655),te=F(1144),k=F(8239),le=F(9751),se=F(3670),pe=F(2206),de=F(4532),fe=F(6495),me=F(3260),G=F(576),$=F(7849),J=F(8822);function Be(Me){if(Me instanceof le.y)return Me;if(null!=Me){if((0,se.c)(Me))return function Oe(Me){return new le.y(be=>{const Ie=Me[J.L]();if((0,G.m)(Ie.subscribe))return Ie.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,te.z)(Me))return function De(Me){return new le.y(be=>{for(let Ie=0;Ie<Me.length&&!be.closed;Ie++)be.next(Me[Ie]);be.complete()})}(Me);if((0,k.t)(Me))return function it(Me){return new le.y(be=>{Me.then(Ie=>{be.closed||(be.next(Ie),be.complete())},Ie=>be.error(Ie)).then(null,$.h)})}(Me);if((0,pe.D)(Me))return _e(Me);if((0,fe.T)(Me))return function ve(Me){return new le.y(be=>{for(const Ie of Me)if(be.next(Ie),be.closed)return;be.complete()})}(Me);if((0,me.L)(Me))return function Je(Me){return _e((0,me.Q)(Me))}(Me)}throw(0,de.z)(Me)}function _e(Me){return new le.y(be=>{(function at(Me,be){var Ie,Ue,je,W;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,d.KL)(Me);!(Ue=yield Ie.next()).done;)if(be.next(Ue.value),be.closed)return}catch(we){je={error:we}}finally{try{Ue&&!Ue.done&&(W=Ie.return)&&(yield W.call(Ie))}finally{if(je)throw je.error}}be.complete()})})(Me,be).catch(Ie=>be.error(Ie))})}},6451:(ct,Ne,F)=>{F.d(Ne,{T:()=>pe});var d=F(8189),te=F(8421),k=F(515),le=F(3269),se=F(8996);function pe(...de){const fe=(0,le.yG)(de),me=(0,le._6)(de,1/0),G=de;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,d.J)(me)((0,se.D)(G,fe)):k.E}},5403:(ct,Ne,F)=>{F.d(Ne,{x:()=>te});var d=F(930);function te(le,se,pe,de,fe){return new k(le,se,pe,de,fe)}class k extends d.Lv{constructor(se,pe,de,fe,me,G){super(se),this.onFinalize=me,this.shouldUnsubscribe=G,this._next=pe?function($){try{pe($)}catch(J){se.error(J)}}:super._next,this._error=fe?function($){try{fe($)}catch(J){se.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(ct,Ne,F)=>{F.d(Ne,{U:()=>k});var d=F(4482),te=F(5403);function k(le,se){return(0,d.e)((pe,de)=>{let fe=0;pe.subscribe((0,te.x)(de,me=>{de.next(le.call(se,me,fe++))}))})}},8189:(ct,Ne,F)=>{F.d(Ne,{J:()=>k});var d=F(5577),te=F(4671);function k(le=1/0){return(0,d.z)(te.y,le)}},5577:(ct,Ne,F)=>{F.d(Ne,{z:()=>fe});var d=F(4004),te=F(8421),k=F(4482),le=F(9672),se=F(5403),de=F(576);function fe(me,G,$=1/0){return(0,de.m)(G)?fe((J,Be)=>(0,d.U)((Oe,De)=>G(J,Oe,Be,De))((0,te.Xf)(me(J,Be))),$):("number"==typeof G&&($=G),(0,k.e)((J,Be)=>function pe(me,G,$,J,Be,Oe,De,it){const ve=[];let _e=0,Je=0,at=!1;const Me=()=>{at&&!ve.length&&!_e&&G.complete()},be=Ue=>_e<J?Ie(Ue):ve.push(Ue),Ie=Ue=>{Oe&&G.next(Ue),_e++;let je=!1;(0,te.Xf)($(Ue,Je++)).subscribe((0,se.x)(G,W=>{Be?.(W),Oe?be(W):G.next(W)},()=>{je=!0},void 0,()=>{if(je)try{for(_e--;ve.length&&_e<J;){const W=ve.shift();De?(0,le.f)(G,De,()=>Ie(W)):Ie(W)}Me()}catch(W){G.error(W)}}))};return me.subscribe((0,se.x)(G,be,()=>{at=!0,Me()})),()=>{it?.()}}(J,Be,me,$)))}},5363:(ct,Ne,F)=>{F.d(Ne,{Q:()=>le});var d=F(9672),te=F(4482),k=F(5403);function le(se,pe=0){return(0,te.e)((de,fe)=>{de.subscribe((0,k.x)(fe,me=>(0,d.f)(fe,se,()=>fe.next(me),pe),()=>(0,d.f)(fe,se,()=>fe.complete(),pe),me=>(0,d.f)(fe,se,()=>fe.error(me),pe)))})}},3099:(ct,Ne,F)=>{F.d(Ne,{B:()=>se});var d=F(8421),te=F(7579),k=F(930),le=F(4482);function se(de={}){const{connector:fe=(()=>new te.x),resetOnError:me=!0,resetOnComplete:G=!0,resetOnRefCountZero:$=!0}=de;return J=>{let Be,Oe,De,it=0,ve=!1,_e=!1;const Je=()=>{Oe?.unsubscribe(),Oe=void 0},at=()=>{Je(),Be=De=void 0,ve=_e=!1},Me=()=>{const be=Be;at(),be?.unsubscribe()};return(0,le.e)((be,Ie)=>{it++,!_e&&!ve&&Je();const Ue=De=De??fe();Ie.add(()=>{it--,0===it&&!_e&&!ve&&(Oe=pe(Me,$))}),Ue.subscribe(Ie),!Be&&it>0&&(Be=new k.Hp({next:je=>Ue.next(je),error:je=>{_e=!0,Je(),Oe=pe(at,me,je),Ue.error(je)},complete:()=>{ve=!0,Je(),Oe=pe(at,G),Ue.complete()}}),(0,d.Xf)(be).subscribe(Be))})(J)}}function pe(de,fe,...me){if(!0===fe)return void de();if(!1===fe)return;const G=new k.Hp({next:()=>{G.unsubscribe(),de()}});return fe(...me).subscribe(G)}},9468:(ct,Ne,F)=>{F.d(Ne,{R:()=>te});var d=F(4482);function te(k,le=0){return(0,d.e)((se,pe)=>{pe.add(k.schedule(()=>se.subscribe(pe),le))})}},8505:(ct,Ne,F)=>{F.d(Ne,{b:()=>se});var d=F(576),te=F(4482),k=F(5403),le=F(4671);function se(pe,de,fe){const me=(0,d.m)(pe)||de||fe?{next:pe,error:de,complete:fe}:pe;return me?(0,te.e)((G,$)=>{var J;null===(J=me.subscribe)||void 0===J||J.call(me);let Be=!0;G.subscribe((0,k.x)($,Oe=>{var De;null===(De=me.next)||void 0===De||De.call(me,Oe),$.next(Oe)},()=>{var Oe;Be=!1,null===(Oe=me.complete)||void 0===Oe||Oe.call(me),$.complete()},Oe=>{var De;Be=!1,null===(De=me.error)||void 0===De||De.call(me,Oe),$.error(Oe)},()=>{var Oe,De;Be&&(null===(Oe=me.unsubscribe)||void 0===Oe||Oe.call(me)),null===(De=me.finalize)||void 0===De||De.call(me)}))}):le.y}},4408:(ct,Ne,F)=>{F.d(Ne,{o:()=>se});var d=F(727);class te extends d.w0{constructor(de,fe){super()}schedule(de,fe=0){return this}}const k={setInterval(pe,de,...fe){const{delegate:me}=k;return me?.setInterval?me.setInterval(pe,de,...fe):setInterval(pe,de,...fe)},clearInterval(pe){const{delegate:de}=k;return(de?.clearInterval||clearInterval)(pe)},delegate:void 0};var le=F(8737);class se extends te{constructor(de,fe){super(de,fe),this.scheduler=de,this.work=fe,this.pending=!1}schedule(de,fe=0){if(this.closed)return this;this.state=de;const me=this.id,G=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(G,me,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(G,this.id,fe),this}requestAsyncId(de,fe,me=0){return k.setInterval(de.flush.bind(de,this),me)}recycleAsyncId(de,fe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return fe;k.clearInterval(fe)}execute(de,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(de,fe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,fe){let G,me=!1;try{this.work(de)}catch($){me=!0,G=$||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:de,scheduler:fe}=this,{actions:me}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(me,this),null!=de&&(this.id=this.recycleAsyncId(fe,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Ne,F)=>{F.d(Ne,{v:()=>k});var d=F(6063);class te{constructor(se,pe=te.now){this.schedulerActionCtor=se,this.now=pe}schedule(se,pe=0,de){return new this.schedulerActionCtor(this,se).schedule(de,pe)}}te.now=d.l.now;class k extends te{constructor(se,pe=te.now){super(se,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:pe}=this;if(this._active)return void pe.push(se);let de;this._active=!0;do{if(de=se.execute(se.state,se.delay))break}while(se=pe.shift());if(this._active=!1,de){for(;se=pe.shift();)se.unsubscribe();throw de}}}},4986:(ct,Ne,F)=>{F.d(Ne,{P:()=>le,z:()=>k});var d=F(4408);const k=new(F(7565).v)(d.o),le=k},6063:(ct,Ne,F)=>{F.d(Ne,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ct,Ne,F)=>{F.d(Ne,{z:()=>d});const d={setTimeout(te,k,...le){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(te,k,...le):setTimeout(te,k,...le)},clearTimeout(te){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(ct,Ne,F)=>{F.d(Ne,{h:()=>te});const te=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Ne,F)=>{F.d(Ne,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,Ne,F)=>{F.d(Ne,{_6:()=>pe,jO:()=>le,yG:()=>se});var d=F(576),te=F(3532);function k(de){return de[de.length-1]}function le(de){return(0,d.m)(k(de))?de.pop():void 0}function se(de){return(0,te.K)(k(de))?de.pop():void 0}function pe(de,fe){return"number"==typeof k(de)?de.pop():fe}},8737:(ct,Ne,F)=>{function d(te,k){if(te){const le=te.indexOf(k);0<=le&&te.splice(le,1)}}F.d(Ne,{P:()=>d})},3888:(ct,Ne,F)=>{function d(te){const le=te(se=>{Error.call(se),se.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}F.d(Ne,{d:()=>d})},2806:(ct,Ne,F)=>{F.d(Ne,{O:()=>le,x:()=>k});var d=F(2416);let te=null;function k(se){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!te;if(pe&&(te={errorThrown:!1,error:null}),se(),pe){const{errorThrown:de,error:fe}=te;if(te=null,de)throw fe}}else se()}function le(se){d.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(ct,Ne,F)=>{function d(te,k,le,se=0,pe=!1){const de=k.schedule(function(){le(),pe?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(de),!pe)return de}F.d(Ne,{f:()=>d})},4671:(ct,Ne,F)=>{function d(te){return te}F.d(Ne,{y:()=>d})},1144:(ct,Ne,F)=>{F.d(Ne,{z:()=>d});const d=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(ct,Ne,F)=>{F.d(Ne,{D:()=>te});var d=F(576);function te(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(ct,Ne,F)=>{function d(te){return"function"==typeof te}F.d(Ne,{m:()=>d})},3670:(ct,Ne,F)=>{F.d(Ne,{c:()=>k});var d=F(8822),te=F(576);function k(le){return(0,te.m)(le[d.L])}},6495:(ct,Ne,F)=>{F.d(Ne,{T:()=>k});var d=F(2202),te=F(576);function k(le){return(0,te.m)(le?.[d.h])}},8239:(ct,Ne,F)=>{F.d(Ne,{t:()=>te});var d=F(576);function te(k){return(0,d.m)(k?.then)}},3260:(ct,Ne,F)=>{F.d(Ne,{L:()=>le,Q:()=>k});var d=F(655),te=F(576);function k(se){return(0,d.FC)(this,arguments,function*(){const de=se.getReader();try{for(;;){const{value:fe,done:me}=yield(0,d.qq)(de.read());if(me)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(fe)}}finally{de.releaseLock()}})}function le(se){return(0,te.m)(se?.getReader)}},3532:(ct,Ne,F)=>{F.d(Ne,{K:()=>te});var d=F(576);function te(k){return k&&(0,d.m)(k.schedule)}},4482:(ct,Ne,F)=>{F.d(Ne,{A:()=>te,e:()=>k});var d=F(576);function te(le){return(0,d.m)(le?.lift)}function k(le){return se=>{if(te(se))return se.lift(function(pe){try{return le(pe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,Ne,F)=>{function d(){}F.d(Ne,{Z:()=>d})},9635:(ct,Ne,F)=>{F.d(Ne,{U:()=>k,z:()=>te});var d=F(4671);function te(...le){return k(le)}function k(le){return 0===le.length?d.y:1===le.length?le[0]:function(pe){return le.reduce((de,fe)=>fe(de),pe)}}},7849:(ct,Ne,F)=>{F.d(Ne,{h:()=>k});var d=F(2416),te=F(3410);function k(le){te.z.setTimeout(()=>{const{onUnhandledError:se}=d.v;if(!se)throw le;se(le)})}},4532:(ct,Ne,F)=>{function d(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ne,{z:()=>d})},655:(ct,Ne,F)=>{function le(Q,ie){var re={};for(var ye in Q)Object.prototype.hasOwnProperty.call(Q,ye)&&ie.indexOf(ye)<0&&(re[ye]=Q[ye]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(ye=Object.getOwnPropertySymbols(Q);ce<ye.length;ce++)ie.indexOf(ye[ce])<0&&Object.prototype.propertyIsEnumerable.call(Q,ye[ce])&&(re[ye[ce]]=Q[ye[ce]])}return re}function fe(Q,ie,re,ye){return new(re||(re=Promise))(function(ke,gt){function $t(on){try{qe(ye.next(on))}catch(kn){gt(kn)}}function Bt(on){try{qe(ye.throw(on))}catch(kn){gt(kn)}}function qe(on){on.done?ke(on.value):function ce(ke){return ke instanceof re?ke:new re(function(gt){gt(ke)})}(on.value).then($t,Bt)}qe((ye=ye.apply(Q,ie||[])).next())})}function ve(Q){return this instanceof ve?(this.v=Q,this):new ve(Q)}function _e(Q,ie,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ye=re.apply(Q,ie||[]),ke=[];return ce={},gt("next"),gt("throw"),gt("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function gt(un){ye[un]&&(ce[un]=function(Xt){return new Promise(function(Vr,Zt){ke.push([un,Xt,Vr,Zt])>1||$t(un,Xt)})})}function $t(un,Xt){try{!function Bt(un){un.value instanceof ve?Promise.resolve(un.value.v).then(qe,on):kn(ke[0][2],un)}(ye[un](Xt))}catch(Vr){kn(ke[0][3],Vr)}}function qe(un){$t("next",un)}function on(un){$t("throw",un)}function kn(un,Xt){un(Xt),ke.shift(),ke.length&&$t(ke[0][0],ke[0][1])}}function at(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,ie=Q[Symbol.asyncIterator];return ie?ie.call(Q):(Q=function J(Q){var ie="function"==typeof Symbol&&Symbol.iterator,re=ie&&Q[ie],ye=0;if(re)return re.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ye>=Q.length&&(Q=void 0),{value:Q&&Q[ye++],done:!Q}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),re={},ye("next"),ye("throw"),ye("return"),re[Symbol.asyncIterator]=function(){return this},re);function ye(ke){re[ke]=Q[ke]&&function(gt){return new Promise(function($t,Bt){!function ce(ke,gt,$t,Bt){Promise.resolve(Bt).then(function(qe){ke({value:qe,done:$t})},gt)}($t,Bt,(gt=Q[ke](gt)).done,gt.value)})}}}F.d(Ne,{FC:()=>_e,KL:()=>at,_T:()=>le,mG:()=>fe,qq:()=>ve})},4650:(ct,Ne,F)=>{F.d(Ne,{$8M:()=>Ds,$Z:()=>$g,AFp:()=>Qv,AaK:()=>fe,CHM:()=>ya,CRH:()=>lA,CZH:()=>Yv,CqO:()=>WE,D6c:()=>_p,EJc:()=>rF,EpF:()=>GE,F$t:()=>mv,F4k:()=>$E,FYo:()=>mt,FiY:()=>Se,G48:()=>_F,Gf:()=>oA,GfV:()=>Lu,Gpc:()=>$,Hsn:()=>YE,Ikx:()=>wv,JOm:()=>za,KtG:()=>No,LFG:()=>On,LMc:()=>QA,LSH:()=>Ha,Lbi:()=>Xk,Lck:()=>bk,MAs:()=>jE,MGl:()=>ed,MMx:()=>JD,NdJ:()=>gv,OlP:()=>zt,PXZ:()=>n0,Q6J:()=>uv,QGY:()=>pv,QP$:()=>fo,Qsj:()=>Hn,QtT:()=>VN,R0b:()=>po,RDi:()=>Su,Rgc:()=>Ch,SBq:()=>Le,SDv:()=>qD,Sil:()=>sF,Suo:()=>aA,TTD:()=>li,TgZ:()=>lm,Tol:()=>US,Udp:()=>yv,VKq:()=>Mv,W1O:()=>hA,WLB:()=>xv,X6Q:()=>mF,XFs:()=>_t,Xpm:()=>U,Xts:()=>xu,Y36:()=>ah,YKP:()=>jN,YNc:()=>UE,Yjl:()=>Lt,Yz7:()=>Xt,ZZ4:()=>Hm,_Bn:()=>UN,_UZ:()=>dv,_Vd:()=>R,_c5:()=>p0,_uU:()=>zS,aQg:()=>f0,c2e:()=>tF,cJS:()=>Zt,cg1:()=>Ev,dDg:()=>hF,deG:()=>or,dqk:()=>$e,eFA:()=>r0,ekj:()=>vv,eoX:()=>RA,f3M:()=>Bd,g9A:()=>IA,h0i:()=>Dh,hGG:()=>WC,hij:()=>cm,iGM:()=>sA,ifc:()=>Wt,ip1:()=>DA,kEZ:()=>sC,kL8:()=>fN,lG2:()=>fr,lqb:()=>qo,lri:()=>MA,n5z:()=>yc,oAB:()=>ft,oxw:()=>NS,pQV:()=>KD,q4F:()=>Fl,qLn:()=>rh,qOj:()=>rv,qZA:()=>mh,rWj:()=>xA,s9C:()=>QE,sBO:()=>yF,sIi:()=>zc,s_b:()=>cp,soG:()=>Rm,tb:()=>TA,tp0:()=>dt,uIk:()=>ho,vHH:()=>De,vpe:()=>$l,wAp:()=>Et,xp6:()=>Ty,z2F:()=>s0,zSh:()=>Pl,zs3:()=>Bl});var d=F(7579),te=F(727),k=F(9751),le=F(6451),se=F(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=pe({__forward_ref__:pe});function $(s){return s.__forward_ref__=$,s.toString=function(){return fe(this())},s}function J(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===$}class De extends Error{constructor(o,l){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s,o){throw new De(-201,!1)}function qe(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ut(s){return rs(s,is)||rs(s,Zr)}function rs(s,o){return s.hasOwnProperty(o)?s[o]:null}function Kr(s){return s&&(s.hasOwnProperty(Hs)||s.hasOwnProperty(Ai))?s[Hs]:null}const is=pe({\u0275prov:pe}),Hs=pe({\u0275inj:pe}),Zr=pe({ngInjectableDef:pe}),Ai=pe({ngInjectorDef:pe});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let Yr;function wn(s){const o=Yr;return Yr=s,o}function ss(s,o,l){const c=Ut(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&_t.Optional?null:void 0!==o?o:void be(fe(s))}function Tn(s){return{toString:s}.toString()}var qn=(()=>((qn=qn||{})[qn.OnPush=0]="OnPush",qn[qn.Default=1]="Default",qn))(),Wt=(()=>{return(s=Wt||(Wt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Wt;var s})();const $e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),tr={},It=[],si=pe({\u0275cmp:pe}),nr=pe({\u0275dir:pe}),Oi=pe({\u0275pipe:pe}),nn=pe({\u0275mod:pe}),Qr=pe({\u0275fac:pe}),j=pe({__NG_ELEMENT_ID__:pe});let z=0;function U(s){return Tn(()=>{const l=!0===s.standalone,c={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===qn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||It,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Wt.Emulated,id:"c"+z++,styles:s.styles||It,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,b=s.features;return f.inputs=Yt(s.inputs,c),f.outputs=Yt(s.outputs),b&&b.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(K).filter(Ae):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Kn).filter(Ae):null,f})}function K(s){return xt(s)||yn(s)}function Ae(s){return null!==s}const We={};function ft(s){return Tn(()=>{const o={type:s.type,bootstrap:s.bootstrap||It,declarations:s.declarations||It,imports:s.imports||It,exports:s.exports||It,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(We[s.id]=s.type),o})}function Yt(s,o){if(null==s)return tr;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=c,o&&(o[f]=g)}return l}const fr=U;function Lt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function xt(s){return s[si]||null}function yn(s){return s[nr]||null}function Kn(s){return s[Oi]||null}function wr(s,o){const l=s[nn]||null;if(!l&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return l}function Vn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Jr(s){return Array.isArray(s)&&!0===s[1]}function hl(s){return 0!=(8&s.flags)}function fl(s){return 2==(2&s.flags)}function Eo(s){return 1==(1&s.flags)}function as(s){return null!==s.template}function fa(s){return 0!=(256&s[2])}function qs(s,o){return s.hasOwnProperty(Qr)?s[Qr]:null}class lc{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function li(){return Ks}function Ks(s){return s.type.prototype.ngOnChanges&&(s.setInput=uc),pa}function pa(){const s=gl(this),o=s?.current;if(o){const l=s.previous;if(l===tr)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function uc(s,o,l,c){const f=gl(s)||function uf(s,o){return s[pl]=o}(s,{previous:tr,current:null}),g=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[l],C=b[E];g[E]=new lc(C&&C.currentValue,o,b===tr),s[c]=o}li.ngInherit=!0;const pl="__ngSimpleChanges__";function gl(s){return s[pl]||null}function Nn(s){for(;Array.isArray(s);)s=s[0];return s}function _l(s,o){return Nn(o[s])}function Yn(s,o){return Nn(o[s.index])}function Co(s,o){return s.data[o]}function pr(s,o){const l=o[s];return Vn(l)?l:l[0]}function Io(s){return 4==(4&s[2])}function ws(s){return 64==(64&s[2])}function ui(s,o){return null==o?null:s[o]}function Ys(s){s[18]=0}function yl(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const nt={lFrame:hu(null),bindingsEnabled:!0};function So(){return nt.bindingsEnabled}function Te(){return nt.lFrame.lView}function Pt(){return nt.lFrame.tView}function ya(s){return nt.lFrame.contextLView=s,s[8]}function No(s){return nt.lFrame.contextLView=null,s}function Dn(){let s=va();for(;null!==s&&64===s.type;)s=s.parent;return s}function va(){return nt.lFrame.currentTNode}function Ao(){const s=nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ci(s,o){const l=nt.lFrame;l.currentTNode=s,l.isParent=o}function vl(){return nt.lFrame.isParent}function ba(){nt.lFrame.isParent=!1}function ir(){const s=nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Oo(){return nt.lFrame.bindingIndex++}function Ri(s){const o=nt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Td(s){nt.lFrame.inI18n=s}function Ea(s,o){const l=nt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Da(o)}function Da(s){nt.lFrame.currentDirectiveIndex=s}function du(){return nt.lFrame.currentQueryIndex}function bl(s){nt.lFrame.currentQueryIndex=s}function fc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ia(s,o,l){if(l&_t.SkipSelf){let f=o,g=s;for(;!(f=f.parent,null!==f||l&_t.Host||(f=fc(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;o=f,s=g}const c=nt.lFrame=pc();return c.currentTNode=o,c.lView=s,!0}function wl(s){const o=pc(),l=s[1];nt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function pc(){const s=nt.lFrame,o=null===s?null:s.child;return null===o?hu(s):o}function hu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function fu(){const s=nt.lFrame;return nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const pu=fu;function gu(){const s=fu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qn(){return nt.lFrame.selectedIndex}function Es(s){nt.lFrame.selectedIndex=s}function dn(){const s=nt.lFrame;return Co(s.tView,s.selectedIndex)}function Ad(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:N,ngOnDestroy:x}=g;b&&(s.contentHooks||(s.contentHooks=[])).push(-l,b),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),N&&((s.viewHooks||(s.viewHooks=[])).push(l,N),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,N)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(l,x)}}function gf(s,o,l){Mo(s,o,3,l)}function yu(s,o,l,c){(3&s[2])===l&&Mo(s,o,l,c)}function Od(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Mo(s,o,l,c){const g=c??-1,b=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<b;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(mc(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function mc(s,o,l,c){const f=l[c]<0,g=l[c+1],E=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Ta{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Po(s,o,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const g=l[c++],b=l[c++],E=l[c++];s.setAttribute(o,b,E,g)}else{const g=f,b=l[++c];ko(g)?s.setProperty(o,g,b):s.setAttribute(o,g,b),c++}}return c}function _f(s){return 3===s||4===s||6===s}function ko(s){return 64===s.charCodeAt(0)}function bu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const f=o[c];"number"==typeof f?l=f:0===l||yf(s,l,f,null,-1===l||2===l?o[++c]:null)}}return s}function yf(s,o,l,c,f){let g=0,b=s.length;if(-1===o)b=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){b=-1;break}if(E>o){b=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===c)return void(null!==f&&(s[g+1]=f));if(c===s[g+1])return void(s[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==b&&(s.splice(b,0,o),g=b+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==f&&s.splice(g++,0,f)}function vf(s){return-1!==s}function El(s){return 32767&s}function Js(s,o){let l=function Pi(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let bf=!0;function ls(s){const o=bf;return bf=s,o}let hn=0;const Ht={};function rn(s,o){const l=Bn(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Cn(c.data,s),Cn(o,null),Cn(c.blueprint,null));const f=wu(s,o),g=s.injectorIndex;if(vf(f)){const b=El(f),E=Js(f,o),C=E[1].data;for(let N=0;N<8;N++)o[g+N]=E[b+N]|C[b+N]}return o[g+8]=f,g}function Cn(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Bn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function wu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=o;for(;null!==f;){if(c=Vo(f),null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Eu(s,o,l){!function st(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(j)&&(c=l[j]),null==c&&(c=l[j]=hn++);const f=255&c;o.data[s+(f>>5)]|=1<<f}(s,o,l)}function xd(s,o,l){if(l&_t.Optional)return s;be()}function Xs(s,o,l,c){if(l&_t.Optional&&void 0===c&&(c=null),0==(l&(_t.Self|_t.Host))){const f=s[9],g=wn(void 0);try{return f?f.get(o,c,l&_t.Optional):ss(o,c,l&_t.Optional)}finally{wn(g)}}return xd(c,0,l)}function _c(s,o,l,c=_t.Default,f){if(null!==s){if(1024&o[2]){const b=function Ma(s,o,l,c,f){let g=s,b=o;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const E=ei(g,b,l,c|_t.Self,Ht);if(E!==Ht)return E;let C=g.parent;if(!C){const N=b[21];if(N){const x=N.get(l,Ht,c);if(x!==Ht)return x}C=Vo(b),b=b[15]}g=C}return f}(s,o,l,c,Ht);if(b!==Ht)return b}const g=ei(s,o,l,c,Ht);if(g!==Ht)return g}return Xs(o,l,c,f)}function ei(s,o,l,c,f){const g=function Aa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(j)?s[j]:void 0;return"number"==typeof o?o>=0?255&o:Oa:o}(l);if("function"==typeof g){if(!Ia(o,s,c))return c&_t.Host?xd(f,0,c):Xs(o,l,c,f);try{const b=g(c);if(null!=b||c&_t.Optional)return b;be()}finally{pu()}}else if("number"==typeof g){let b=null,E=Bn(s,o),C=-1,N=c&_t.Host?o[16][6]:null;for((-1===E||c&_t.SkipSelf)&&(C=-1===E?wu(s,o):o[E+8],-1!==C&&pn(c,!1)?(b=o[1],E=El(C),o=Js(C,o)):E=-1);-1!==E;){const x=o[1];if(Dl(g,E,x.data)){const V=ot(E,o,l,b,c,N);if(V!==Ht)return V}C=o[E+8],-1!==C&&pn(c,o[1].data[E+8]===N)&&Dl(g,E,o)?(b=x,E=El(C),o=Js(C,o)):E=-1}}return f}function ot(s,o,l,c,f,g){const b=o[1],E=b.data[s+8],x=Na(E,b,l,null==c?fl(E)&&bf:c!=b&&0!=(3&E.type),f&_t.Host&&g===E);return null!==x?Lo(o,b,x,E):Ht}function Na(s,o,l,c,f){const g=s.providerIndexes,b=o.data,E=1048575&g,C=s.directiveStart,x=g>>20,Z=f?E+x:s.directiveEnd;for(let ne=c?E:E+x;ne<Z;ne++){const Ce=b[ne];if(ne<C&&l===Ce||ne>=C&&Ce.type===l)return ne}if(f){const ne=b[C];if(ne&&as(ne)&&ne.type===l)return C}return null}function Lo(s,o,l,c){let f=s[l];const g=o.data;if(function vu(s){return s instanceof Ta}(f)){const b=f;b.resolving&&function Je(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${l}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(g[l]));const E=ls(b.canSeeViewProviders);b.resolving=!0;const C=b.injectImpl?wn(b.injectImpl):null;Ia(s,c,_t.Default);try{f=s[l]=b.factory(void 0,g,s,c),o.firstCreatePass&&l>=c.directiveStart&&function pf(s,o,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=o.type.prototype;if(c){const b=Ks(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,b)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==C&&wn(C),ls(E),b.resolving=!1,pu()}}return f}function Dl(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function pn(s,o){return!(s&_t.Self||s&_t.Host&&o)}class us{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return _c(this._tNode,this._lView,o,c,l)}}function Oa(){return new us(Dn(),Te())}function yc(s){return Tn(()=>{const o=s.prototype.constructor,l=o[Qr]||Cu(o),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const g=f[Qr]||Cu(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Cu(s){return Be(s)?()=>{const o=Cu(J(s));return o&&o()}:qs(s)}function Vo(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Ds(s){return function Du(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const g=l[f];if(_f(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(g===o)return l[f+1];f+=2}}}return null}(Dn(),s)}const xr="__parameters__";function eo(s,o,l){return Tn(()=>{const c=function ki(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(o);function f(...g){if(this instanceof f)return c.apply(this,g),this;const b=new f(...g);return E.annotation=b,E;function E(C,N,x){const V=C.hasOwnProperty(xr)?C[xr]:Object.defineProperty(C,xr,{value:[]})[xr];for(;V.length<=x;)V.push(null);return(V[x]=V[x]||[]).push(b),C}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class zt{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Xt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const or=new zt("AnalyzeForEntryComponents");function Cr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Cr(c,o)):o!==s&&o.push(c)}return o}function Rr(s,o){s.forEach(l=>Array.isArray(l)?Rr(l,o):o(l))}function Pa(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Cl(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Bo(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function Pr(s,o,l){let c=Ss(s,o);return c>=0?s[1|c]=l:(c=~c,function Ft(s,o,l,c){let f=s.length;if(f==o)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function hi(s,o){const l=Ss(s,o);if(l>=0)return s[1|l]}function Ss(s,o){return function Uo(s,o,l){let c=0,f=s.length>>l;for(;f!==c;){const g=c+(f-c>>1),b=s[g<<l];if(o===b)return g<<l;b>o?f=g:c=g+1}return~(f<<l)}(s,o,1)}const Vi={},no="__NG_DI_FLAG__",Tl="ngTempTokenPath",fi=/\n/gm,wt="__source";let ro;function Go(s){const o=ro;return ro=s,o}function As(s,o=_t.Default){if(void 0===ro)throw new De(-203,!1);return null===ro?ss(s,void 0,o):ro.get(s,o&_t.Optional?null:void 0,o)}function On(s,o=_t.Default){return(function Fn(){return Yr}()||As)(J(s),o)}function Bd(s,o=_t.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),On(s,o)}function I(s){const o=[];for(let l=0;l<s.length;l++){const c=J(s[l]);if(Array.isArray(c)){if(0===c.length)throw new De(900,!1);let f,g=_t.Default;for(let b=0;b<c.length;b++){const E=c[b],C=M(E);"number"==typeof C?-1===C?f=E.token:g|=C:f=E}o.push(On(f,g))}else o.push(On(c))}return o}function S(s,o){return s[no]=o,s.prototype[no]=o,s}function M(s){return s[no]}const Se=S(eo("Optional"),8),dt=S(eo("SkipSelf"),4);let Ud,jd;function Su(s){Ud=s}function Au(s){return function Nu(){if(void 0===jd&&(jd=null,$e.trustedTypes))try{jd=$e.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return jd}()?.createHTML(s)||s}class Gd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ba(s){return s instanceof Gd?s.changingThisBreaksApplicationSecurity:s}class Ua{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(Au(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class q_{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Au(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=Au(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let f=l.length-1;0<f;f--){const b=l.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&o.removeAttribute(b)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Sc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Os=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zo(s){return(s=String(s)).match(Sc)||s.match(Os)?s:"unsafe:"+s}function Af(s){return(s=String(s)).split(",").map(o=>zo(o.trim())).join(", ")}function Ui(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function Nc(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Ol=Ui("area,br,col,hr,img,wbr"),Ac=Ui("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Eg=Ui("rp,rt"),zd=Nc(Ol,Nc(Ac,Ui("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nc(Eg,Ui("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nc(Eg,Ac)),Mu=Ui("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ml=Ui("srcset"),Kd=Nc(Mu,Ml,Ui("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ui("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var jn=(()=>((jn=jn||{})[jn.NONE=0]="NONE",jn[jn.HTML=1]="HTML",jn[jn.STYLE=2]="STYLE",jn[jn.SCRIPT=3]="SCRIPT",jn[jn.URL=4]="URL",jn[jn.RESOURCE_URL=5]="RESOURCE_URL",jn))();function Ha(s){const o=function xl(){const s=Te();return s&&s[12]}();return o?o.sanitize(jn.URL,s)||"":function Al(s,o){const l=function G_(s){return s instanceof Gd&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?Ba(s):zo(ve(s))}const xu=new zt("ENVIRONMENT_INITIALIZER"),ji=new zt("INJECTOR",-1),xc=new zt("INJECTOR_DEF_TYPES");class Ff{get(o,l=Vi){if(l===Vi){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return l}}function Hi(...s){return{\u0275providers:Ru(0,s)}}function Ru(s,...o){const l=[],c=new Set;let f;return Rr(o,g=>{const b=g;Pu(b,l,[],c)&&(f||(f=[]),f.push(b))}),void 0!==f&&Yd(f,l),l}function Yd(s,o){for(let l=0;l<s.length;l++){const{providers:f}=s[l];Rr(f,g=>{o.push(g)})}}function Pu(s,o,l,c){if(!(s=J(s)))return!1;let f=null,g=Kr(s);const b=!g&&xt(s);if(g||b){if(b&&!b.standalone)return!1;f=s}else{const C=s.ngModule;if(g=Kr(C),!g)return!1;f=C}const E=c.has(f);if(b){if(E)return!1;if(c.add(f),b.dependencies){const C="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const N of C)Pu(N,o,l,c)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let N;c.add(f);try{Rr(g.imports,x=>{Pu(x,o,l,c)&&(N||(N=[]),N.push(x))})}finally{}void 0!==N&&Yd(N,o)}if(!E){const N=qs(f)||(()=>new f);o.push({provide:f,useFactory:N,deps:It},{provide:xc,useValue:f,multi:!0},{provide:xu,useValue:()=>On(f),multi:!0})}const C=g.providers;null==C||E||Rr(C,x=>{o.push(x)})}}return f!==s&&void 0!==s.providers}const Lf=pe({provide:String,useValue:pe});function ku(s){return null!==s&&"object"==typeof s&&Lf in s}function gi(s){return"function"==typeof s}const Pl=new zt("Set Injector scope."),Qd={},ey={};let Jd;function kr(){return void 0===Jd&&(Jd=new Ff),Jd}class qo{}class Xd extends qo{constructor(o,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bf(o,b=>this.processProvider(b)),this.records.set(ji,kl(void 0,this)),f.has("environment")&&this.records.set(qo,kl(void 0,this));const g=this.records.get(Pl);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(xc.multi,It,_t.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=Go(this),c=wn(void 0);try{return o()}finally{Go(l),wn(c)}}get(o,l=Vi,c=_t.Default){this.assertNotDestroyed();const f=Go(this),g=wn(void 0);try{if(!(c&_t.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function ny(s){return"function"==typeof s||"object"==typeof s&&s instanceof zt}(o)&&Ut(o);E=C&&this.injectableDefInScope(C)?kl(Ng(o),Qd):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&_t.Self?kr():this.parent).get(o,l=c&_t.Optional&&l===Vi?null:l)}catch(b){if("NullInjectorError"===b.name){if((b[Tl]=b[Tl]||[]).unshift(fe(o)),f)throw b;return function B(s,o,l,c){const f=s[Tl];throw o[wt]&&f.unshift(o[wt]),s.message=function X(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=fe(o);if(Array.isArray(o))f=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let b in o)if(o.hasOwnProperty(b)){let E=o[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}f=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(fi,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[Tl]=null,s}(b,o,"R3InjectorError",this.source)}throw b}finally{wn(g),Go(f)}}resolveInjectorInitializers(){const o=Go(this),l=wn(void 0);try{const c=this.get(xu.multi,It,_t.Self);for(const f of c)f()}finally{Go(o),wn(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(fe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let l=gi(o=J(o))?o:J(o&&o.provide);const c=function Ga(s){return ku(s)?kl(void 0,s.useValue):kl($a(s),Qd)}(o);if(gi(o)||!0!==o.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=kl(void 0,Qd,!0),f.factory=()=>I(f.multi),this.records.set(l,f)),l=o,f.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===Qd&&(l.value=ey,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Vf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=J(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Ng(s){const o=Ut(s),l=null!==o?o.factory:qs(s);if(null!==l)return l;if(s instanceof zt)throw new De(204,!1);if(s instanceof Function)return function Ko(s){const o=s.length;if(o>0)throw Bo(o,"?"),new De(204,!1);const l=function ri(s){const o=s&&(s[is]||s[Zr]);if(o){const l=function Or(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new De(204,!1)}function $a(s,o,l){let c;if(gi(s)){const f=J(s);return qs(f)||Ng(f)}if(ku(s))c=()=>J(s.useValue);else if(function Sg(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...I(s.deps||[]));else if(function Rl(s){return!(!s||!s.useExisting)}(s))c=()=>On(J(s.useExisting));else{const f=J(s&&(s.useClass||s.provide));if(!function ty(s){return!!s.deps}(s))return qs(f)||Ng(f);c=()=>new f(...I(s.deps))}return c}function kl(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function ry(s){return!!s.\u0275providers}function Bf(s,o){for(const l of s)Array.isArray(l)?Bf(l,o):ry(l)?Bf(l.\u0275providers,o):o(l)}class v{}class A{resolveComponentFactory(o){throw function p(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let R=(()=>{class s{}return s.NULL=new A,s})();function Y(){return ae(Dn(),Te())}function ae(s,o){return new Le(Yn(s,o))}let Le=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Y,s})();function Xe(s){return s instanceof Le?s.nativeElement:s}class mt{}let Hn=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ds(){const s=Te(),l=pr(Dn().index,s);return(Vn(l)?l:s)[11]}(),s})(),Rc=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class Lu{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Fl=new Lu("14.1.0"),Pc={};function Mg(s){return s.ngOriginalError}class rh{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Mg(o);for(;l&&Mg(l);)l=Mg(l);return l||null}}const _w=/^>|^->|<!--|-->|--!>|<!-$/g,i1=/(<|>)/;const xg=new Map;let ly=0;const ih="__ngContext__";function mi(s,o){Vn(o)?(s[ih]=o[20],function c1(s){xg.set(s[20],s)}(o)):s[ih]=o}function Uf(s){const o=s[ih];return"number"==typeof o?function vw(s){return xg.get(s)||null}(o):o||null}function dy(s){const o=Uf(s);return o?Vn(o)?o:o.lView:null}const f1=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind($e))();function Wa(s){return s instanceof Function?s():s}var za=(()=>((za=za||{})[za.Important=1]="Important",za[za.DashCase=2]="DashCase",za))();let fy;function jf(s,o){return fy(s,o)}function Hf(s){const o=s[3];return Jr(o)?o[3]:o}function py(s){return Mw(s[13])}function gy(s){return Mw(s[4])}function Mw(s){for(;null!==s&&!Jr(s);)s=s[4];return s}function sh(s,o,l,c,f){if(null!=c){let g,b=!1;Jr(c)?g=c:Vn(c)&&(b=!0,c=c[0]);const E=Nn(c);0===s&&null!==l?null==f?$f(o,l,E):Lc(o,l,E,f||null,!0):1===s&&null!==l?Lc(o,l,E,f||null,!0):2===s?jw(o,E,b):3===s&&o.destroyNode(E),null!=g&&function S1(s,o,l,c,f){const g=l[7];g!==Nn(l)&&sh(o,s,c,g,f);for(let E=10;E<l.length;E++){const C=l[E];zf(C[1],C,s,o,c,g)}}(o,s,g,l,f)}}function my(s,o){return s.createText(o)}function _y(s,o,l){s.setValue(o,l)}function v1(s,o){return s.createComment(function yw(s){return s.replace(_w,o=>o.replace(i1,"\u200b$1\u200b"))}(o))}function Gf(s,o,l){return s.createElement(o,l)}function xw(s,o){const l=s[9],c=l.indexOf(o),f=o[3];512&o[2]&&(o[2]&=-513,yl(f,-1)),l.splice(c,1)}function yy(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&xw(f,c),o>0&&(s[l-1][4]=c[4]);const g=Cl(s,10+o);!function b1(s,o){zf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const b=g[19];null!==b&&b.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Rw(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&zf(s,o,l,3,null,null),function EP(s){let o=s[13];if(!o)return vy(s[1],s);for(;o;){let l=null;if(Vn(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Vn(o)&&vy(o[1],o),o=o[3];null===o&&(o=s),Vn(o)&&vy(o[1],o),l=o&&o[4]}o=l}}(o)}}function vy(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Pw(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=o[l[c]];if(!(f instanceof Ta)){const g=l[c+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=f[g[b]],C=g[b+1];try{C.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,o),function Gi(s,o){const l=s.cleanup,c=o[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const b=l[g+1],E="function"==typeof b?b(o):Nn(o[b]),C=c[f=l[g+2]],N=l[g+3];"boolean"==typeof N?E.removeEventListener(l[g],C,N):N>=0?c[f=N]():c[f=-N].unsubscribe(),g+=2}else{const b=c[f=l[g+1]];l[g].call(b)}if(null!==c){for(let g=f+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&Jr(o[3])){l!==o[3]&&xw(l,o);const c=o[19];null!==c&&c.detachView(s)}!function bw(s){xg.delete(s[20])}(o)}}function kw(s,o,l){return Fw(s,o.parent,l)}function Fw(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===Wt.None||f===Wt.Emulated)return null}return Yn(c,l)}function Lc(s,o,l,c,f){s.insertBefore(o,l,c,f)}function $f(s,o,l){s.appendChild(o,l)}function Lw(s,o,l,c,f){null!==c?Lc(s,o,l,c,f):$f(s,o,l)}function kg(s,o){return s.parentNode(o)}function by(s,o,l){return Wf(s,o,l)}function Uw(s,o,l){return 40&s.type?Yn(s,l):null}let Fg,Wf=Uw;function T1(s,o){Wf=s,Fg=o}function Vc(s,o,l,c){const f=kw(s,c,o),g=o[11],E=by(c.parent||o[6],c,o);if(null!=f)if(Array.isArray(l))for(let C=0;C<l.length;C++)Lw(g,f,l[C],E,!1);else Lw(g,f,l,E,!1);void 0!==Fg&&Fg(g,c,o,l,f)}function Lg(s,o){if(null!==o){const l=o.type;if(3&l)return Yn(o,s);if(4&l)return Bc(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Lg(s,c);{const f=s[o.index];return Jr(f)?Bc(-1,f):Nn(f)}}if(32&l)return jf(o,s)()||Nn(s[o.index]);{const c=Ir(s,o);return null!==c?Array.isArray(c)?c[0]:Lg(Hf(s[16]),c):Lg(s,o.next)}}return null}function Ir(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Bc(s,o){const l=10+s+1;if(l<o.length){const c=o[l],f=c[1].firstChild;if(null!==f)return Lg(c,f)}return o[7]}function jw(s,o,l){const c=kg(s,o);c&&function I1(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}function oh(s,o,l,c,f,g,b){for(;null!=l;){const E=c[l.index],C=l.type;if(b&&0===o&&(E&&mi(Nn(E),c),l.flags|=4),64!=(64&l.flags))if(8&C)oh(s,o,l.child,c,f,g,!1),sh(o,s,f,E,g);else if(32&C){const N=jf(l,c);let x;for(;x=N();)sh(o,s,f,x,g);sh(o,s,f,E,g)}else 16&C?Gw(s,o,c,l,f,g):sh(o,s,f,E,g);l=b?l.projectionNext:l.next}}function zf(s,o,l,c,f,g){oh(l,c,s.firstChild,o,f,g,!1)}function Gw(s,o,l,c,f,g){const b=l[16],C=b[6].projection[c.projection];if(Array.isArray(C))for(let N=0;N<C.length;N++)sh(o,s,f,C[N],g);else oh(s,o,C,b[3],f,g,!0)}function wy(s,o,l){s.setAttribute(o,"style",l)}function Vl(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function Zo(s,o,l){let c=s.length;for(;;){const f=s.indexOf(o,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=o.length;if(f+g===c||s.charCodeAt(f+g)<=32)return f}l=f+1}}const Ey="ng-template";function A1(s,o,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==Zo(f.toLowerCase(),o,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function $w(s){return 4===s.type&&s.value!==Ey}function O1(s,o,l){return o===(4!==s.type||l?s.value:Ey)}function Dy(s,o,l){let c=4;const f=s.attrs||[],g=function Uu(s){for(let o=0;o<s.length;o++)if(_f(s[o]))return o;return s.length}(f);let b=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!b)if(4&c){if(c=2|1&c,""!==C&&!O1(s,C,l)||""===C&&1===o.length){if(Yo(c))return!1;b=!0}}else{const N=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!A1(s.attrs,N,l)){if(Yo(c))return!1;b=!0}continue}const V=Bu(8&c?"class":C,f,$w(s),l);if(-1===V){if(Yo(c))return!1;b=!0;continue}if(""!==N){let Z;Z=V>g?"":f[V+1].toLowerCase();const ne=8&c?Z:null;if(ne&&-1!==Zo(ne,N,0)||2&c&&N!==Z){if(Yo(c))return!1;b=!0}}}}else{if(!b&&!Yo(c)&&!Yo(C))return!1;if(b&&Yo(C))continue;b=!1,c=C|1&c}}return Yo(c)||b}function Yo(s){return 0==(1&s)}function Bu(s,o,l,c){if(null===o)return-1;let f=0;if(c||!l){let g=!1;for(;f<o.length;){const b=o[f];if(b===s)return f;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=o[++f];for(;"string"==typeof E;)E=o[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=g?1:2}return-1}return function M1(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Cy(s,o,l=!1){for(let c=0;c<o.length;c++)if(Dy(s,o[c],l))return!0;return!1}function CP(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let f=0;f<s.length;f++)if(s[f]!==c[f])continue e;return!0}}return!1}function Iy(s,o){return s?":not("+o.trim()+")":o}function Ww(s){let o=s[0],l=1,c=2,f="",g=!1;for(;l<s.length;){let b=s[l];if("string"==typeof b)if(2&c){const E=s[++l];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?f+="."+b:4&c&&(f+=" "+b);else""!==f&&!Yo(b)&&(o+=Iy(g,f),f=""),c=b,g=g||!Yo(c);l++}return""!==f&&(o+=Iy(g,f)),o}const Mt={};function Ty(s){Sy(Pt(),Te(),Qn()+s,!1)}function Sy(s,o,l,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&gf(o,g,l)}else{const g=s.preOrderHooks;null!==g&&yu(o,g,0,l)}Es(l)}function Bg(s,o=null,l=null,c){const f=My(s,o,l,c);return f.resolveInjectorInitializers(),f}function My(s,o=null,l=null,c,f=new Set){const g=[l||It,Hi(s)];return c=c||("object"==typeof s?void 0:fe(s)),new Xd(g,o||kr(),c||null,f)}let Bl=(()=>{class s{static create(l,c){if(Array.isArray(l))return Bg({name:""},c,l,"");{const f=l.name??"";return Bg({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=Vi,s.NULL=new Ff,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>On(ji)}),s.__NG_ELEMENT_ID__=-1,s})();function ah(s,o=_t.Default){const l=Te();return null===l?On(s,o):_c(Dn(),l,J(s),o)}function $g(){throw new Error("invalid")}function jc(s,o){return s<<17|o<<2}function bi(s){return s>>17&32767}function Wg(s){return 2|s}function Qo(s){return(131068&s)>>2}function zg(s,o){return-131069&s|o<<2}function qg(s){return 1|s}function Wy(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],g=l[c+1];if(-1!==g){const b=s.data[g];bl(f),b.contentQueries(2,o[g],g)}}}function Jf(s,o,l,c,f,g,b,E,C,N,x){const V=o.blueprint.slice();return V[0]=f,V[2]=76|c,(null!==x||s&&1024&s[2])&&(V[2]|=1024),Ys(V),V[3]=V[15]=s,V[8]=l,V[10]=b||s&&s[10],V[11]=E||s&&s[11],V[12]=C||s&&s[12]||null,V[9]=N||s&&s[9]||null,V[6]=g,V[20]=function u1(){return ly++}(),V[21]=x,V[16]=2==o.type?s[16]:V,V}function dh(s,o,l,c,f){let g=s.data[o];if(null===g)g=zy(s,o,l,c,f),function Id(){return nt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=f;const b=Ao();g.injectorIndex=null===b?-1:b.injectorIndex}return ci(g,!0),g}function zy(s,o,l,c,f){const g=va(),b=vl(),C=s.data[o]=function Jy(s,o,l,c,f,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,l,o,c,f);return null===s.firstChild&&(s.firstChild=C),null!==g&&(b?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}function Gc(s,o,l,c){if(0===l)return-1;const f=o.length;for(let g=0;g<l;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return f}function Jg(s,o,l){wl(o);try{const c=s.viewQuery;null!==c&&nv(1,c,l);const f=s.template;null!==f&&fE(s,o,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Wy(s,o),s.staticViewQueries&&nv(2,s.viewQuery,l);const g=s.components;null!==g&&function dE(s,o){for(let l=0;l<o.length;l++)uS(s,o[l])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,gu()}}function Xg(s,o,l,c){const f=o[2];if(128!=(128&f)){wl(o);try{Ys(o),function hc(s){return nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&fE(s,o,l,2,c);const b=3==(3&f);if(b){const N=s.preOrderCheckHooks;null!==N&&gf(o,N,null)}else{const N=s.preOrderHooks;null!==N&&yu(o,N,0,null),Od(o,0)}if(function TE(s){for(let o=py(s);null!==o;o=gy(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const f=l[c],g=f[3];0==(512&f[2])&&yl(g,1),f[2]|=512}}}(o),function aS(s){for(let o=py(s);null!==o;o=gy(o))for(let l=10;l<o.length;l++){const c=o[l],f=c[1];ws(c)&&Xg(f,c,f.template,c[8])}}(o),null!==s.contentQueries&&Wy(s,o),b){const N=s.contentCheckHooks;null!==N&&gf(o,N)}else{const N=s.contentHooks;null!==N&&yu(o,N,1),Od(o,1)}!function Q1(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)Es(~f);else{const g=f,b=l[++c],E=l[++c];Ea(b,g),E(2,o[g])}}}finally{Es(-1)}}(s,o);const E=s.components;null!==E&&function J1(s,o){for(let l=0;l<o.length;l++)lS(s,o[l])}(o,E);const C=s.viewQuery;if(null!==C&&nv(2,C,c),b){const N=s.viewCheckHooks;null!==N&&gf(o,N)}else{const N=s.viewHooks;null!==N&&yu(o,N,2),Od(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,yl(o[3],-1))}finally{gu()}}}function hE(s,o,l,c){const f=o[10],b=Io(o);try{!b&&f.begin&&f.begin(),b&&Jg(s,o,c),Xg(s,o,l,c)}finally{!b&&f.end&&f.end()}}function fE(s,o,l,c,f){const g=Qn(),b=2&c;try{Es(-1),b&&o.length>22&&Sy(s,o,22,!1),l(c,f)}finally{Es(g)}}function Ky(s,o,l){!So()||(function vE(s,o,l,c){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||rn(l,o),mi(c,o);const b=l.initialInputs;for(let E=f;E<g;E++){const C=s.data[E],N=as(C);N&&CE(o,l,C);const x=Lo(o,s,E,l);mi(x,o),null!==b&&sS(0,E-f,x,C,0,b),N&&(pr(l.index,o)[8]=x)}}(s,o,l,Yn(l,o)),128==(128&l.flags)&&function rS(s,o,l){const c=l.directiveStart,f=l.directiveEnd,g=l.index,b=function df(){return nt.lFrame.currentDirectiveIndex}();try{Es(g);for(let E=c;E<f;E++){const C=s.data[E],N=o[E];Da(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&iS(C,N)}}finally{Es(-1),Da(b)}}(s,o,l))}function em(s,o,l=Yn){const c=o.localNames;if(null!==c){let f=o.index+1;for(let g=0;g<c.length;g+=2){const b=c[g+1],E=-1===b?l(o,s):s[b];s[f++]=E}}}function Zy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Yy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Yy(s,o,l,c,f,g,b,E,C,N){const x=22+c,V=x+f,Z=function pE(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Mt);return l}(x,V),ne="function"==typeof N?N():N;return Z[1]={type:s,blueprint:Z,template:l,queries:null,viewQuery:E,declTNode:o,data:Z.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:C,consts:ne,incompleteFirstPass:!1}}function gE(s,o,l,c){const f=dS(o);null===l?f.push(c):(f.push(l),s.firstCreatePass&&hS(s).push(c,f.length-1))}function mE(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,f):l[c]=[o,f]}return l}function tm(s,o){const c=o.directiveEnd,f=s.data,g=o.attrs,b=[];let E=null,C=null;for(let N=o.directiveStart;N<c;N++){const x=f[N],V=x.inputs,Z=null===g||$w(o)?null:oS(V,g);b.push(Z),E=mE(V,N,E),C=mE(x.outputs,N,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=b,o.inputs=E,o.outputs=C}function Ms(s,o,l,c,f,g,b,E){const C=Yn(o,l);let x,N=o.inputs;!E&&null!=N&&(x=N[c])?(OE(s,l,x,c,f),fl(o)&&Xy(l,o.index)):3&o.type&&(c=function _E(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=b?b(f,o.value||"",c):f,g.setProperty(C,c,f))}function Xy(s,o){const l=pr(o,s);16&l[2]||(l[2]|=32)}function Xf(s,o,l,c){let f=!1;if(So()){const g=function ev(s,o,l){const c=s.directiveRegistry;let f=null;if(c)for(let g=0;g<c.length;g++){const b=c[g];Cy(l,b.selectors,!1)&&(f||(f=[]),Eu(rn(l,o),s,b.type),as(b)?(bE(s,l),f.unshift(b)):f.push(b))}return f}(s,o,l),b=null===c?null:{"":-1};if(null!==g){f=!0,ju(l,s.data.length,g.length);for(let x=0;x<g.length;x++){const V=g[x];V.providersResolver&&V.providersResolver(V)}let E=!1,C=!1,N=Gc(s,o,g.length,null);for(let x=0;x<g.length;x++){const V=g[x];l.mergedAttrs=bu(l.mergedAttrs,V.hostAttrs),DE(s,l,o,N,V),EE(N,V,b),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const Z=V.type.prototype;!E&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!C&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),N++}tm(s,l)}b&&function wE(s,o,l){if(o){const c=s.localNames=[];for(let f=0;f<o.length;f+=2){const g=l[o[f+1]];if(null==g)throw new De(-301,!1);c.push(o[f],g)}}}(l,c,b)}return l.mergedAttrs=bu(l.mergedAttrs,l.attrs),f}function yE(s,o,l,c,f,g){const b=g.hostBindings;if(b){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function nS(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=C&&E.push(C),E.push(c,f,b)}}function iS(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function bE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function EE(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;as(o)&&(l[""]=s)}}function ju(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function DE(s,o,l,c,f){s.data[c]=f;const g=f.factory||(f.factory=qs(f.type)),b=new Ta(g,as(f),ah);s.blueprint[c]=b,l[c]=b,yE(s,o,0,c,Gc(s,l,f.hostVars,Mt),f)}function CE(s,o,l){const c=Yn(o,s),f=Zy(l),g=s[10],b=im(s,Jf(s,f,null,l.onPush?32:16,c,o,g,g.createRenderer(c,l),null,null,null));s[o.index]=b}function nm(s,o,l,c,f,g,b){if(null==g)s.removeAttribute(o,f,l);else{const E=null==b?ve(g):b(g,c||"",f);s.setAttribute(o,f,E,l)}}function sS(s,o,l,c,f,g){const b=g[o];if(null!==b){const E=c.setInput;for(let C=0;C<b.length;){const N=b[C++],x=b[C++],V=b[C++];null!==E?c.setInput(l,V,N,x):l[x]=V}}}function oS(s,o){let l=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],o[c+1])),c+=2}else c+=2;else c+=4}return l}function tv(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function lS(s,o){const l=pr(o,s);if(ws(l)){const c=l[1];48&l[2]?Xg(c,l,c.template,l[8]):l[5]>0&&rm(l)}}function rm(s){for(let c=py(s);null!==c;c=gy(c))for(let f=10;f<c.length;f++){const g=c[f];if(512&g[2]){const b=g[1];Xg(b,g,b.template,g[8])}else g[5]>0&&rm(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=pr(l[c],s);ws(f)&&f[5]>0&&rm(f)}}function uS(s,o){const l=pr(o,s),c=l[1];(function SE(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Jg(c,l,l[8])}function im(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function sm(s){for(;s;){s[2]|=32;const o=Hf(s);if(fa(s)&&!o)return s;s=o}return null}function AE(s){!function cS(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=dy(l);if(null!==c){const f=c[1];hE(f,c,f.template,l)}}}(s[8])}function nv(s,o,l){bl(0),o(s,l)}const UP=(()=>Promise.resolve(null))();function dS(s){return s[7]||(s[7]=[])}function hS(s){return s.cleanup||(s.cleanup=[])}function pS(s,o){const l=s[9],c=l?l.get(rh,null):null;c&&c.handleError(o)}function OE(s,o,l,c,f){for(let g=0;g<l.length;){const b=l[g++],E=l[g++],C=o[b],N=s.data[b];null!==N.setInput?N.setInput(C,f,c,E):C[E]=f}}function $c(s,o,l){let c=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==o)for(let b=0;b<o.length;b++){const E=o[b];"number"==typeof E?g=E:1==g?f=me(f,E):2==g&&(c=me(c,E+": "+o[++b]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}function xs(s,o,l,c,f=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&c.push(Nn(g)),Jr(g))for(let E=10;E<g.length;E++){const C=g[E],N=C[1].firstChild;null!==N&&xs(C[1],C,N,c)}const b=l.type;if(8&b)xs(s,o,l.child,c);else if(32&b){const E=jf(l,o);let C;for(;C=E();)c.push(C)}else if(16&b){const E=Ir(o,l);if(Array.isArray(E))c.push(...E);else{const C=Hf(o[16]);xs(C[1],C,E,c,!0)}}l=f?l.projectionNext:l.next}return c}class ep{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return xs(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Jr(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(yy(o,c),Cl(l,c))}this._attachedToViewContainer=!1}Rw(this._lView[1],this._lView)}onDestroy(o){gE(this._lView[1],this._lView,null,o)}markForCheck(){sm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function NE(s,o,l){const c=o[10];c.begin&&c.begin();try{Xg(s,o,s.template,l)}catch(f){throw pS(o,f),f}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function E1(s,o){zf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class ME extends ep{constructor(o){super(o),this._view=o}detectChanges(){AE(this._view)}checkNoChanges(){}get context(){return null}}class $i extends R{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=xt(o);return new Wc(l,this.ngModule)}}function ao(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class Rs{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){const f=this.injector.get(o,Pc,c);return f!==Pc||l===Pc?f:this.parentInjector.get(o,l,c)}}class Wc extends v{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function zw(s){return s.map(Ww).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ao(this.componentDef.inputs)}get outputs(){return ao(this.componentDef.outputs)}create(o,l,c,f){let g=(f=f||this.ngModule)instanceof qo?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new Rs(o,g):o,E=b.get(mt,null);if(null===E)throw new De(407,!1);const C=b.get(Rc,null),N=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",V=c?function Qy(s,o,l){return s.selectRootElement(o,l===Wt.ShadowDom)}(N,c,this.componentDef.encapsulation):Gf(E.createRenderer(null,this.componentDef),x,function Jo(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),Z=this.componentDef.onPush?288:272,ne=function gS(s,o){return{components:[],scheduler:s||f1,clean:UP,playerHandler:o||null,flags:0}}(),Ce=Yy(0,null,null,1,0,null,null,null,null,null),Pe=Jf(null,Ce,ne,Z,null,null,E,N,C,b,null);let Ke,et;wl(Pe);try{const bt=function xE(s,o,l,c,f,g){const b=l[1];l[22]=s;const C=dh(b,22,2,"#host",null),N=C.mergedAttrs=o.hostAttrs;null!==N&&($c(C,N,!0),null!==s&&(Po(f,s,N),null!==C.classes&&Vl(f,s,C.classes),null!==C.styles&&wy(f,s,C.styles)));const x=c.createRenderer(s,o),V=Jf(l,Zy(o),null,o.onPush?32:16,l[22],C,c,x,g||null,null,null);return b.firstCreatePass&&(Eu(rn(C,l),b,o.type),bE(b,C),ju(C,l.length,1)),im(l,V),l[22]=V}(V,this.componentDef,Pe,E,N);if(V)if(c)Po(N,V,["ng-version",Fl.full]);else{const{attrs:xe,classes:yt}=function qw(s){const o=[],l=[];let c=1,f=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===f?""!==g&&o.push(g,s[++c]):8===f&&l.push(g);else{if(!Yo(f))break;f=g}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);xe&&Po(N,V,xe),yt&&yt.length>0&&Vl(N,V,yt.join(" "))}if(et=Co(Ce,22),void 0!==l){const xe=et.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Qt=l[yt];xe.push(null!=Qt?Array.from(Qt):null)}}Ke=function ip(s,o,l,c,f){const g=l[1],b=function tS(s,o,l){const c=Dn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),DE(s,c,o,Gc(s,o,1,null),l),tm(s,c));const f=Lo(o,s,c.directiveStart,c);mi(f,o);const g=Yn(c,o);return g&&mi(g,o),f}(g,l,o);if(c.components.push(b),s[8]=b,null!==f)for(const C of f)C(b,o);if(o.contentQueries){const C=Dn();o.contentQueries(1,b,C.directiveStart)}const E=Dn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Es(E.index),yE(l[1],E,0,E.directiveStart,E.directiveEnd,o),iS(o,b)),b}(bt,this.componentDef,Pe,ne,[RE]),Jg(Ce,Pe,null)}finally{gu()}return new rp(this.componentType,Ke,ae(et,Pe),Pe,et)}}class rp extends class iy{}{constructor(o,l,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new ME(f),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[o])){const g=this._rootLView;OE(g[1],g,f,o,l),Xy(g,this._tNode.index)}}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function RE(){const s=Dn();Ad(Te()[1],s)}function rv(s){let o=function PE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let f;if(as(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);f=o.\u0275dir}if(f){if(l){c.push(f);const b=s;b.inputs=iv(s.inputs),b.declaredInputs=iv(s.declaredInputs),b.outputs=iv(s.outputs);const E=f.hostBindings;E&&bS(s,E);const C=f.viewQuery,N=f.contentQueries;if(C&&yS(s,C),N&&vS(s,N),de(s.inputs,f.inputs),de(s.declaredInputs,f.declaredInputs),de(s.outputs,f.outputs),as(f)&&f.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(s),E===rv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function _S(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=o+=f.hostVars,f.hostAttrs=bu(f.hostAttrs,l=bu(l,f.hostAttrs))}}(c)}function iv(s){return s===tr?{}:s===It?[]:s}function yS(s,o){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{o(c,f),l(c,f)}:o}function vS(s,o){const l=s.contentQueries;s.contentQueries=l?(c,f,g)=>{o(c,f,g),l(c,f,g)}:o}function bS(s,o){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{o(c,f),l(c,f)}:o}let hs=null;function lo(){if(!hs){const s=$e.Symbol;if(s&&s.iterator)hs=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(hs=c)}}}return hs}function zc(s){return!!hh(s)&&(Array.isArray(s)||!(s instanceof Map)&&lo()in s)}function hh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Wi(s,o,l){return s[o]=l}function Gr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Zc(s,o,l,c){const f=Gr(s,o,l);return Gr(s,o+1,c)||f}function ho(s,o,l,c){const f=Te();return Gr(f,Oo(),o)&&(Pt(),function qa(s,o,l,c,f,g){const b=Yn(s,o);nm(o[11],b,g,s.value,l,c,f)}(dn(),f,s,o,l,c)),ho}function Gu(s,o,l,c){return Gr(s,Oo(),l)?o+ve(l)+c:Mt}function UE(s,o,l,c,f,g,b,E){const C=Te(),N=Pt(),x=s+22,V=N.firstCreatePass?function lv(s,o,l,c,f,g,b,E,C){const N=o.consts,x=dh(o,s,4,b||null,ui(N,E));Xf(o,l,x,ui(N,C)),Ad(o,x);const V=x.tViews=Yy(2,x,c,f,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,N);return null!==o.queries&&(o.queries.template(o,x),V.queries=o.queries.embeddedTView(x)),x}(x,N,C,o,l,c,f,g,b):N.data[x];ci(V,!1);const Z=C[11].createComment("");Vc(N,C,Z,V),mi(Z,C),im(C,C[x]=tv(Z,C,Z,V)),Eo(V)&&Ky(N,C,V),null!=b&&em(C,V,E)}function jE(s){return function Zs(s,o){return s[o]}(function cu(){return nt.lFrame.contextLView}(),22+s)}function uv(s,o,l){const c=Te();return Gr(c,Oo(),o)&&Ms(Pt(),dn(),c,s,o,c[11],l,!1),uv}function cv(s,o,l,c,f){const b=f?"class":"style";OE(s,l,o.inputs[b],b,c)}function lm(s,o,l,c){const f=Te(),g=Pt(),b=22+s,E=f[11],C=f[b]=Gf(E,o,function _u(){return nt.lFrame.currentNamespace}()),N=g.firstCreatePass?function sp(s,o,l,c,f,g,b){const E=o.consts,N=dh(o,s,2,f,ui(E,g));return Xf(o,l,N,ui(E,b)),null!==N.attrs&&$c(N,N.attrs,!1),null!==N.mergedAttrs&&$c(N,N.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,N),N}(b,g,f,0,o,l,c):g.data[b];ci(N,!0);const x=N.mergedAttrs;null!==x&&Po(E,C,x);const V=N.classes;null!==V&&Vl(E,C,V);const Z=N.styles;return null!==Z&&wy(E,C,Z),64!=(64&N.flags)&&Vc(g,f,C,N),0===function dc(){return nt.lFrame.elementDepthCount}()&&mi(C,f),function lu(){nt.lFrame.elementDepthCount++}(),Eo(N)&&(Ky(g,f,N),function qy(s,o,l){if(hl(o)){const f=o.directiveEnd;for(let g=o.directiveStart;g<f;g++){const b=s.data[g];b.contentQueries&&b.contentQueries(1,l[g],g)}}}(g,N,f)),null!==c&&em(f,N),lm}function mh(){let s=Dn();vl()?ba():(s=s.parent,ci(s,!1));const o=s;!function To(){nt.lFrame.elementDepthCount--}();const l=Pt();return l.firstCreatePass&&(Ad(l,s),hl(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Md(s){return 0!=(16&s.flags)}(o)&&cv(l,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function pg(s){return 0!=(32&s.flags)}(o)&&cv(l,o,Te(),o.stylesWithoutHost,!1),mh}function dv(s,o,l,c){return lm(s,o,l,c),mh(),dv}function GE(){return Te()}function pv(s){return!!s&&"function"==typeof s.then}function $E(s){return!!s&&"function"==typeof s.subscribe}const WE=$E;function gv(s,o,l,c){const f=Te(),g=Pt(),b=Dn();return function qE(s,o,l,c,f,g,b,E){const C=Eo(c),x=s.firstCreatePass&&hS(s),V=o[8],Z=dS(o);let ne=!0;if(3&c.type||E){const Ke=Yn(c,o),et=E?E(Ke):Ke,bt=Z.length,xe=E?Qt=>E(Nn(Qt[c.index])):c.index;let yt=null;if(!E&&C&&(yt=function TS(s,o,l,c){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const b=f[g];if(b===l&&f[g+1]===c){const E=o[7],C=f[g+2];return E.length>C?E[C]:null}"string"==typeof b&&(g+=2)}return null}(s,o,f,c.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=g,yt.__ngLastListenerFn__=g,ne=!1;else{g=SS(c,o,V,g,!1);const Qt=l.listen(et,f,g);Z.push(g,Qt),x&&x.push(f,xe,bt,bt+1)}}else g=SS(c,o,V,g,!1);const Ce=c.outputs;let Pe;if(ne&&null!==Ce&&(Pe=Ce[f])){const Ke=Pe.length;if(Ke)for(let et=0;et<Ke;et+=2){const Rn=o[Pe[et]][Pe[et+1]].subscribe(g),sd=Z.length;Z.push(g,Rn),x&&x.push(f,c.index,sd,-(sd+1))}}}(g,f,f[11],b,s,o,0,c),gv}function KE(s,o,l,c){try{return!1!==l(c)}catch(f){return pS(s,f),!1}}function SS(s,o,l,c,f){return function g(b){if(b===Function)return c;sm(2&s.flags?pr(s.index,o):o);let C=KE(o,0,c,b),N=g.__ngNextListenerFn__;for(;N;)C=KE(o,0,N,b)&&C,N=N.__ngNextListenerFn__;return f&&!1===C&&(b.preventDefault(),b.returnValue=!1),C}}function NS(s=1){return function gc(s){return(nt.lFrame.contextLView=function mu(s,o){for(;s>0;)o=o[15],s--;return o}(s,nt.lFrame.contextLView))[8]}(s)}function ZE(s,o){let l=null;const c=function yi(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let f=0;f<o.length;f++){const g=o[f];if("*"!==g){if(null===c?Cy(s,g,!0):CP(c,g))return f}else l=f}return l}function mv(s){const o=Te()[16][6];if(!o.projection){const c=o.projection=Bo(s?s.length:1,null),f=c.slice();let g=o.child;for(;null!==g;){const b=s?ZE(g,s):0;null!==b&&(f[b]?f[b].projectionNext=g:c[b]=g,f[b]=g),g=g.next}}}function YE(s,o=0,l){const c=Te(),f=Pt(),g=dh(f,22+s,16,null,l||null);null===g.projection&&(g.projection=o),ba(),64!=(64&g.flags)&&function Hw(s,o,l){Gw(o[11],0,o,l,kw(s,l,o),by(l.parent||o[6],l,o))}(f,c,g)}function QE(s,o,l){return ed(s,"",o,"",l),QE}function ed(s,o,l,c,f){const g=Te(),b=Gu(g,o,l,c);return b!==Mt&&Ms(Pt(),dn(),g,s,b,g[11],f,!1),ed}function MS(s,o,l,c,f){const g=s[l+1],b=null===o;let E=c?bi(g):Qo(g),C=!1;for(;0!==E&&(!1===C||b);){const x=s[E+1];xS(s[E],o)&&(C=!0,s[E+1]=c?qg(x):Wg(x)),E=c?bi(x):Qo(x)}C&&(s[l+1]=c?Wg(g):qg(g))}function xS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ss(s,o)>=0}const Fr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sD(s){return s.substring(Fr.key,Fr.keyEnd)}function oD(s,o){const l=Fr.textEnd;return l===o?-1:(o=Fr.keyEnd=function FS(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Fr.key=o,l),_h(s,o,l))}function _h(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function yv(s,o,l){return Qa(s,o,l,!1),yv}function vv(s,o){return Qa(s,o,null,!0),vv}function US(s){!function Ja(s,o,l,c){const f=Pt(),g=Ri(2);f.firstUpdatePass&&dD(f,null,g,c);const b=Te();if(l!==Mt&&Gr(b,g,l)){const E=f.data[Qn()];if(pD(E,c)&&!cD(f,g)){let C=c?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(l=me(C,l||"")),cv(f,E,b,l,c)}else!function KP(s,o,l,c,f,g,b,E){f===Mt&&(f=It);let C=0,N=0,x=0<f.length?f[0]:null,V=0<g.length?g[0]:null;for(;null!==x||null!==V;){const Z=C<f.length?f[C+1]:void 0,ne=N<g.length?g[N+1]:void 0;let Pe,Ce=null;x===V?(C+=2,N+=2,Z!==ne&&(Ce=V,Pe=ne)):null===V||null!==x&&x<V?(C+=2,Ce=x):(N+=2,Ce=V,Pe=ne),null!==Ce&&GS(s,o,l,c,Ce,Pe,b,E),x=C<f.length?f[C]:null,V=N<g.length?g[N]:null}}(f,E,b,b[11],b[g+1],b[g+1]=function HS(s,o,l){if(null==l||""===l)return It;const c=[],f=Ba(l);if(Array.isArray(f))for(let g=0;g<f.length;g++)s(c,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&s(c,g,f[g]);else"string"==typeof f&&o(c,f);return c}(s,o,l),c,g)}}(Pr,Hl,s,!0)}function Hl(s,o){for(let l=function PS(s){return function lD(s){Fr.key=0,Fr.keyEnd=0,Fr.value=0,Fr.valueEnd=0,Fr.textEnd=s.length}(s),oD(s,_h(s,0,Fr.textEnd))}(o);l>=0;l=oD(o,l))Pr(s,sD(o),!0)}function Qa(s,o,l,c){const f=Te(),g=Pt(),b=Ri(2);g.firstUpdatePass&&dD(g,s,b,c),o!==Mt&&Gr(f,b,o)&&GS(g,g.data[Qn()],f,f[11],s,f[b+1]=function WS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(Ba(s)))),s}(o,l),c,b)}function cD(s,o){return o>=s.expandoStartIndex}function dD(s,o,l,c){const f=s.data;if(null===f[l+1]){const g=f[Qn()],b=cD(s,l);pD(g,c)&&null===o&&!b&&(o=!1),o=function jS(s,o,l,c){const f=function Ca(s){const o=nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===f)0===(c?o.classBindings:o.styleBindings)&&(l=um(l=hD(null,s,o,l,c),o.attrs,c),g=null);else{const b=o.directiveStylingLast;if(-1===b||s[b]!==f)if(l=hD(f,s,o,l,c),null===g){let C=function WP(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Qo(c))return s[bi(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=hD(null,s,o,C[1],c),C=um(C,o.attrs,c),function zP(s,o,l,c){s[bi(l?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function qP(s,o,l){let c;const f=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<f;g++)c=um(c,s[g].hostAttrs,l);return um(c,o.attrs,l)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),l}(f,g,o,c),function AS(s,o,l,c,f,g){let b=g?o.classBindings:o.styleBindings,E=bi(b),C=Qo(b);s[c]=l;let x,N=!1;if(Array.isArray(l)){const V=l;x=V[1],(null===x||Ss(V,x)>0)&&(N=!0)}else x=l;if(f)if(0!==C){const Z=bi(s[E+1]);s[c+1]=jc(Z,E),0!==Z&&(s[Z+1]=zg(s[Z+1],c)),s[E+1]=function Fy(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=jc(E,0),0!==E&&(s[E+1]=zg(s[E+1],c)),E=c;else s[c+1]=jc(C,0),0===E?E=c:s[C+1]=zg(s[C+1],c),C=c;N&&(s[c+1]=Wg(s[c+1])),MS(s,x,c,!0),MS(s,x,c,!1),function OS(s,o,l,c,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Ss(g,o)>=0&&(l[c+1]=qg(l[c+1]))}(o,x,s,c,g),b=jc(E,C),g?o.classBindings=b:o.styleBindings=b}(f,g,o,l,b,c)}}function hD(s,o,l,c,f){let g=null;const b=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<b&&(g=o[E],c=um(c,g.hostAttrs,f),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),c}function um(s,o,l){const c=l?1:2;let f=-1;if(null!==o)for(let g=0;g<o.length;g++){const b=o[g];"number"==typeof b?f=b:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Pr(s,b,!!l||o[++g]))}return void 0===s?null:s}function GS(s,o,l,c,f,g,b,E){if(!(3&o.type))return;const C=s.data,N=C[E+1];bv(function Zf(s){return 1==(1&s)}(N)?$S(C,o,l,f,Qo(N),b):void 0)||(bv(g)||function uh(s){return 2==(2&s)}(N)&&(g=$S(C,null,l,f,E,b)),function N1(s,o,l,c,f){if(o)f?s.addClass(l,c):s.removeClass(l,c);else{let g=-1===c.indexOf("-")?void 0:za.DashCase;null==f?s.removeStyle(l,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=za.Important),s.setStyle(l,c,f,g))}}(c,b,_l(Qn(),l),f,g))}function $S(s,o,l,c,f,g){const b=null===o;let E;for(;f>0;){const C=s[f],N=Array.isArray(C),x=N?C[1]:C,V=null===x;let Z=l[f+1];Z===Mt&&(Z=V?It:void 0);let ne=V?hi(Z,c):x===c?Z:void 0;if(N&&!bv(ne)&&(ne=hi(C,c)),bv(ne)&&(E=ne,b))return E;const Ce=s[f+1];f=b?bi(Ce):Qo(Ce)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=hi(C,c))}return E}function bv(s){return void 0!==s}function pD(s,o){return 0!=(s.flags&(o?16:32))}function zS(s,o=""){const l=Te(),c=Pt(),f=s+22,g=c.firstCreatePass?dh(c,f,1,o,null):c.data[f],b=l[f]=my(l[11],o);Vc(c,l,b,g),ci(g,!1)}function cm(s,o,l){const c=Te(),f=Gu(c,s,o,l);return f!==Mt&&function Ul(s,o,l){const c=_l(o,s);_y(s[11],c,l)}(c,Qn(),f),cm}function wv(s,o,l){const c=Te();return Gr(c,Oo(),o)&&Ms(Pt(),dn(),c,s,o,c[11],l,!0),wv}const td=void 0;var ZP=["en",[["a","p"],["AM","PM"],td],[["AM","PM"],td,td],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],td,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],td,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",td,"{1} 'at' {0}",td],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hN(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let op={};function Ev(s){const o=function YP(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=pN(o);if(l)return l;const c=o.split("-")[0];if(l=pN(c),l)return l;if("en"===c)return ZP;throw new De(701,!1)}function fN(s){return Ev(s)[Et.PluralCase]}function pN(s){return s in op||(op[s]=$e.ng&&$e.ng.common&&$e.ng.common.locales&&$e.ng.common.locales[s]),op[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const gN=["zero","one","two","few","many"],ap="en-US",hm={marker:"element"},fm={marker:"ICU"};var _r=(()=>((_r=_r||{})[_r.SHIFT=2]="SHIFT",_r[_r.APPEND_EAGERLY=1]="APPEND_EAGERLY",_r[_r.COMMENT=2]="COMMENT",_r))();let xD=ap;function _N(s){(function Bt(s,o){null==s&&qe(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(xD=s.toLowerCase().replace(/_/g,"-"))}function RD(s,o,l){const c=o.insertBeforeIndex,f=Array.isArray(c)?c[0]:c;return null===f?Uw(s,0,l):Nn(l[f])}function vN(s,o,l,c,f){const g=o.insertBeforeIndex;if(Array.isArray(g)){let b=c,E=null;if(3&o.type||(E=b,b=f),null!==b&&0==(2&o.flags))for(let C=1;C<g.length;C++)Lc(s,b,l[g[C]],E,!1)}}function bN(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const c=s[l];PD(c)||wN(c,o)&&null===JP(c)&&pm(c,o.index)}}function PD(s){return!(64&s.type)}function wN(s,o){return PD(o)||s.index>o.index}function JP(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function pm(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(T1(RD,vN),s.insertBeforeIndex=o)}function gm(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function Gl(s,o,l){const c=zy(s,l,64,null,null);return bN(o,c),c}function yh(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function $u(s){return s>>>17}function Cv(s){return(131070&s)>>>1}let mm=0,lp=0;function kD(s,o,l,c){const f=l[11];let b,g=null;for(let E=0;E<o.length;E++){const C=o[E];if("string"==typeof C){const N=o[++E];null===l[N]&&(l[N]=my(f,C))}else if("number"==typeof C)switch(1&C){case 0:const N=$u(C);let x,V;if(null===g&&(g=N,b=kg(f,c)),N===g?(x=c,V=b):(x=null,V=Nn(l[N])),null!==V){const Pe=Cv(C);Lc(f,V,l[Pe],x,!1);const et=gm(s,Pe);if(null!==et&&"object"==typeof et){const bt=yh(et,l);null!==bt&&kD(s,et.create[bt],l,l[et.anchorIdx])}}break;case 1:const ne=o[++E],Ce=o[++E];nm(f,_l(C>>>1,l),null,null,ne,Ce,null)}else switch(C){case fm:const N=o[++E],x=o[++E];null===l[x]&&mi(l[x]=v1(f,N),l);break;case hm:const V=o[++E],Z=o[++E];null===l[Z]&&mi(l[Z]=Gf(f,V,null),l)}}}function Iv(s,o,l,c,f){for(let g=0;g<l.length;g++){const b=l[g],E=l[++g];if(b&f){let C="";for(let N=g+1;N<=g+E;N++){const x=l[N];if("string"==typeof x)C+=x;else if("number"==typeof x)if(x<0)C+=ve(o[c-x]);else{const V=x>>>2;switch(3&x){case 1:const Z=l[++N],ne=l[++N],Ce=s.data[V];"string"==typeof Ce?nm(o[11],o[V],null,Ce,Z,C,ne):Ms(s,Ce,o,Z,C,o[11],ne,!1);break;case 0:const Pe=o[V];null!==Pe&&_y(o[11],Pe,C);break;case 2:IN(s,gm(s,V),o,C);break;case 3:FD(s,gm(s,V),c,o)}}}}else{const C=l[g+1];if(C>0&&3==(3&C)){const x=gm(s,C>>>2);o[x.currentCaseLViewIndex]<0&&FD(s,x,c,o)}}g+=E}}function FD(s,o,l,c){let f=c[o.currentCaseLViewIndex];if(null!==f){let g=mm;f<0&&(f=c[o.currentCaseLViewIndex]=~f,g=-1),Iv(s,c,o.update[f],l,g)}}function IN(s,o,l,c){const f=function zi(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const c=function mN(s,o){const l=fN(o)(parseInt(s,10)),c=gN[l];return void 0!==c?c:"other"}(o,function yN(){return xD}());l=s.cases.indexOf(c),-1===l&&"other"!==c&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,c);if(yh(o,l)!==f&&(bh(s,o,l),l[o.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const b=l[o.anchorIdx];b&&kD(s,o.create[f],l,b)}}function bh(s,o,l){let c=yh(o,l);if(null!==c){const f=o.remove[c];for(let g=0;g<f.length;g++){const b=f[g];if(b>0){const E=_l(b,l);null!==E&&jw(l[11],E)}else bh(s,gm(s,~b),l)}}}function TN(){const s=[];let l,c,o=-1;function g(E,C){o=0;const N=yh(E,C);c=null!==N?E.remove[N]:It}function b(){if(o<c.length){const E=c[o++];return E>0?l[E]:(s.push(o,c),g(l[1].data[~E],l),b())}return 0===s.length?null:(c=s.pop(),o=s.pop(),b())}return function f(E,C){for(l=C;s.length;)s.pop();return g(E.value,C),b}}const wh=/\ufffd(\d+):?\d*\ufffd/gi,BD=/\ufffd(\d+)\ufffd/,_m=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,UD=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,jD=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,rk=/\uE500/g;function NN(s,o,l,c,f,g,b){const E=Gc(s,c,1,null);let C=E<<_r.SHIFT,N=Ao();o===N&&(N=null),null===N&&(C|=_r.APPEND_EAGERLY),b&&(C|=_r.COMMENT,function m1(s){void 0===fy&&(fy=s())}(TN)),f.push(C,null===g?"":g);const x=zy(s,E,b?32:1,null===g?"":g,null);bN(l,x);const V=x.index;return ci(x,!1),null!==N&&o!==N&&function Dv(s,o){let l=s.insertBeforeIndex;null===l?(T1(RD,vN),l=s.insertBeforeIndex=[null,o]):(function we(s,o,l){s!=o&&qe(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(N,V),x}function sk(s,o,l,c,f,g,b){const E=b.match(wh),C=NN(s,o,l,g,c,E?null:b,!1);E&&Ps(f,b,C.index,null,0,null)}function Ps(s,o,l,c,f,g){const b=s.length,E=b+1;s.push(null,null);const C=b+2,N=o.split(wh);let x=0;for(let V=0;V<N.length;V++){const Z=N[V];if(1&V){const ne=f+parseInt(Z,10);s.push(-1-ne),x|=Eh(ne)}else""!==Z&&s.push(Z)}return s.push(l<<2|(c?1:0)),c&&s.push(c,g),s[b]=x,s[E]=s.length-C,x}function Eh(s){return 1<<Math.min(s,31)}function $D(s){let o,g,l="",c=0,f=!1;for(;null!==(o=UD.exec(s));)f?o[0]===`\ufffd/*${g}\ufffd`&&(c=o.index,f=!1):(l+=s.substring(c,o.index+o[0].length),g=o[1],f=!0);return l+=s.slice(c),l}function WD(s,o,l,c,f,g){let b=0;const E={type:f.type,currentCaseLViewIndex:Gc(s,o,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function ok(s,o,l){s.push(Eh(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,f,g),function EN(s,o,l){const c=s.data[o];null===c?s.data[o]=l:c.value=l}(s,g,E);const C=f.values;for(let N=0;N<C.length;N++){const x=C[N],V=[];for(let Z=0;Z<x.length;Z++){const ne=x[Z];if("string"!=typeof ne){const Ce=V.push(ne)-1;x[Z]=`\x3c!--\ufffd${Ce}\ufffd--\x3e`}}b=MN(s,E,o,l,c,f.cases[N],x.join(""),V)|b}b&&function ak(s,o,l){s.push(o,1,l<<2|3)}(l,b,g)}function ON(s){const o=[],l=[];let c=1,f=0;const g=vm(s=s.replace(_m,function(b,E,C){return c="select"===C?0:1,f=parseInt(E.slice(1),10),""}));for(let b=0;b<g.length;){let E=g[b++].trim();1===c&&(E=E.replace(/\s*(?:=)?(\w+)\s*/,"$1")),E.length&&o.push(E);const C=vm(g[b++]);o.length>l.length&&l.push(C)}return{type:c,mainBinding:f,cases:o,values:l}}function vm(s){if(!s)return[];let o=0;const l=[],c=[],f=/[{}]/g;let g;for(f.lastIndex=0;g=f.exec(s);){const E=g.index;if("}"==g[0]){if(l.pop(),0==l.length){const C=s.substring(o,E);_m.test(C)?c.push(ON(C)):c.push(C),o=E+1}}else{if(0==l.length){const C=s.substring(o,E);c.push(C),o=E+1}l.push("{")}}const b=s.substring(o);return c.push(b),c}function MN(s,o,l,c,f,g,b,E){const C=[],N=[],x=[];o.cases.push(g),o.create.push(C),o.remove.push(N),o.update.push(x);const Z=function z_(s){const o=new q_(s);return function bg(){try{return!!(new window.DOMParser).parseFromString(Au(""),"text/html")}catch{return!1}}()?new Ua(o):o}(function yg(){return void 0!==Ud?Ud:typeof document<"u"?document:void 0}()).getInertBodyElement(b),ne=function ja(s){return"content"in s&&function Zd(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(Z)||Z;return ne?Wu(s,o,l,c,C,N,x,ne,f,E,0):0}function Wu(s,o,l,c,f,g,b,E,C,N,x){let V=0,Z=E.firstChild;for(;Z;){const ne=Gc(s,l,1,null);switch(Z.nodeType){case Node.ELEMENT_NODE:const Ce=Z,Pe=Ce.tagName.toLowerCase();if(zd.hasOwnProperty(Pe)){bm(f,hm,Pe,C,ne),s.data[ne]=Pe;const xe=Ce.attributes;for(let yt=0;yt<xe.length;yt++){const Qt=xe.item(yt),Rn=Qt.name.toLowerCase();Qt.value.match(wh)?Kd.hasOwnProperty(Rn)&&Ps(b,Qt.value,ne,Qt.name,0,Mu[Rn]?zo:Ml[Rn]?Af:null):Xa(f,ne,Qt)}V=Wu(s,o,l,c,f,g,b,Z,ne,N,x+1)|V,xN(g,ne,x)}break;case Node.TEXT_NODE:const Ke=Z.textContent||"",et=Ke.match(wh);bm(f,null,et?"":Ke,C,ne),xN(g,ne,x),et&&(V=Ps(b,Ke,ne,null,0,null)|V);break;case Node.COMMENT_NODE:const bt=BD.exec(Z.textContent||"");if(bt){const yt=N[parseInt(bt[1],10)];bm(f,fm,"",C,ne),WD(s,l,c,C,yt,ne),zD(g,ne,x)}}Z=Z.nextSibling}return V}function xN(s,o,l){0===l&&s.push(o)}function zD(s,o,l){0===l&&(s.push(~o),s.push(o))}function bm(s,o,l,c,f){null!==o&&s.push(o),s.push(l,f,function XP(s,o,l){return s|o<<17|l<<1}(0,c,f))}function Xa(s,o,l){s.push(o<<1|1,l.name,l.value)}function kN(s,o,l=-1){const c=Pt(),f=Te(),g=22+s,b=ui(c.consts,o),E=Ao();c.firstCreatePass&&function ik(s,o,l,c,f,g){const b=Ao(),E=[],C=[],N=[[]];f=function AN(s,o){if(function ym(s){return-1===s}(o))return $D(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return $D(s.substring(l,c))}}(f,g);const x=function HD(s){return s.replace(rk," ")}(f).split(jD);for(let V=0;V<x.length;V++){let Z=x[V];if(0==(1&V)){const ne=vm(Z);for(let Ce=0;Ce<ne.length;Ce++){let Pe=ne[Ce];if(0==(1&Ce)){const Ke=Pe;""!==Ke&&sk(s,b,N[0],E,C,l,Ke)}else{const Ke=Pe;if("object"!=typeof Ke)throw new Error(`Unable to parse ICU expression in "${f}" message.`);WD(s,l,C,o,Ke,NN(s,b,N[0],l,E,"",!0).index)}}}else{const ne=47===Z.charCodeAt(0),Pe=(Z.charCodeAt(ne?1:0),22+Number.parseInt(Z.substring(ne?2:1)));if(ne)N.shift(),ci(Ao(),!1);else{const Ke=Gl(s,N[0],Pe);N.unshift([]),ci(Ke,!0)}}}s.data[c]={create:E,update:C}}(c,null===E?0:E.index,f,g,b,l);const C=c.data[g],x=Fw(c,E===f[6]?null:E,f);(function ek(s,o,l,c){const f=s[11];for(let g=0;g<o.length;g++){const b=o[g++],E=o[g],C=(b&_r.COMMENT)===_r.COMMENT,N=(b&_r.APPEND_EAGERLY)===_r.APPEND_EAGERLY,x=b>>>_r.SHIFT;let V=s[x];null===V&&(V=s[x]=C?f.createComment(E):my(f,E)),N&&null!==l&&Lc(f,l,V,c,!1)}})(f,C.create,x,E&&8&E.type?f[E.index]:null),Td(!0)}function qD(s,o,l){kN(s,o,l),function FN(){Td(!1)}()}function KD(s){return function vh(s){s&&(mm|=1<<Math.min(lp,31)),lp++}(Gr(Te(),Oo(),s)),KD}function VN(s){!function CN(s,o,l){if(lp>0){const c=s.data[l];Iv(s,o,Array.isArray(c)?c:c.update,function xi(){return nt.lFrame.bindingIndex}()-lp-1,mm)}mm=0,lp=0}(Pt(),Te(),s+22)}function Nv(s,o,l,c,f){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)Nv(s[g],o,l,c,f);else{const g=Pt(),b=Te();let E=gi(s)?s:J(s.provide),C=$a(s);const N=Dn(),x=1048575&N.providerIndexes,V=N.directiveStart,Z=N.providerIndexes>>20;if(gi(s)||!s.multi){const ne=new Ta(C,f,ah),Ce=Av(E,o,f?x:x+Z,V);-1===Ce?(Eu(rn(N,b),g,E),ZD(g,s,o.length),o.push(E),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),l.push(ne),b.push(ne)):(l[Ce]=ne,b[Ce]=ne)}else{const ne=Av(E,o,x+Z,V),Ce=Av(E,o,x,x+Z),Pe=ne>=0&&l[ne],Ke=Ce>=0&&l[Ce];if(f&&!Ke||!f&&!Pe){Eu(rn(N,b),g,E);const et=function vk(s,o,l,c,f){const g=new Ta(s,l,ah);return g.multi=[],g.index=o,g.componentProviders=0,BN(g,f,c&&!l),g}(f?yk:_k,l.length,f,c,C);!f&&Ke&&(l[Ce].providerFactory=et),ZD(g,s,o.length,0),o.push(E),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),l.push(et),b.push(et)}else ZD(g,s,ne>-1?ne:Ce,BN(l[f?Ce:ne],C,!f&&c));!f&&c&&Ke&&l[Ce].componentProviders++}}}function ZD(s,o,l,c){const f=gi(o),g=function Fu(s){return!!s.useClass}(o);if(f||g){const C=(g?J(o.useClass):o).prototype.ngOnDestroy;if(C){const N=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const x=N.indexOf(l);-1===x?N.push(l,[c,C]):N[x+1].push(c,C)}else N.push(l,C)}}}function BN(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Av(s,o,l,c){for(let f=l;f<c;f++)if(o[f]===s)return f;return-1}function _k(s,o,l,c){return YD(this.multi,[])}function yk(s,o,l,c){const f=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Lo(l,l[1],this.providerFactory.index,c);g=E.slice(0,b),YD(f,g);for(let C=b;C<E.length;C++)g.push(E[C])}else g=[],YD(f,g);return g}function YD(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function UN(s,o=[]){return l=>{l.providersResolver=(c,f)=>function mk(s,o,l){const c=Pt();if(c.firstCreatePass){const f=as(s);Nv(l,c.data,c.blueprint,f,!0),Nv(o,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,o)}}class Dh{}class jN{}function bk(s,o){return new Tr(s,o??null)}class Tr extends Dh{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $i(this);const c=wr(o);this._bootstrapComponents=Wa(c.bootstrap),this._r3Injector=My(o,l,[{provide:Dh,useValue:this},{provide:R,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class QD extends jN{constructor(o){super(),this.moduleType=o}create(o){return new Tr(this.moduleType,o)}}class wk extends Dh{constructor(o,l,c){super(),this.componentFactoryResolver=new $i(this),this.instance=null;const f=new Xd([...o,{provide:Dh,useValue:this},{provide:R,useValue:this.componentFactoryResolver}],l||kr(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function JD(s,o,l=null){return new wk(s,o,l).injector}function Mv(s,o,l,c){return function JN(s,o,l,c,f,g){const b=o+l;return Gr(s,b,f)?Wi(s,b+1,g?c.call(g,f):c(f)):Dm(s,b+1)}(Te(),ir(),s,o,l,c)}function xv(s,o,l,c,f){return function XN(s,o,l,c,f,g,b){const E=o+l;return Zc(s,E,f,g)?Wi(s,E+2,b?c.call(b,f,g):c(f,g)):Dm(s,E+2)}(Te(),ir(),s,o,l,c,f)}function sC(s,o,l,c,f,g){return function eA(s,o,l,c,f,g,b,E){const C=o+l;return function uo(s,o,l,c,f){const g=Zc(s,o,l,c);return Gr(s,o+2,f)||g}(s,C,f,g,b)?Wi(s,C+3,E?c.call(E,f,g,b):c(f,g,b)):Dm(s,C+3)}(Te(),ir(),s,o,l,c,f,g)}function Dm(s,o){const l=s[o];return l===Mt?void 0:l}function oC(s){return o=>{setTimeout(s,void 0,o)}}const $l=class Fk extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let f=o,g=l||(()=>null),b=c;if(o&&"object"==typeof o){const C=o;f=C.next?.bind(C),g=C.error?.bind(C),b=C.complete?.bind(C)}this.__isAsync&&(g=oC(g),f&&(f=oC(f)),b&&(b=oC(b)));const E=super.subscribe({next:f,error:g,complete:b});return o instanceof te.w0&&o.add(E),E}};function Lk(){return this._results[lo()]()}class aC{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=lo(),c=aC.prototype;c[l]||(c[l]=Lk)}get changes(){return this._changes||(this._changes=new $l)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const f=Cr(o);(this._changesDetected=!function Is(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],g=o[c];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ch=(()=>{class s{}return s.__NG_ELEMENT_ID__=Gn,s})();const Vk=Ch,ea=class extends Vk{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tViews,f=Jf(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(c)),Jg(c,f,o),new ep(f)}};function Gn(){return Ih(Dn(),Te())}function Ih(s,o){return 4&s.type?new ea(o,s,ae(s,o)):null}let cp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Rv,s})();function Rv(){return Th(Dn(),Te())}const iA=cp,lC=class extends iA{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return ae(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){const o=wu(this._hostTNode,this._hostLView);if(vf(o)){const l=Js(o,this._hostLView),c=El(o);return new us(l[1].data[c+8],l)}return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Im(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const b=o.createEmbeddedView(l||{},g);return this.insert(b,f),b}createComponent(o,l,c,f,g){const b=o&&!function Fi(s){return"function"==typeof s}(o);let E;if(b)E=l;else{const V=l||{};E=V.index,c=V.injector,f=V.projectableNodes,g=V.environmentInjector||V.ngModuleRef}const C=b?o:new Wc(xt(o)),N=c||this.parentInjector;if(!g&&null==C.ngModule){const Z=(b?N:this.parentInjector).get(qo,null);Z&&(g=Z)}const x=C.create(N,f,void 0,g);return this.insert(x.hostView,E),x}insert(o,l){const c=o._lView,f=c[1];if(function ma(s){return Jr(s[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const V=c[3],Z=new lC(V,V[6],V[3]);Z.detach(Z.indexOf(o))}}const g=this._adjustIndex(l),b=this._lContainer;!function D1(s,o,l,c){const f=10+c,g=l.length;c>0&&(l[f-1][4]=o),c<g-10?(o[4]=l[f],Pa(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const b=o[17];null!==b&&l!==b&&function C1(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(b,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(f,c,b,g);const E=Bc(g,b),C=c[11],N=kg(C,b[7]);return null!==N&&function w1(s,o,l,c,f,g){c[0]=f,c[6]=o,zf(s,c,l,1,f,g)}(f,b[6],C,c,N,E),o.attachToViewContainerRef(),Pa(uC(b),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Im(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=yy(this._lContainer,l);c&&(Cl(uC(this._lContainer),l),Rw(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=yy(this._lContainer,l);return c&&null!=Cl(uC(this._lContainer),l)?new ep(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function Im(s){return s[8]}function uC(s){return s[8]||(s[8]=[])}function Th(s,o){let l;const c=o[s.index];if(Jr(c))l=c;else{let f;if(8&s.type)f=Nn(c);else{const g=o[11];f=g.createComment("");const b=Yn(s,o);Lc(g,kg(g,b),f,function Bw(s,o){return s.nextSibling(o)}(g,b),!1)}o[s.index]=l=tv(c,o,f,s),im(o,l)}return new lC(l,s,o)}class Pv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Pv(this.queryList)}setDirty(){this.queryList.setDirty()}}class kv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,f=[];for(let g=0;g<c;g++){const b=l.getByIndex(g);f.push(this.queries[b.indexInDeclarationView].clone())}return new kv(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==dA(o,l).matches&&this.queries[l].setDirty()}}class dC{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class zu{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(o,f);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new zu(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Wl{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Wl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(o,l,dp(l,g)),this.matchTNodeWithReadOption(o,l,Na(l,o,g,!1,!1))}else c===Ch?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Na(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Le||f===cp||f===Ch&&4&l.type)this.addMatch(l.index,-2);else{const g=Na(l,o,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function dp(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function hC(s,o,l,c){return-1===l?function Sm(s,o){return 11&s.type?ae(s,o):4&s.type?Ih(s,o):null}(o,s):-2===l?function Nm(s,o,l){return l===Le?ae(o,s):l===Ch?Ih(o,s):l===cp?Th(o,s):void 0}(s,o,c):Lo(s,s[1],l,o)}function qu(s,o,l,c){const f=o[19].queries[c];if(null===f.matches){const g=s.data,b=l.matches,E=[];for(let C=0;C<b.length;C+=2){const N=b[C];E.push(N<0?null:hC(o,g[N],b[C+1],l.metadata.read))}f.matches=E}return f.matches}function Am(s,o,l,c){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const b=qu(s,o,f,l);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)c.push(b[E/2]);else{const N=g[E+1],x=o[-C];for(let V=10;V<x.length;V++){const Z=x[V];Z[17]===Z[3]&&Am(Z[1],Z,N,c)}if(null!==x[9]){const V=x[9];for(let Z=0;Z<V.length;Z++){const ne=V[Z];Am(ne[1],ne,N,c)}}}}}return c}function sA(s){const o=Te(),l=Pt(),c=du();bl(c+1);const f=dA(l,c);if(s.dirty&&Io(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Am(l,o,c,[]):qu(l,o,f,c);s.reset(g,Xe),s.notifyOnChanges()}return!0}return!1}function oA(s,o,l){const c=Pt();c.firstCreatePass&&(cA(c,new dC(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),uA(c,Te(),o)}function aA(s,o,l,c){const f=Pt();if(f.firstCreatePass){const g=Dn();cA(f,new dC(o,l,c),g.index),function jk(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}uA(f,Te(),l)}function lA(){return function Uk(s,o){return s[19].queries[o].queryList}(Te(),du())}function uA(s,o,l){const c=new aC(4==(4&l));gE(s,o,c,c.destroy),null===o[19]&&(o[19]=new kv),o[19].queries.push(new Pv(c))}function cA(s,o,l){null===s.queries&&(s.queries=new zu),s.queries.track(new Wl(o,l))}function dA(s,o){return s.queries.getByIndex(o)}function hA(s,o){return Ih(s,o)}function fo(s){const o=xt(s)||yn(s)||Kn(s);return null!==o&&o.standalone}function Zv(...s){}const DA=new zt("Application Initializer");let Yv=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Zv,this.reject=Zv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(pv(g))l.push(g);else if(WE(g)){const b=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});l.push(b)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(On(DA,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Qv=new zt("AppId",{providedIn:"root",factory:function CA(){return`${xm()}${xm()}${xm()}`}});function xm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const IA=new zt("Platform Initializer"),Xk=new zt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),TA=new zt("appBootstrapListener");let tF=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Rm=new zt("LocaleId",{providedIn:"root",factory:()=>Bd(Rm,_t.Optional|_t.SkipSelf)||function nF(){return typeof $localize<"u"&&$localize.locale||ap}()}),rF=new zt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class iF{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let sF=(()=>{class s{compileModuleSync(l){return new QD(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=Wa(wr(l).declarations).reduce((b,E)=>{const C=xt(E);return C&&b.push(new Wc(C)),b},[]);return new iF(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const SC=(()=>Promise.resolve(0))();function NC(s){typeof Zone>"u"?SC.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class po{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $l(!1),this.onMicrotaskEmpty=new $l(!1),this.onStable=new $l(!1),this.onError=new $l(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function aF(){let s=$e.requestAnimationFrame,o=$e.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function cF(s){const o=()=>{!function uF(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($e,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,AC(s),s.isCheckStableRunning=!0,Jv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),AC(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,g,b,E)=>{try{return OA(s),l.invokeTask(f,g,b,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Xv(s)}},onInvoke:(l,c,f,g,b,E,C)=>{try{return OA(s),l.invoke(f,g,b,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Xv(s)}},onHasTask:(l,c,f,g)=>{l.hasTask(f,g),c===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,AC(s),Jv(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!po.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(po.isInAngularZone())throw new De(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,f){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+f,o,lF,Zv,Zv);try{return g.runTask(b,l,c)}finally{g.cancelTask(b)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const lF={};function Jv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function AC(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function OA(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Xv(s){s._nesting--,Jv(s)}class dF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $l,this.onMicrotaskEmpty=new $l,this.onStable=new $l,this.onError=new $l}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,f){return o.apply(l,c)}}const MA=new zt(""),xA=new zt("");let OC,hF=(()=>{class s{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,OC||(function fF(s){OC=s}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{po.assertNotInAngularZone(),NC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())NC(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(On(po),On(RA),On(xA))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),RA=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return OC?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),rd=null;const e0=new zt("AllowMultipleToken"),t0=new zt("PlatformDestroyListeners");class n0{constructor(o,l){this.name=o,this.token=l}}function r0(s,o,l=[]){const c=`Platform: ${o}`,f=new zt(c);return(g=[])=>{let b=Fm();if(!b||b.injector.get(e0,!1)){const E=[...l,...g,{provide:f,useValue:!0}];s?s(E):function Pm(s){if(rd&&!rd.get(e0,!1))throw new De(400,!1);rd=s;const o=s.get(fp);(function MC(s){const o=s.get(IA,null);o&&o.forEach(l=>l())})(s)}(function km(s=[],o){return Bl.create({name:o,providers:[{provide:Pl,useValue:"platform"},{provide:t0,useValue:new Set([()=>rd=null])},...s]})}(E,c))}return function xC(s){const o=Fm();if(!o)throw new De(401,!1);return o}()}}function Fm(){return rd?.get(fp)??null}let fp=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function gF(s,o){let l;return l="noop"===s?new dF:("zone.js"===s?void 0:s)||new po(o),l}(c?.ngZone,function RC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:po,useValue:f}];return f.run(()=>{const b=Bl.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(b),C=E.injector.get(rh,null);if(!C)throw new De(402,!1);return f.runOutsideAngular(()=>{const N=f.onError.subscribe({next:x=>{C.handleError(x)}});E.onDestroy(()=>{o0(this._modules,E),N.unsubscribe()})}),function PC(s,o,l){try{const c=l();return pv(c)?c.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,f,()=>{const N=E.injector.get(Yv);return N.runInitializers(),N.donePromise.then(()=>(_N(E.injector.get(Rm,ap)||ap),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,c=[]){const f=Lm({},c);return function PA(s,o,l){const c=new QD(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const c=l.injector.get(s0);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new De(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(t0,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(On(Bl))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Lm(s,o){return Array.isArray(o)?o.reduce(Lm,s):{...s,...o}}let s0=(()=>{class s{constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),b=new k.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{po.assertNotInAngularZone(),NC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{po.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),N.unsubscribe()}});this.isStable=(0,le.T)(g,b.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const f=l instanceof v;if(!this._injector.get(Yv).done)throw!f&&fo(l),new De(405,false);let b;b=f?l:this._injector.get(R).resolveComponentFactory(l),this.componentTypes.push(b.componentType);const E=function qi(s){return s.isBoundToModule}(b)?void 0:this._injector.get(Dh),N=b.create(Bl.NULL,[],c||b.selector,E),x=N.location.nativeElement,V=N.injector.get(MA,null);return V?.registerApplication(x),N.onDestroy(()=>{this.detachView(N.hostView),o0(this.components,N),V?.unregisterApplication(x)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;o0(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(TA,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>o0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new De(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(On(po),On(qo),On(rh))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function o0(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let VA=!0,BA=!1;function mF(){return BA=!0,VA}function _F(){if(BA)throw new Error("Cannot enable prod mode after platform setup.");VA=!1}let yF=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ee,s})();function Ee(s){return function ta(s,o,l){if(fl(s)&&!l){const c=pr(s.index,o);return new ep(c,c)}return 47&s.type?new ep(o[16],o):null}(Dn(),Te(),16==(16&s))}class pp{constructor(){}supports(o){return zc(o)}create(o){return new h0(o)}}const d0=(s,o)=>o;class h0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||d0}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,f=0,g=null;for(;l||c;){const b=!c||l&&l.currentIndex<BC(c,f,g)?l:c,E=BC(b,f,g),C=b.currentIndex;if(b===c)f--,c=c._nextRemoved;else if(l=l._next,null==b.previousIndex)f++;else{g||(g=[]);const N=E-f,x=C-f;if(N!=x){for(let Z=0;Z<N;Z++){const ne=Z<g.length?g[Z]:g[Z]=0,Ce=ne+Z;x<=Ce&&Ce<N&&(g[Z]=ne+1)}g[b.previousIndex]=x-N}}E!==C&&o(b,E,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!zc(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,g,b,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],b=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,b)?(c&&(l=this._verifyReinsertion(l,g,b,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,b,E),c=!0),l=l._next}else f=0,function qc(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[lo()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,E=>{b=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,b)?(c&&(l=this._verifyReinsertion(l,E,b,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,b,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,f){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,f)):o=this._addAfter(new WA(l,c),g,f),o}_verifyReinsertion(o,l,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,g=o._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const f=null===l?this._itHead:l._next;return o._next=f,o._prev=l,null===f?this._itTail=o:f._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new VC),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class WA{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class VC{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new zA,this.map.set(l,c)),c.add(o)}get(o,l){const f=this.map.get(o);return f?f.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BC(s,o,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+o+f}class UC{constructor(){}supports(o){return o instanceof Map||hh(o)}create(){return new gp}}class gp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||hh(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,l);const g=f._prev,b=f._next;return g&&(g._next=b),b&&(b._prev=g),f._next=null,f._prev=null,f}const c=new jC(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class jC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mp(){return new Hm([new pp])}let Hm=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||mp()),deps:[[s,new dt,new Se]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new De(901,!1)}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:mp}),s})();function HC(){return new f0([new UC])}let f0=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||HC()),deps:[[s,new dt,new Se]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new De(901,!1)}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:HC}),s})();const p0=r0(null,"core",[]);let WC=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(On(s0))},s.\u0275mod=ft({type:s}),s.\u0275inj=Zt({}),s})();function _p(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function QA(s,o){const l=xt(s),c=o.elementInjector||kr();return new Wc(l).create(c,o.projectableNodes,o.hostElement,o.environmentInjector)}},3942:(ct,Ne,F)=>{F.d(Ne,{Z:()=>De});var d=F(2090),te=F(4859),k=F(9681),le=F(1877);class se{constructor(ve,_e){this._delegate=ve,this.firebase=_e,(0,k._addComponent)(ve,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ve,_e=k._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(ve);return!at.isInitialized()&&"EXPLICIT"===(null===(Je=at.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&at.initialize(),at.getImmediate({identifier:_e})}_removeServiceInstance(ve,_e=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(_e)}_addComponent(ve){(0,k._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,k._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function me(){const it=function fe(it){const ve={},_e={__esModule:!0,initializeApp:function Me(je,W={}){const we=k.initializeApp(je,W);if((0,d.r3)(ve,we.name))return ve[we.name];const Q=new it(we,_e);return ve[we.name]=Q,Q},app:at,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const W=je.name,we=W.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const Q=(ie=at())=>{if("function"!=typeof ie[we])throw de.create("invalid-app-argument",{appName:W});return ie[we]()};void 0!==je.serviceProps&&(0,d.ZB)(Q,je.serviceProps),_e[we]=Q,it.prototype[we]=function(...ie){return this._getService.bind(this,W).apply(this,je.multipleInstances?ie:[])}}return"PUBLIC"===je.type?_e[we]:null},removeApp:function Je(je){delete ve[je]},useAsService:function Ue(je,W){return"serverAuth"===W?null:W},modularAPIs:k}};function at(je){if(!(0,d.r3)(ve,je=je||k._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:je});return ve[je]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function be(){return Object.keys(ve).map(je=>ve[je])}}),at.App=it,_e}(se);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ve(_e){(0,d.ZB)(it,_e)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),it}(),$=new le.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=G;!function Oe(it){(0,k.registerVersion)("@firebase/app-compat","0.1.30",it)}()},9681:(ct,Ne,F)=>{F.r(Ne),F.d(Ne,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>is,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>un,_addOrOverwriteComponent:()=>Xt,_apps:()=>on,_clearComponents:()=>rs,_components:()=>kn,_getProvider:()=>Zt,_registerComponent:()=>Vr,_removeServiceInstance:()=>Ut,deleteApp:()=>_t,getApp:()=>Zr,getApps:()=>Ai,initializeApp:()=>Hs,onLog:()=>wn,registerVersion:()=>Fn,setLogLevel:()=>ss});var d=F(5861),te=F(4859),k=F(1877),le=F(2090),se=F(8766);class pe{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function de(U){return"VERSION"===U.getComponent()?.type}(K)){const Ae=K.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(K=>K).join(" ")}}const fe="@firebase/app",G=new k.Yd("@firebase/app"),Bt="[DEFAULT]",qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,kn=new Map;function un(U,q){try{U.container.addComponent(q)}catch(K){G.debug(`Component ${q.name} failed to register with FirebaseApp ${U.name}`,K)}}function Xt(U,q){U.container.addOrOverwriteComponent(q)}function Vr(U){const q=U.name;if(kn.has(q))return G.debug(`There were multiple attempts to register component ${q}.`),!1;kn.set(q,U);for(const K of on.values())un(K,U);return!0}function Zt(U,q){const K=U.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),U.container.getProvider(q)}function Ut(U,q,K=Bt){Zt(U,q).clearInstance(K)}function rs(){kn.clear()}const Or=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Kr{constructor(q,K,Ae){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}const is="9.9.1";function Hs(U,q={}){"object"!=typeof q&&(q={name:q});const K=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},q),Ae=K.name;if("string"!=typeof Ae||!Ae)throw Or.create("bad-app-name",{appName:String(Ae)});const We=on.get(Ae);if(We){if((0,le.vZ)(U,We.options)&&(0,le.vZ)(K,We.config))return We;throw Or.create("duplicate-app",{appName:Ae})}const ft=new te.H0(Ae);for(const Yt of kn.values())ft.addComponent(Yt);const fn=new Kr(U,K,ft);return on.set(Ae,fn),fn}function Zr(U=Bt){const q=on.get(U);if(!q)throw Or.create("no-app",{appName:U});return q}function Ai(){return Array.from(on.values())}function _t(U){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*(U){const q=U.name;on.has(q)&&(on.delete(q),yield Promise.all(U.container.getProviders().map(K=>K.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Fn(U,q,K){var Ae;let We=null!==(Ae=qe[U])&&void 0!==Ae?Ae:U;K&&(We+=`-${K}`);const ft=We.match(/\s|\//),fn=q.match(/\s|\//);if(ft||fn){const Yt=[`Unable to register library "${We}" with version "${q}":`];return ft&&Yt.push(`library name "${We}" contains illegal characters (whitespace or "/")`),ft&&fn&&Yt.push("and"),fn&&Yt.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void G.warn(Yt.join(" "))}Vr(new te.wA(`${We}-version`,()=>({library:We,version:q}),"VERSION"))}function wn(U,q){if(null!==U&&"function"!=typeof U)throw Or.create("invalid-log-argument");(0,k.Am)(U,q)}function ss(U){(0,k.Ub)(U)}const qn="firebase-heartbeat-store";let ii=null;function bo(){return ii||(ii=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(U,q)=>{0===q&&U.createObjectStore(qn)}}).catch(U=>{throw Or.create("storage-open",{originalErrorMessage:U.message})})),ii}function $e(){return($e=(0,d.Z)(function*(U){var q;try{return(yield bo()).transaction(qn).objectStore(qn).get(tr(U))}catch(K){throw Or.create("storage-get",{originalErrorMessage:null===(q=K)||void 0===q?void 0:q.message})}})).apply(this,arguments)}function Dt(U,q){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(U,q){var K;try{const We=(yield bo()).transaction(qn,"readwrite");return yield We.objectStore(qn).put(q,tr(U)),We.done}catch(Ae){throw Or.create("storage-set",{originalErrorMessage:null===(K=Ae)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function tr(U){return`${U.name}!${U.options.appId}`}class nr{constructor(q){this.container=q,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Qr(K),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var q=this;return(0,d.Z)(function*(){const Ae=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=Oi();if(null===q._heartbeatsCache&&(q._heartbeatsCache=yield q._heartbeatsCachePromise),q._heartbeatsCache.lastSentHeartbeatDate!==We&&!q._heartbeatsCache.heartbeats.some(ft=>ft.date===We))return q._heartbeatsCache.heartbeats.push({date:We,agent:Ae}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(ft=>{const fn=new Date(ft.date).valueOf();return Date.now()-fn<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,d.Z)(function*(){if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null===q._heartbeatsCache||0===q._heartbeatsCache.heartbeats.length)return"";const K=Oi(),{heartbeatsToSend:Ae,unsentEntries:We}=function nn(U,q=1024){const K=[];let Ae=U.slice();for(const We of U){const ft=K.find(fn=>fn.agent===We.agent);if(ft){if(ft.dates.push(We.date),j(K)>q){ft.dates.pop();break}}else if(K.push({agent:We.agent,dates:[We.date]}),j(K)>q){K.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ae}}(q._heartbeatsCache.heartbeats),ft=(0,le.L)(JSON.stringify({version:2,heartbeats:Ae}));return q._heartbeatsCache.lastSentHeartbeatDate=K,We.length>0?(q._heartbeatsCache.heartbeats=We,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),ft})()}}function Oi(){return(new Date).toISOString().substring(0,10)}class Qr{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,d.Z)(function*(){return(yield q._canUseIndexedDBPromise)&&(yield function Wt(U){return $e.apply(this,arguments)}(q.app))||{heartbeats:[]}})()}overwrite(q){var K=this;return(0,d.Z)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const ft=yield K.read();return Dt(K.app,{lastSentHeartbeatDate:null!==(Ae=q.lastSentHeartbeatDate)&&void 0!==Ae?Ae:ft.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var K=this;return(0,d.Z)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const ft=yield K.read();return Dt(K.app,{lastSentHeartbeatDate:null!==(Ae=q.lastSentHeartbeatDate)&&void 0!==Ae?Ae:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...q.heartbeats]})}})()}}function j(U){return(0,le.L)(JSON.stringify({version:2,heartbeats:U})).length}!function z(U){Vr(new te.wA("platform-logger",q=>new pe(q),"PRIVATE")),Vr(new te.wA("heartbeat",q=>new nr(q),"PRIVATE")),Fn(fe,"0.7.29",U),Fn(fe,"0.7.29","esm2017"),Fn("fire-js","")}("")},4859:(ct,Ne,F)=>{F.d(Ne,{H0:()=>fe,wA:()=>k,zt:()=>se});var d=F(5861),te=F(2090);class k{constructor(G,$,J){this.name=G,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const le="[DEFAULT]";class se{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const J=new te.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:$});Be&&J.resolve(Be)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const J=this.normalizeInstanceIdentifier(G?.identifier),Be=null!==($=G?.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Oe){if(Be)return null;throw Oe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function de(me){return"EAGER"===me.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[$,J]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier($);try{const Oe=this.getOrInitializeService({instanceIdentifier:Be});J.resolve(Oe)}catch{}}}}clearInstance(G=le){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=le){return this.instances.has(G)}getOptions(G=le){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,J=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[Oe,De]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Oe)&&De.resolve(Be);return Be}onInit(G,$){var J;const Be=this.normalizeInstanceIdentifier($),Oe=null!==(J=this.onInitCallbacks.get(Be))&&void 0!==J?J:new Set;Oe.add(G),this.onInitCallbacks.set(Be,Oe);const De=this.instances.get(Be);return De&&G(De,Be),()=>{Oe.delete(G)}}invokeOnInitCallbacks(G,$){const J=this.onInitCallbacks.get($);if(J)for(const Be of J)try{Be(G,$)}catch{}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let J=this.instances.get(G);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(me=G,me===le?void 0:me),options:$}),this.instances.set(G,J),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(J,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,J)}catch{}var me;return J||null}normalizeInstanceIdentifier(G=le){return this.component?this.component.multipleInstances?G:le:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new se(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Ne,F)=>{F.d(Ne,{Am:()=>me,Ub:()=>fe,Yd:()=>de,in:()=>te});const d=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const k={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},pe=(G,$,...J)=>{if($<G.logLevel)return;const Be=(new Date).toISOString(),Oe=se[$];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Oe](`[${Be}]  ${G.name}:`,...J)};class de{constructor($){this.name=$,this._logLevel=le,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in te))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...$),this._logHandler(this,te.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...$),this._logHandler(this,te.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,te.INFO,...$),this._logHandler(this,te.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,te.WARN,...$),this._logHandler(this,te.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...$),this._logHandler(this,te.ERROR,...$)}}function fe(G){d.forEach($=>{$.setLogLevel(G)})}function me(G,$){for(const J of d){let Be=null;$&&$.level&&(Be=k[$.level]),J.userLogHandler=null===G?null:(Oe,De,...it)=>{const ve=it.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");De>=(Be??Oe.logLevel)&&G({level:te[De].toLowerCase(),message:ve,args:it,type:Oe.name})}}}},8766:(ct,Ne,F)=>{F.d(Ne,{Lj:()=>Me,X3:()=>at});var d=F(5861);let k,le;const de=new WeakMap,fe=new WeakMap,me=new WeakMap,G=new WeakMap,$=new WeakMap;let Oe={get(W,we,Q){if(W instanceof IDBTransaction){if("done"===we)return fe.get(W);if("objectStoreNames"===we)return W.objectStoreNames||me.get(W);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return _e(W[we])},set:(W,we,Q)=>(W[we]=Q,!0),has:(W,we)=>W instanceof IDBTransaction&&("done"===we||"store"===we)||we in W};function ve(W){return"function"==typeof W?function it(W){return W!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(W)?function(...we){return W.apply(Je(this),we),_e(de.get(this))}:function(...we){return _e(W.apply(Je(this),we))}:function(we,...Q){const ie=W.call(Je(this),we,...Q);return me.set(ie,we.sort?we.sort():[we]),_e(ie)}}(W):(W instanceof IDBTransaction&&function Be(W){if(fe.has(W))return;const we=new Promise((Q,ie)=>{const re=()=>{W.removeEventListener("complete",ye),W.removeEventListener("error",ce),W.removeEventListener("abort",ce)},ye=()=>{Q(),re()},ce=()=>{ie(W.error||new DOMException("AbortError","AbortError")),re()};W.addEventListener("complete",ye),W.addEventListener("error",ce),W.addEventListener("abort",ce)});fe.set(W,we)}(W),((W,we)=>we.some(Q=>W instanceof Q))(W,function se(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(W,Oe):W)}function _e(W){if(W instanceof IDBRequest)return function J(W){const we=new Promise((Q,ie)=>{const re=()=>{W.removeEventListener("success",ye),W.removeEventListener("error",ce)},ye=()=>{Q(_e(W.result)),re()},ce=()=>{ie(W.error),re()};W.addEventListener("success",ye),W.addEventListener("error",ce)});return we.then(Q=>{Q instanceof IDBCursor&&de.set(Q,W)}).catch(()=>{}),$.set(we,W),we}(W);if(G.has(W))return G.get(W);const we=ve(W);return we!==W&&(G.set(W,we),$.set(we,W)),we}const Je=W=>$.get(W);function at(W,we,{blocked:Q,upgrade:ie,blocking:re,terminated:ye}={}){const ce=indexedDB.open(W,we),ke=_e(ce);return ie&&ce.addEventListener("upgradeneeded",gt=>{ie(_e(ce.result),gt.oldVersion,gt.newVersion,_e(ce.transaction))}),Q&&ce.addEventListener("blocked",()=>Q()),ke.then(gt=>{ye&&gt.addEventListener("close",()=>ye()),re&&gt.addEventListener("versionchange",()=>re())}).catch(()=>{}),ke}function Me(W,{blocked:we}={}){const Q=indexedDB.deleteDatabase(W);return we&&Q.addEventListener("blocked",()=>we()),_e(Q).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function je(W,we){if(!(W instanceof IDBDatabase)||we in W||"string"!=typeof we)return;if(Ue.get(we))return Ue.get(we);const Q=we.replace(/FromIndex$/,""),ie=we!==Q,re=Ie.includes(Q);if(!(Q in(ie?IDBIndex:IDBObjectStore).prototype)||!re&&!be.includes(Q))return;const ye=function(){var ce=(0,d.Z)(function*(ke,...gt){const $t=this.transaction(ke,re?"readwrite":"readonly");let Bt=$t.store;return ie&&(Bt=Bt.index(gt.shift())),(yield Promise.all([Bt[Q](...gt),re&&$t.done]))[0]});return function(gt){return ce.apply(this,arguments)}}();return Ue.set(we,ye),ye}!function De(W){Oe=W(Oe)}(W=>({...W,get:(we,Q,ie)=>je(we,Q)||W.get(we,Q,ie),has:(we,Q)=>!!je(we,Q)||W.has(we,Q)}))},5861:(ct,Ne,F)=>{function d(k,le,se,pe,de,fe,me){try{var G=k[fe](me),$=G.value}catch(J){return void se(J)}G.done?le($):Promise.resolve($).then(pe,de)}function te(k){return function(){var le=this,se=arguments;return new Promise(function(pe,de){var fe=k.apply(le,se);function me($){d(fe,pe,de,me,G,"next",$)}function G($){d(fe,pe,de,me,G,"throw",$)}me(void 0)})}}F.d(Ne,{Z:()=>te})}},ct=>{ct(ct.s=2608)}]);